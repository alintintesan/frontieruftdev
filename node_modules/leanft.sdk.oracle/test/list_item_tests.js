// (c) Copyright 2015 - 2023 Micro Focus or one of its affiliates..
/*
 * Created on 09/18/2018.
 */

var assert = require("assert");
var sinon = require("sinon");

describe("List Item", function () {

    var ListItem = require("../lib/list_item.js").ListItem;
    var listItemUnderTest;
    var owner;

    beforeEach(function () {
        owner = { owner: "Owner",_executeWithEventsOnItemOnError: sinon.stub() };
        listItemUnderTest = new ListItem(owner, "identifier");
        listItemUnderTest._executeWithEventsOnItemOnError = sinon.stub();
    });

    afterEach(function () {
        delete listItemUnderTest._executeWithEventsOnItemOnError;
        delete owner._executeWithEventsOnItemOnError;
    });


    describe("Constructor", function () {
        it("should assign correct values", function () {
            assert.strictEqual(listItemUnderTest._ownerList, owner);
            assert.strictEqual(listItemUnderTest._identifier, "identifier");
        });
    });

    describe("_getIdentifier method", function () {
        it("should return correct values", function () {
            var res = listItemUnderTest._getIdentifier();
            assert.strictEqual(res, "identifier");
        });
    });

    describe("_getTextRepresentation method", function () {
        it("should return correct values", function () {
            var res = listItemUnderTest._getTextRepresentation();
            assert.strictEqual(res, "identifier");
        });
    });

    describe("isSelected method", function () {
        it("should execute _isItemSelected with correct parameter", function () {
            listItemUnderTest._ownerList._isItemSelected = sinon.stub();
            listItemUnderTest.isSelected();
            sinon.assert.calledOnce(listItemUnderTest._executeWithEventsOnItemOnError);
            sinon.assert.calledWith(listItemUnderTest._executeWithEventsOnItemOnError, listItemUnderTest._ownerList._isItemSelected, "identifier");
        });

        it("should return bool if _isItemSelected returns bool", function () {
            listItemUnderTest._executeWithEventsOnItemOnError = sinon.stub().returns(true);
            var res = listItemUnderTest.isSelected();
            assert.strictEqual(res, true);
        });
    });
});
