/**
 * Created by diamanta on 11/10/2015.
 */
var LFT = require("../../leanft");
var SDK = LFT.SDK;
var Web = LFT.Web;

var expect = require("../../leanft/expect");
//var Reporter = require("../../leanft/report");

var browserTypeToTest = Web.BrowserType.Firefox;

var browser;

jasmine.DEFAULT_TIMEOUT_INTERVAL = 120 * 1000;

xdescribe("new Test", function () {

    beforeAll(function (done) {
        //LFT.SDK.init();
        LFT.init();
        LFT.whenDone(done);
    });

    beforeEach(function (done) {
        LFT.beforeTest();

        LFT.Reporter.startScreenRecording();

        Web.Browser.launch(browserTypeToTest).then(function (b) {
            browser = b;
            browser.navigate("http://demo.borland.com").then(function (res) { });
        });

        LFT.whenDone(done);
    });

    it("Test screen recording start/stop in before/after", function (done) {
        browser.$(Web.Link({
            innerText: "Test Sites",
            tagName: "A"
        })).click();
        LFT.whenDone(done);
    });

    afterEach(function (done) {
        LFT.afterTest();
        if (browser) {
            //browser.close();
            LFT.Reporter.stopScreenRecording();
        }

        LFT.whenDone(done);
    });

    afterAll(function (done) {
        LFT.cleanup();
        LFT.whenDone(done);
    });


    function sleep(ms) {
        var time_ms = new Date().getTime();
        while (new Date().getTime() < time_ms + ms) { }
    }
});





