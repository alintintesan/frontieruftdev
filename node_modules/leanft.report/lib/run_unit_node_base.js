// (c) Copyright 2015 - 2023 Micro Focus or one of its affiliates..

var LFT = require("leanft.sdk.core");
var Utils = LFT.ObjectUtils;
var ReportUtils = require("./report_utils.js").ReportUtils;
var Enums = require("./enums.js");
var RunUnitNodeState = Enums.RunUnitNodeState;
var Status = Enums.Status;


function RunUnitNodeBase(nodeType){
    this.init(nodeType);
}

RunUnitNodeBase.prototype = {
    _name: null,
    _nodeType: null,
    _duration: null,
    _description: null,
    _htmlDescription: null,
    _parent: null,
    _status: null,
    _time: null,
    _exception: null,
    _state: null,
    _id: null,
    _imageDetails: null,
    _reportAdditionalData: null,
    _isNestingAllowed : false,
    _snapshotData: null,
    _additionalData: null,

    init : function(node) {
        this._time = ReportUtils.getCurrentDateTime();
        this._state = RunUnitNodeState.InProgress;
        this._reportAdditionalData = {};
        this._status = node.status || Status.Passed;
        this._nodeType = node.nodeType;
        this._name = node.name;
        this._description = node.description;
        this._htmlDescription = node.htmlDescription; 
        this._exception = node.exception;
        this._imageDetails = node.imageDetails;
        this._snapshotData = node.snapshotData;
        this._additionalData = node.additionalData;
    },
    closeLevel: function(){
        this._state = RunUnitNodeState.Done;
    },
    cloneNode: function(){
        var clone = Object.create(this);
        return Object.assign(clone,this);
    },

    getParentId: function () {
        if(this._parent) {
            return this._parent._id;
        }

        return null;
    }
};

module.exports.RunUnitNodeBase = RunUnitNodeBase;


