var __commonUtils={str:{_isString:function(a){return Object.prototype.toString.call(a)==="[object String]";},normalize:function(c,b){var a=b?b:"";if(typeof c=="undefined"||c==null){return a;}else{return c+"";}},normalizeNewLine:function(b,a){if(typeof b=="undefined"||b==null){return b;}else{a=a?a:"<br/>";b=b+"";return b.split("\n").join(a);}},normalizeAll:function(f,a,d){var e=this.normalizeNewLine(f,d);e=this.normalize(e,a);if(e){while(true){var c=e.toLowerCase();var b=c.indexOf("<br/>");if(b==0){e=e.slice(5);continue;}else{b=c.indexOf("<br />");if(b==0){e=e.slice(6);continue;}}break;}}return e;},rtrim:function(a){if(this._isString(a)){return a.replace(/(\s*$)/g,"");}},escape:function(g,b){if(this._isString(g)){if(!b||b.length==0){b=[{character:"<",escapeChar:"&lt;"},{character:">",escapeChar:"&gt;"},{character:"&",escapeChar:"&amp;"}];}var f="";for(var c=0;c<g.length;c++){var a=g[c];var d=false;for(var e=0;e<b.length;e++){if(a==b[e].character){f+=b[e].escapeChar?b[e].escapeChar:"";d=true;break;}}if(!d){f+=a;}}return f;}else{return g;}},format:function(){var c=[];for(var a=0,b=arguments.length;a<b;a++){c.push(arguments[a]);}var d=c[0];c.shift();return d.replace(/\{(\d+)\}/g,function(e,f){return c[f];});}},array:{isArray:function(a){if(a&&a instanceof Array){return true;}},makeArray:function(a){if(a){if(this.isArray(a)){return a;}else{return[a];}}},copyArray:function(a){if(this.isArray(a)){var c=[];for(var b=0;b<a.length;b++){c.push(a[b]);}return c;}}},date:{parse:function(g){if(g){var c=g.match(/(\d{4}[-|/]\d{1,2}[-|/]\d{1,2})( (\d{1,2}:\d{1,2}(:\d{1,2}){0,1})){0,1}(.(\d{0,3})){0,1}/);if(c&&c.length>1){var a=c[1];if(a){a=a.replace("-","/").replace("-","/");var h;if(c.length>3){h=c[3];}var e;if(c.length>6){e=parseInt(c[6]);}var d=a;if(h){d+=" "+h;}var f=Date.parse(d);var b=new Date();b.setTime(f);if(!isNaN(e)){b.setMilliseconds(e);}return b;}}var f=Date.parse(g);if(f){var b=new Date();b.setTime(f);return b;}}},parseAndFormat:function(c,b){var a=this.parse(c);if(a&&b){return a.format(b);}},getElapsed:function(d,c,h){if(d&&c){d=d.replace("-","/").replace("-","/");c=c.replace("-","/").replace("-","/");var k=Date.parse(d);var j=Date.parse(c);if(k&&j){var a=new Date();a.setTime(k);var b=new Date();b.setTime(j);var e=b.getTime()-a.getTime();if(!h){return e;}var l=1000*60*60;var m=1000*60;var n=1000;var f=parseInt(e/l);var g=parseInt((e-f*l)/m);var o=Math.round((e-f*l-g*m)/n);var p="";if(f<10){p+="0";}p+=f;p+=":";if(g<10){p+="0";}p+=g;p+=":";if(o<10){p+="0";}p+=o;return p;}}},formatTimeSpan:function(a,h){var e=Math.round(h);var b=Math.floor(e/(1000*60*60));e-=b*(1000*60*60);var d=Math.floor(e/(1000*60));e-=d*(1000*60);var g=Math.floor(e/1000);e-=g*1000;var f={"h+":b,"m+":d,"s+":g,f:e};for(var c in f){if(new RegExp("("+c+")").test(a)){a=a.replace(RegExp.$1,(f[c]>9||RegExp.$1.length==1)?(f[c]):(("00"+f[c]).substr((""+f[c]).length)));}}return a;}},general:{isFunction:function(a){if(a){if(typeof a==="function"){return true;}if(Object.prototype.toString.call(a)==="[object Function]"){return true;}if(a.call&&a.apply){return true;}}},getValue:function(c,b){if(c){if(this.isFunction(c)){var a=[];for(i=2;i<arguments.length;i++){a.push(arguments[i]);}return c.apply(b,a);}else{if(c.hasOwnProperty("#cdata-section")){return c["#cdata-section"];}else{if(c.hasOwnProperty("#text")){return c["#text"];}}}}return c;},dynLoadJS:function(c,f,g,d,e){var a=document.getElementsByTagName("head")[0];if(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",c);if(f){if(b.addEventListener){b.onload=function(){f(this,g);};}else{b.onreadystatechange=function(){if(b.readyState=="loaded"||b.readyState=="complete"){f(b,g);}};}}if(d){b.onerror=function(){d(b,e);};}a.appendChild(b);return b;}},unloadJS:function(b){if(b){var a=document.getElementsByTagName("head")[0];if(a){a.removeChild(b);}}},dynLoadCSS:function(b,f,g,d,e){var c=document.getElementsByTagName("head")[0];if(c){var a=document.createElement("link");a.setAttribute("rel","stylesheet");a.setAttribute("href",b);if(f){if(a.addEventListener){a.onload=function(){f(this,g);};}else{a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"){f(a,g);}};}}if(d){a.onerror=function(){d(a,e);};}c.appendChild(a);return a;}},unloadCSS:function(a){if(a){var b=document.getElementsByTagName("head")[0];if(b){b.removeChild(a);}}},calcAbsTopLeft:function(b,a){if(b){var e=b.offsetLeft;var f=b.offsetTop;var c=b.offsetParent;if(a){if(!c){return;}if(c===a){return{x:e,y:f};}else{var d=this.calcAbsTopLeft(c,a);if(!d){return;}return{x:e+d.x,y:f+d.y};}}else{if(!c){return{x:e,y:f};}else{var d=this.calcAbsTopLeft(c);if(!d){return;}return{x:e+d.x,y:f+d.y};}}}},getLegacyIEVersion:function(){var b=navigator.appVersion;if(b){b=b.split(";");if(b.length>1){var a=parseInt(b[1].replace(/[ ]/g,"").replace(/MSIE/g,""));if(!isNaN(a)){return a;}}}}},querystring:{getByName:function(a){if(a){var b=location.search.match(new RegExp("[?&]"+a+"=([^&]+)","i"));if(b&&b.length>1){return b[1];}}},getByNameWithDef:function(b,a){if(b){var c=location.search.match(new RegExp("[?&]"+b+"(=([^&]+))*","i"));if(c&&c.length>2){var d=c[2];if(typeof d==="undefined"||d==null){return a;}return d;}}}},zIndex:{_value:1000,next:function(){this._value++;return this._value;}}};Date.prototype.format=function(a){var d={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3)};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));}for(var b in d){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(d[b]):(("00"+d[b]).substr((""+d[b]).length)));}}if(/(S)/.test(a)){var c=this.getMilliseconds()+"";a=a.replace(RegExp.$1,("000"+c).substr(c.length));}return a;};Math.uuid=function(c,e){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");var f=[],b;e=e||a.length;if(c){for(b=0;b<c;b++){f[b]=a[0|Math.random()*e];}}else{var d;f[8]=f[13]=f[18]=f[23]="-";f[14]="4";for(b=0;b<36;b++){if(!f[b]){d=0|Math.random()*16;f[b]=a[(b==19)?(d&3)|8:d];}}}return f.join("");};Math.uuidFast=function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");var e=new Array(36),d=0,c;for(var b=0;b<36;b++){if(b==8||b==13||b==18||b==23){e[b]="-";}else{if(b==14){e[b]="4";}else{if(d<=2){d=33554432+(Math.random()*16777216)|0;}c=d&15;d=d>>4;e[b]=a[(b==19)?(c&3)|8:c];}}}return e.join("");};Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0,d=a=="x"?b:(b&3|8);return d.toString(16);});};function ElementWrapper(a){this._const={customPropsKey:"_ewrapper_cust_props"};this._parseClassNames=function(){if(this.e){this._classNames=this.e.className.split(" ");}if(!this._classNames){this._classNames=[];}};if(a){this.e=a;if(!this.e[this._const.customPropsKey]){this.e[this._const.customPropsKey]={};}}}ElementWrapper.prototype.addClassNames=function(){if(this.e&&arguments.length>0){this._parseClassNames();for(var b=0;b<arguments.length;b++){var d=arguments[b];var a=false;for(var c=0;c<this._classNames.length;c++){if(d===this._classNames[c]){a=true;break;}}if(!a){this._classNames.push(d);}}this.e.className="";if(this._classNames&&this._classNames.length>0){this.e.className=this._classNames.join(" ");}}return this;};ElementWrapper.prototype.removeClassNames=function(){if(this.e&&arguments.length>0){this._parseClassNames();var e=[];for(var b=0;b<this._classNames.length;b++){var a=this._classNames[b];var d=false;for(var c=0;c<arguments.length;c++){if(a===arguments[c]){d=true;break;}}if(!d){e.push(a);}}this._classNames=e;this.e.className="";if(this._classNames&&this._classNames.length>0){this.e.className=this._classNames.join(" ");}}return this;};ElementWrapper.prototype.clearClassNames=function(){this.e.className="";this._classNames=[];return this;};ElementWrapper.prototype.hasClassName=function(a){if(this.e){this._parseClassNames();for(var b=0;b<this._classNames.length;b++){if(this._classNames[b]===a){return true;}}}};ElementWrapper.prototype.replaceClassName=function(e,c){if(this.e&&e&&c){this._parseClassNames();var d=[];for(var b=0;b<this._classNames.length;b++){var a=this._classNames[b];if(a===e){a=c;}d.push(a);}this._classNames=d;this.e.className="";if(this._classNames&&this._classNames.length>0){this.e.className=this._classNames.join(" ");}}return this;};ElementWrapper.prototype.appendTo=function(a){if(this.e){var b=a;if(a instanceof ElementWrapper){b=a.e;}if(b){if(b.appendChild&&__commonUtils.general.isFunction(b.appendChild)){b.appendChild(this.e);}}}return this;};ElementWrapper.prototype.removeFrom=function(b){if(this.e){var e=b;if(b instanceof ElementWrapper){e=b.e;}if(e){if(e.removeChild&&__commonUtils.general.isFunction(e.removeChild)){var d=false;var a=e.childNodes;if(a){for(var c=0;c<a.length;c++){if(a[c]===this.e){d=true;break;}}}if(d){e.removeChild(this.e);}}}}return this;};ElementWrapper.prototype.getWidth=function(){if(this.e){return this.e.clientWidth;}};ElementWrapper.prototype.getHeight=function(){if(this.e){return this.e.clientHeight;}};ElementWrapper.prototype.getLeft=function(){if(this.e){return this.e.clientLeft;}};ElementWrapper.prototype.getTop=function(){if(this.e){return this.e.clientTop;}};ElementWrapper.prototype.getOffsetTop=function(){if(this.e){return this.e.offsetTop;}};ElementWrapper.prototype.getOffsetLeft=function(){if(this.e){return this.e.offsetLeft;}};ElementWrapper.prototype.getOffsetWidth=function(){if(this.e){return this.e.offsetWidth;}};ElementWrapper.prototype.getOffsetHeight=function(){if(this.e){return this.e.offsetHeight;}};ElementWrapper.prototype.setScrollTop=function(b){if(this.e&&b!=null){try{this.e.scrollTop=b;}catch(a){}}return this;};ElementWrapper.prototype.setMinWidth=function(b){if(this.e){try{if(b||b==0){this.e.style.minWidth=b+"px";}else{this.e.style.minWidth="";}}catch(a){}}return this;};ElementWrapper.prototype.setMaxWidth=function(b){if(this.e){try{if(b||b==0){this.e.style.maxWidth=b+"px";}else{this.e.style.maxWidth="";}}catch(a){}}return this;};ElementWrapper.prototype.setMinHeight=function(b){if(this.e){try{if(b||b==0){this.e.style.minHeight=b+"px";}else{this.e.style.minHeight="";}}catch(a){}}return this;};ElementWrapper.prototype.setMaxHeight=function(b){if(this.e){try{if(b||b==0){this.e.style.maxHeight=b+"px";}else{this.e.style.maxHeight="";}}catch(a){}}return this;};ElementWrapper.prototype.setWidth=function(b){if(this.e){try{if(b||b==0){this.e.style.width=b+"px";}else{this.e.style.width="";}}catch(a){}}return this;};ElementWrapper.prototype.setWidthPercentage=function(b){if(this.e&&(b||b==0)){try{this.e.style.width=b+"%";}catch(a){}}return this;};ElementWrapper.prototype.setHeight=function(b){if(this.e){try{if(b||b==0){this.e.style.height=b+"px";}else{this.e.style.height="";}}catch(a){}}return this;};ElementWrapper.prototype.setHeightPercentage=function(b){if(this.e&&(b||b==0)){try{this.e.style.height=b+"%";}catch(a){}}return this;};ElementWrapper.prototype.setLeft=function(b){if(this.e){try{if(b||b==0){this.e.style.left=b+"px";}else{this.e.style.left="";}}catch(a){}}return this;};ElementWrapper.prototype.setLeftPercentage=function(b){if(this.e&&b){try{this.e.style.left=b+"%";}catch(a){}}return this;};ElementWrapper.prototype.setTop=function(b){if(this.e){try{if(b||b==0){this.e.style.top=b+"px";}else{this.e.style.top="";}}catch(a){}}return this;};ElementWrapper.prototype.setTopPercentage=function(b){if(this.e&&b){try{this.e.style.top=b+"%";}catch(a){}}return this;};ElementWrapper.prototype.setMargin=function(e,d,a,c){if(this.e){try{if((e&&!isNaN(e))||e==0){this.e.style.marginTop=e+"px";}if((d&&!isNaN(d))||d==0){this.e.style.marginRight=d+"px";}if((a&&!isNaN(a))||a==0){this.e.style.marginBottom=a+"px";}if((c&&!isNaN(c))||c==0){this.e.style.marginLeft=c+"px";}}catch(b){}}return this;};ElementWrapper.prototype.setPadding=function(e,d,a,c){if(this.e){try{if((e&&!isNaN(e))||e==0){this.e.style.paddingTop=e+"px";}if((d&&!isNaN(d))||d==0){this.e.style.paddingRight=d+"px";}if((a&&!isNaN(a))||a==0){this.e.style.paddingBottom=a+"px";}if((c&&!isNaN(c))||c==0){this.e.style.paddingLeft=c+"px";}}catch(b){}}return this;};ElementWrapper.prototype.setOverflow=function(b,c){if(this.e){try{if(typeof b!="undefined"&&b!=null){this.e.style.overflowX=b;}if(typeof c!="undefined"&&c!=null){this.e.style.overflowY=c;}}catch(a){}}return this;};ElementWrapper.prototype.setZIndex=function(b){if(this.e){try{if(b||b==0){this.e.style.zIndex=""+b;}else{this.e.style.zIndex="";}}catch(a){}}return this;};ElementWrapper.prototype.setInnerHTML=function(a){if(this.e){this.e.innerHTML=a;}return this;};ElementWrapper.prototype.setTitle=function(a){if(this.e){this.e.title=a;}return this;};ElementWrapper.prototype.setCursor=function(a){if(this.e){this.e.style.cursor=a;}return this;};ElementWrapper.prototype.setCustomProperty=function(a,c,b){if(this.e&&this.e[this._const.customPropsKey]&&a){if(typeof(this.e[this._const.customPropsKey][a])=="undefined"||(typeof(this.e[this._const.customPropsKey][a])!="undefined"&&!b)){this.e[this._const.customPropsKey][a]=c;}}return this;};ElementWrapper.prototype.getCustomProperty=function(a){if(this.e&&this.e[this._const.customPropsKey]&&a){return this.e[this._const.customPropsKey][a];}};ElementWrapper.prototype.setOnLoadHandler=function(a){if(this.e){this.e.onload=a;}return this;};ElementWrapper.prototype.setOnClickHandler=function(a){if(this.e){this.e.onclick=a;}return this;};ElementWrapper.prototype.setOnMouseDownHandler=function(a){if(this.e){this.e.onmousedown=a;}return this;};ElementWrapper.prototype.setOnMouseUpHandler=function(a){if(this.e){this.e.onmouseup=a;}return this;};ElementWrapper.prototype.setOnMouseEnterHandler=function(a){if(this.e){this.e.onmouseenter=a;}return this;};ElementWrapper.prototype.setOnMouseLeaveHandler=function(a){if(this.e){this.e.onmouseleave=a;}return this;};ElementWrapper.prototype.setOnKeyPressHandler=function(a){if(this.e){this.e.onkeypress=a;}return this;};ElementWrapper.prototype.setOnKeyUpHandler=function(a){if(this.e){this.e.onkeyup=a;}return this;};ElementWrapper.prototype.setOnKeyDownHandler=function(a){if(this.e){this.e.onkeydown=a;}return this;};ElementWrapper.prototype.addEventListener=function(a,b,c){c=c||false;if(this.e&&a&&b){if(this.e.addEventListener){this.e.addEventListener(a,b,c);}else{if(this.e.attachEvent){this.e.attachEvent("on"+a,b,c);}}}return this;};ElementWrapper.prototype.enableResizing=function(a){this.setCustomProperty("resize_settings",a);return this;};ElementWrapper.prototype.setId=function(a){if(this.e&&a){this.e.id=a;}return this;};ElementWrapper.prototype.getId=function(){if(this.e){return this.e.id;}};ElementWrapper.prototype.setHidden=function(a){if(this.e){this.e.hidden=a?true:false;}return this;};ElementWrapper.prototype.getHidden=function(){if(this.e){return this.e.hidden;}};ElementWrapper.prototype.isVisible=function(){var b=this.getHidden();if(b){return false;}if(this.e){var a=this.e.style.display;if(a=="none"){return false;}}return true;};ElementWrapper.prototype.focus=function(){if(this.e){this.e.focus();}return this;};ElementWrapper.prototype.blur=function(){if(this.e){this.e.blur();}return this;};var __uiElements={get_wrapper:function(a){if(a){var b=a;if(!(a instanceof ElementWrapper)){b=new ElementWrapper(a);}return b;}},create_div:function(){return new ElementWrapper(document.createElement("div"));},create_span:function(){return new ElementWrapper(document.createElement("span"));},create_button:function(){return new ElementWrapper(document.createElement("button"));},create_cleardiv:function(){return new ElementWrapper(document.createElement("div")).addClassNames("clear");},create_input:function(){var c=new ElementWrapper(document.createElement("input"));if(arguments.length>0){for(var b=0;b<arguments.length;b++){var a=arguments[b];if(a&&a.name){c.e.setAttribute(a.name,a.value);}}}return c;},create_img:function(c,a){var b=new ElementWrapper(document.createElement("img"));if(c){b.e.src=c.replace(/\\/g,"/");}if(a){b.e.alt=a;}return b;},create_link:function(a,c){var b=new ElementWrapper(document.createElement("a"));if(a){b.e.href=a;}if(c){b.e.target=c;}return b;},create_iframe:function(f,c,d,e,g,a){var b=new ElementWrapper(document.createElement("iframe"));if(f){b.e.src=f;}if(c){b.e.name=c;}if(!e){b.e.border="0";}if(d){b.e.scrolling=d;}if(g){b.e.setAttribute("width",g);}if(a){b.e.setAttribute("height",a);}return b;},create_table:function(){var c=new ElementWrapper(document.createElement("table"));if(arguments.length>0){for(var b=0;b<arguments.length;b++){var a=arguments[b];if(a&&a.name){c.e.setAttribute(a.name,a.value);}}}return c;},add_table_row:function(d){if(d){var c=new ElementWrapper(document.createElement("tr")).appendTo(d);if(arguments.length>1){for(var b=1;b<arguments.length;b++){var a=arguments[b];if(a&&a.name){c.e.setAttribute(a.name,a.value);}}}return c;}},add_table_cell:function(d){if(d){var b=new ElementWrapper(document.createElement("td")).appendTo(d);if(arguments.length>1){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(a&&a.name){b.e.setAttribute(a.name,a.value);}}}return b;}},add_cell_pre:function(a){if(a){return new ElementWrapper(document.createElement("pre")).appendTo(a);}},create_ul:function(){return new ElementWrapper(document.createElement("ul"));},create_ol:function(){return new ElementWrapper(document.createElement("ol"));},add_list_item:function(a){if(a){return new ElementWrapper(document.createElement("li")).appendTo(a);}},SVG_NAMEPSACE:"http://www.w3.org/2000/svg",create_svg:function(m,c,l,h,j,k,a,g,b){var f=document.createElementNS(__uiElements.SVG_NAMEPSACE,"svg");f.setAttributeNS(null,"version","1.1");f.setAttributeNS(null,"width",m);f.setAttributeNS(null,"height",c);f.setAttributeNS(null,"viewBox",__commonUtils.str.format("{0} {1} {2} {3}",j||0,k||0,l||m,h||c));if(a){f.setAttributeNS(null,"class",a);}if(b){for(var d=0;d<b.length;d++){f.setAttributeNS(null,b[d].name,b[d].value);}}var e=new ElementWrapper(f);if(g){new ElementWrapper(document.createElementNS(__uiElements.SVG_NAMEPSACE,"title")).setInnerHTML(g).appendTo(e);}return e;},add_svg_group:function(d,h,a,g,b){if(d){var f=document.createElementNS(__uiElements.SVG_NAMEPSACE,"g");if(h){f.setAttributeNS(null,"transform",h);}if(a){f.setAttributeNS(null,"class",a);}if(b){for(var c=0;c<b.length;c++){f.setAttributeNS(null,b[c].name,b[c].value);}}var e=new ElementWrapper(f).appendTo(__uiElements.get_wrapper(d));if(g){new ElementWrapper(document.createElementNS(__uiElements.SVG_NAMEPSACE,"title")).setInnerHTML(g).appendTo(e);}return e;}},add_svg_path:function(d,e,j,a,h,b){if(d){var g=document.createElementNS(__uiElements.SVG_NAMEPSACE,"path");if(e){g.setAttributeNS(null,"d",e);}if(j){g.setAttributeNS(null,"transform",j);}if(a){g.setAttributeNS(null,"class",a);}if(b){for(var c=0;c<b.length;c++){g.setAttributeNS(null,b[c].name,b[c].value);}}var f=new ElementWrapper(g).appendTo(__uiElements.get_wrapper(d));if(h){new ElementWrapper(document.createElementNS(__uiElements.SVG_NAMEPSACE,"title")).setInnerHTML(h).appendTo(f);}return f;}},add_svg_text:function(d,f,h,j,g,a,b){if(d){var e=document.createElementNS(__uiElements.SVG_NAMEPSACE,"text");e.setAttributeNS(null,"x",h||0);e.setAttributeNS(null,"y",j||0);if(g){e.setAttributeNS(null,"transform",g);}if(a){e.setAttributeNS(null,"class",a);}if(b){for(var c=0;c<b.length;c++){e.setAttributeNS(null,b[c].name,b[c].value);}}return new ElementWrapper(e).setInnerHTML(f||"").appendTo(__uiElements.get_wrapper(d));}},add_svg_rectangle:function(e,l,m,k,c,j,a,h,b){if(e){var g=document.createElementNS(__uiElements.SVG_NAMEPSACE,"rect");g.setAttributeNS(null,"x",l||0);g.setAttributeNS(null,"y",m||0);g.setAttributeNS(null,"width",k||10);g.setAttributeNS(null,"height",c||10);if(j){g.setAttributeNS(null,"transform",j);}if(a){g.setAttributeNS(null,"class",a);}if(b){for(var d=0;d<b.length;d++){g.setAttributeNS(null,b[d].name,b[d].value);}}var f=new ElementWrapper(g).appendTo(__uiElements.get_wrapper(e));if(h){new ElementWrapper(document.createElementNS(__uiElements.SVG_NAMEPSACE,"title")).setInnerHTML(h).appendTo(f);}return f;}},add_svg_circle:function(f,b,c,g,l,a,k,d){if(f){var j=document.createElementNS(__uiElements.SVG_NAMEPSACE,"circle");j.setAttributeNS(null,"cx",b||0);j.setAttributeNS(null,"cy",c||0);j.setAttributeNS(null,"r",g||10);if(l){j.setAttributeNS(null,"transform",l);}if(a){j.setAttributeNS(null,"class",a);}if(d){for(var e=0;e<d.length;e++){j.setAttributeNS(null,d[e].name,d[e].value);}}var h=new ElementWrapper(j).appendTo(__uiElements.get_wrapper(f));if(k){new ElementWrapper(document.createElementNS(__uiElements.SVG_NAMEPSACE,"title")).setInnerHTML(k).appendTo(h);}return h;}},get_custom_prop:function(a,c){var b=this.get_wrapper(a);if(b){return b.getCustomProperty(c);}},show_float_pane:function(e,b,f,m,g,h,k){if(e){var p=0.8;var c=this.create_div().appendTo(document.body);var q={floatPane:c,maxWidth:document.body.clientWidth*p,maxHeight:document.body.clientHeight*p};var a=this.get_wrapper(e(q,b));if(a){var o=__commonUtils.zIndex.next();var j=__commonUtils.zIndex.next();var d=this.create_div().appendTo(c);a.appendTo(d);c.setCustomProperty("internal_content_obj",a);d.addClassNames("float-pane-container");c.addClassNames("float-pane").setZIndex(j).setMaxWidth(q.maxWidth).setMaxHeight(q.maxHeight).setMargin(-c.getOffsetHeight()/2,null,null,-c.getOffsetWidth()/2);var s=Math.uuid();var t={fp:c,factor:p,layoutCB:f,layoutCBArgs:m};var u=function(){if(this.fp){var v=__uiElements.get_custom_prop(this.fp,"internal_content_obj");var w={floatPane:this.fp,content:v,maxWidth:document.body.clientWidth*this.factor,maxHeight:document.body.clientHeight*this.factor};if(this.layoutCB){this.layoutCB(w,this.layoutCBArgs);}this.fp.setMaxWidth(w.maxWidth).setMaxHeight(w.maxHeight).setMargin(-this.fp.getOffsetHeight()/2,null,null,-this.fp.getOffsetWidth()/2);}};__callbackCenter.registerCallback("window_onresize",t,u,s);var n=this.create_div().addClassNames("mask-layer").setZIndex(o).setCustomProperty("floatPaneObj",c).setCustomProperty("windowResizeCBInfo",{regByObj:t,callbackId:s}).setCustomProperty("floatPaneRemoveCBInfo",{callback:g,callbackArgs:h}).setCustomProperty("forbidCloseOnClick",k).setOnClickHandler(function(){var w=__uiElements.get_custom_prop(this,"forbidCloseOnClick");if(w){return;}var x=__uiElements.get_custom_prop(this,"floatPaneObj");if(x){var z=__uiElements.get_custom_prop(this,"floatPaneRemoveCBInfo");if(z&&z.callback){var v=__uiElements.get_custom_prop(x,"internal_content_obj");var y={floatPane:x,content:v};z.callback(y,z.callbackArgs);}x.removeFrom(document.body);}var A=__uiElements.get_custom_prop(this,"windowResizeCBInfo");if(A){__callbackCenter.unregisterCallback("window_onresize",A.regByObj,A.callbackId);}document.body.removeChild(this);document.body.style.overflow="";}).appendTo(document.body);var l;if(document.all){var r=[/MSIE (\d+)\.0/i.exec(navigator.userAgent)][0];if(r&&r.length>1){l=r[1];}}if(l){n.addClassNames("ie-style");}c.setCustomProperty("mask_layer",n);document.body.style.overflow="hidden";__callbackCenter.invokeCallbacks("window_onresize");return c;}}},show_content_in_float_pane:function(h,e,c,d){if(!h||!e){return;}var b=[h,e,c,d];var a=function(u,n){if(n&&n.length>0){var m=n[0];var l=n[1];var k=n[2]?n[2].toLowerCase():null;var j=n[3];var v=u.maxWidth*0.8;var r=u.maxHeight*0.8;var q={fpContainer:"fp-filecontent-container",fpCaption:"fp-filecontent-caption",fpContentWrapper:"fp-filecontent-contentwrapper",fpLink:"fp-filecontent-link",fpContent:"fp-filecontent-content"};var o=__uiElements.create_div().addClassNames(q.fpContainer).setWidth(v).setHeight(r);if(j){__uiElements.create_div().addClassNames(q.fpCaption).setInnerHTML(j).appendTo(o);}var p=__uiElements.create_div().addClassNames(q.fpContentWrapper).appendTo(o);var s={originalFile:m};var t=function(y,w){if(typeof __get_float_pane_content!="undefined"&&__get_float_pane_content&&__commonUtils.general.isFunction(__get_float_pane_content)){var x=__get_float_pane_content();__commonUtils.general.unloadJS(y);if(x){if(w.originalFile&&(k==".html"||k==".htm")){var z=__uiElements.create_div().addClassNames(q.fpLink).appendTo(p);var A=__res.get("floatpane_openhtml_externalbrowser_link_label","Show content in external browser");__uiElements.create_link("####").setInnerHTML(A).setCustomProperty("orifile",w.originalFile).setOnClickHandler(function(){var B=__uiElements.get_custom_prop(this,"orifile");window.open(B,Math.uuid());}).appendTo(z);}__uiElements.create_div().addClassNames(q.fpContent).setInnerHTML("<pre>"+x+"</pre>").appendTo(p);x=null;}}else{__commonUtils.general.unloadJS(y);}};__commonUtils.general.dynLoadJS(l,t,s);return o;}};var g;var f=function(m,j){var k=m.content;if(k){var n=m.maxWidth*0.8;var l=m.maxHeight*0.8;k.setWidth(n).setHeight(l);return k;}};__uiElements.show_float_pane(a,b,f,g);},show_content_in_float_pane_in_iframe:function(a,d){var c=[a,d];var b=function(p,j){if(j&&j.length>0){var h=j[0];var g=j[1];var q=p.maxWidth*0.8;var o=p.maxHeight*0.8;var n={fpContainer:"fp-filecontent-container",fpCaption:"fp-filecontent-caption",fpContentWrapper:"fp-filecontent-contentwrapper",fpLink:"fp-filecontent-link",fpContent:"fp-filecontent-content"};var l=__uiElements.create_div().addClassNames(n.fpContainer).setWidth(q).setHeight(o);if(g){var k=__uiElements.create_div().addClassNames(n.fpCaption).setInnerHTML(g).appendTo(l);l.setCustomProperty("caption_block",k);}var m=__uiElements.create_div().addClassNames(n.fpContentWrapper).appendTo(l);l.setCustomProperty("content_block",m);if(h){__uiElements.create_iframe(h,"float_pane_content","auto",false,"100%","100%").appendTo(m);}return l;}};var f;var e=function(n,h){var l=n.content;if(l){var o=n.maxWidth*0.8;var m=n.maxHeight*0.8;l.setWidth(o).setHeight(m);var g=m;var j=__uiElements.get_custom_prop(l,"caption_block");var k=__uiElements.get_custom_prop(l,"content_block");if(k){if(j){g-=k.getOffsetTop();}k.setHeight(g);}return l;}};__uiElements.show_float_pane(b,c,e,f);},show_file_diff_compare_in_float_pane:function(k,d,f){if(k){var a,c,b,h,e,j,g;a=__commonUtils.general.dynLoadCSS("diffcompare/codemirror.css",function(){c=__commonUtils.general.dynLoadCSS("diffcompare/compare.css",function(){b=__commonUtils.general.dynLoadJS("diffcompare/codemirror.js",function(){h=__commonUtils.general.dynLoadJS("diffcompare/diff_match_patch.js",function(){e=__commonUtils.general.dynLoadJS("diffcompare/compare.js",function(){if(!d){d="o.js";}j=__commonUtils.general.dynLoadJS(k+"/"+d,function(){if(!f){f="c.js";}g=__commonUtils.general.dynLoadJS(k+"/"+f,function(){if(typeof compareFile!=="undefined"&&compareFile&&typeof orginalFile!=="undefined"&&orginalFile&&typeof compareFile.content!=="undefined"&&typeof orginalFile.content!=="undefined"){var n=[];var m=function(x,t){var v={comparisonContainer:"comparison-container"};var y=x.maxWidth*0.8;var w=x.maxHeight*0.8;var u=__uiElements.create_div().addClassNames(v.comparisonContainer).setWidth(y).setHeight(w);return u;};var q;var p=function(w,t){var u=w.content;if(u){var x=w.maxWidth*0.8;var v=w.maxHeight*0.8;u.setWidth(x).setHeight(v);return u;}};var r=function(u,t){__commonUtils.general.unloadCSS(a);__commonUtils.general.unloadCSS(c);__commonUtils.general.unloadJS(b);__commonUtils.general.unloadJS(h);__commonUtils.general.unloadJS(e);__commonUtils.general.unloadJS(j);__commonUtils.general.unloadJS(g);};var s;var o=__uiElements.show_float_pane(m,n,p,q,r,s);var l=__uiElements.get_custom_prop(o,"internal_content_obj");if(l){CodeMirror.MergeView(l.e,{value:compareFile.content,origLeft:null,orig:orginalFile.content,lineNumbers:true,mode:"text/html",highlightDifferences:true,connect:"align",collapseIdentical:1,revertButtons:false,allowEditingOriginals:false,valueContentTitle:__res.get("difftool_contentTitle_actual","Actual content"),origContentTitle:__res.get("difftool_contentTitle_expected","Expected content"),lockTooltip:__res.get("difftool_lockScrollTooltip","Toggle locked scrolling")});}}});});});});});});});}},remove_float_pane:function(a){if(a){var b=a.getCustomProperty("mask_layer");a.removeFrom(document.body);var c=__uiElements.get_custom_prop(b,"windowResizeCBInfo");if(c){__callbackCenter.unregisterCallback("window_onresize",c.regByObj,c.callbackId);}document.body.removeChild(b.e);document.body.style.overflow="";}},show_embedded_loading_ui:function(b,a){if(!a){a=this.create_div().addClassNames("emb-loading-ui-global-container").setCustomProperty("isTempCreated",true).appendTo(document.body);}if(!b){b="Report is loading now...";}var c=this.create_div().addClassNames("emb-loading-ui").setInnerHTML(b).setCustomProperty("container",a).appendTo(a);return c;},remove_embedded_loading_ui:function(c){if(c){var a=this.get_custom_prop(c,"container");if(a){c.removeFrom(a);var b=this.get_custom_prop(a,"isTempCreated");if(b){a.removeFrom(document.body);}}}},show_image_viewer_in_float_pane:function(d,g){var c=d;if(!c){return;}var b=[c,g];var a=function(r,j){if(j&&j.length>=2){var h=j[0];var k=j[1];var n={floatPane:"image-view-float-pane",floatPaneContentOuter:"image-view-float-pane-content-outer",floatPaneContentInner:"image-view-float-pane-content-inner"};var m=__uiElements.create_div().addClassNames(n.floatPaneContentOuter);var l=__uiElements.create_div().addClassNames(n.floatPaneContentInner).appendTo(m).setWidth(r.maxWidth).setHeight(r.maxHeight);var q={showZoomFactorTooltip:true};var p=new ImageViewer(h,l,q).enableZoomAndPan().enableAnimateHighlight();if(k&&k.highlight){var o=k.highlight;p.highlight(o.top,o.left,o.width,o.height,o.customStyle);}m.setCustomProperty("innerContainer",l).setCustomProperty("imageViewer",p);r.floatPane.addClassNames(n.floatPane);return m;}};var f;var e=function(m,h){var j=m.content;if(j){var l=__uiElements.get_custom_prop(j,"innerContainer");if(l){l.setWidth(m.maxWidth).setHeight(m.maxHeight);}var k=__uiElements.get_custom_prop(j,"imageViewer");if(k){k.update(k.getCurrentScaleFactor());}}};__uiElements.show_float_pane(a,b,e,f);},show_image_viewer_in_float_pane_by_imgelement:function(a,c){if(a){var b=a.getAttribute("src");if(b){this.show_image_viewer_in_float_pane(b,c);}}}};function ScaleImage(c,a){this._imageUrl=c;this._container=a;this._cssNames={scaleImage:"scale-image"};this._underlyingImageViewer=new ImageViewer(this._imageUrl,this._container,{imageCustomStyle:this._cssNames.scaleImage});var b=this;this._underlyingImageViewer.addEventListener("click",function(){__uiElements.show_image_viewer_in_float_pane(b._imageUrl,{highlight:b._highlightInfo});});}ScaleImage.prototype.highlight=function(d,c,e,b,a){this._highlightInfo={top:d,left:c,width:e,height:b,customStyle:a};this._underlyingImageViewer.highlight(d,c,e,b,a);return this;};ScaleImage.prototype.setImageAlign=function(a,b){this._underlyingImageViewer.setImageAlign(a,b);return this;};ScaleImage.prototype.enableAutoSize=function(){this._underlyingImageViewer.enableAutoSize();return this;};ScaleImage.prototype.disableAutoSize=function(){this._underlyingImageViewer.disableAutoSize();return this;};ScaleImage.prototype.update=function(){this._underlyingImageViewer.update();return this;};ScaleImage.prototype.getWidthHeightRatio=function(){return this._underlyingImageViewer.getWidthHeightRatio();};function ImageViewer(b,a,c){this._imageInfo={url:b,container:a,imageCustomStyle:c?c.imageCustomStyle:null,oriWidth:null,oriHeight:null,loadCompleted:false,loadError:false,loadErrorReason:"",currentWidth:null,currentHeight:null,currentScaleFactor:null,allowPan:false,pan:{enabled:false,startScreenX:null,startScreenY:null,startImageOffsetLeft:null,startImageOffsetTop:null},eventListenersCache:[],autoSize:false,verticalAlign:"middle",horizontalAlign:"center",showZoomFactorTooltip:c?c.showZoomFactorTooltip:false};this._cssNames={docker:"image-docker",dockerAutoSize:"auto-size",imageViewport:"image-viewport",imageAllowPan:"allow-pan",imageWrapper:"image-wrapper",highlight:"image-highlight",highlightAlt1:"image-highlight-alt1",highlightAlt2:"image-highlight-alt2",imageMask:"image-mask"};this._loadImage();}ImageViewer.prototype.highlight=function(d,c,e,b,a){this._imageInfo.highlight={top:d,left:c,width:e,height:b,customStyle:a};this._updateHighlight();return this;};ImageViewer.prototype.enableZoomAndPan=function(){this._needInitZoomAndPan=true;if(this._imageInfo.loadCompleted){this._initZoomAndPan();}return this;};ImageViewer.prototype.update=function(a){if(this._docker&&this._docker.e.parentElement===__uiElements.get_wrapper(this._imageInfo.container).e){this._scaleInternal(a);}return this;};ImageViewer.prototype.getWidthHeightRatio=function(){if(this._imageInfo.loadCompleted&&this._imageInfo.oriWidth&&this._imageInfo.oriHeight){return this._imageInfo.oriWidth/this._imageInfo.oriHeight;}};ImageViewer.prototype.getCurrentScaleFactor=function(){return this._imageInfo.currentScaleFactor;};ImageViewer.prototype.getAutoScaleFactor=function(){if(this._docker){var d=__uiElements.get_wrapper(this._imageInfo.container);var c=d.getWidth();var b=d.getHeight();var f=this._docker.getWidth();var e=this._docker.getHeight();var j=c>0?Math.min(c,f):f;var g=b>0?Math.min(b,e):e;var k=(j-2)/this._imageInfo.oriWidth;var h=(g-2)/this._imageInfo.oriHeight;var a=Math.min(k,h);return a;}};ImageViewer.prototype.addEventListener=function(a,b){if(a&&b){if(this._imageInfo.loadCompleted){this._addEventListenerInternal(a,b);}else{this._imageInfo.eventListenersCache.push({eventName:a,listener:b});}}return this;};ImageViewer.prototype.setImageAlign=function(a,b){if(a){this._imageInfo.horizontalAlign=a;}if(b){this._imageInfo.verticalAlign=b;}if(this._imageInfo.loadCompleted){this._layoutTableMainCell.e.style.textAlign=this._imageInfo.horizontalAlign;this._layoutTableMainCell.e.style.verticalAlign=this._imageInfo.verticalAlign;}return this;};ImageViewer.prototype.enableAutoSize=function(){this._imageInfo.autoSize=true;if(this._imageInfo.loadCompleted){this._docker.addClassNames(this._cssNames.dockerAutoSize);this.update();}return this;};ImageViewer.prototype.disableAutoSize=function(){this._imageInfo.autoSize=false;if(this._imageInfo.loadCompleted){this._docker.removeClassNames(this._cssNames.dockerAutoSize);this.update();}return this;};ImageViewer.prototype.enableAnimateHighlight=function(b,a){if(!this._imageInfo.loadCompleted){this._animateHighlightInfo={number:b,interval:a};}else{this._animateHighlightInternal(b,a);}return this;};ImageViewer.prototype._animateHighlightInternal=function(d,c){if(!this._imageInfo.highlight||!this._highlightObj){return this;}if(!d){d=3;}if(!c){c=250;}var f=0;var a=this._cssNames;var b=this._highlightObj;var e=setInterval(function(){f++;if(f>d*2){clearInterval(e);b.removeClassNames(a.highlightAlt1).removeClassNames(a.highlightAlt2);return;}if(f%2==1){b.removeClassNames(a.highlightAlt2).addClassNames(a.highlightAlt1);}else{b.removeClassNames(a.highlightAlt1).addClassNames(a.highlightAlt2);}},c);return this;};ImageViewer.prototype._loadImage=function(){var b=new Image();var a=this;b.onload=function(){a._onImageLoad(this);};b.onerror=function(){a._imageInfo.loadError=true;a._imageInfo.loadErrorReason="Failed to load the image. An error occurred.";console.log(a._imageInfo.loadErrorReason);};b.src=this._imageInfo.url.replace(/\\/g,"/");return this;};ImageViewer.prototype._onImageLoad=function(c){if(c&&c.width>0&&c.height>0){this._imageInfo.oriWidth=c.width;this._imageInfo.oriHeight=c.height;}else{this._imageInfo.loadError=true;this._imageInfo.loadErrorReason="The image is loaded but the width and/or height is zero. Url: "+this._imageInfo.url;console.log(this._imageInfo.loadErrorReason);return this;}this._docker=__uiElements.create_div().addClassNames(this._cssNames.docker).appendTo(this._imageInfo.container);if(this._imageInfo.autoSize){this._docker.addClassNames(this._cssNames.dockerAutoSize);}var d=__uiElements.create_table().appendTo(this._docker);var e=__uiElements.add_table_row(d);this._layoutTableMainCell=__uiElements.add_table_cell(e);this._layoutTableMainCell.e.style.textAlign=this._imageInfo.horizontalAlign;this._layoutTableMainCell.e.style.verticalAlign=this._imageInfo.verticalAlign;this._imageViewport=__uiElements.create_div().addClassNames(this._cssNames.imageViewport).appendTo(this._layoutTableMainCell);if(this._imageInfo.imageCustomStyle){this._imageViewport.addClassNames(this._imageInfo.imageCustomStyle);}this._imageWrapper=__uiElements.create_div().addClassNames(this._cssNames.imageWrapper).appendTo(this._imageViewport);this._imageObj=__uiElements.create_img(this._imageInfo.url).appendTo(this._imageWrapper);this._highlightObj=__uiElements.create_span().addClassNames(this._cssNames.highlight).appendTo(this._imageWrapper);if(this._imageInfo.highlight&&this._imageInfo.highlight.customStyle){this._highlightObj.addClassNames(this._imageInfo.highlight.customStyle);}this._imageMask=__uiElements.create_div().addClassNames(this._cssNames.imageMask).appendTo(this._imageViewport);this.update();if(this._needInitZoomAndPan){this._initZoomAndPan();}for(var b=0;b<this._imageInfo.eventListenersCache.length;b++){var a=this._imageInfo.eventListenersCache[b];this._addEventListenerInternal(a.eventName,a.listener);}this._imageInfo.eventListenersCache=[];this._imageInfo.loadCompleted=true;return this;};ImageViewer.prototype._scaleInternal=function(j){if(!this._imageViewport||!this._imageWrapper||!this._imageInfo.oriWidth||!this._imageInfo.oriHeight){return this;}if(this._imageInfo.autoSize){this._imageObj.setWidth(null).setHeight(null);this._imageWrapper.setWidth(null).setHeight(null);this._imageViewport.setWidth(null).setHeight(null);}var a=this.getAutoScaleFactor();var g=j;if(!j){g=a;if(g>1){g=1;}}var d,e;if(this._imageInfo.currentScaleFactor){d=(this._imageViewport.getWidth()/2-this._imageWrapper.getOffsetLeft())/this._imageInfo.currentScaleFactor;e=(this._imageViewport.getHeight()/2-this._imageWrapper.getOffsetTop())/this._imageInfo.currentScaleFactor;}else{d=this._imageInfo.oriWidth/2;e=this._imageInfo.oriHeight/2;}this._imageInfo.currentWidth=g*this._imageInfo.oriWidth;this._imageInfo.currentHeight=g*this._imageInfo.oriHeight;this._imageObj.setWidth(this._imageInfo.currentWidth).setHeight(this._imageInfo.currentHeight);this._imageWrapper.setWidth(this._imageInfo.currentWidth).setHeight(this._imageInfo.currentHeight);this._imageInfo.currentScaleFactor=g;this._updateHighlight();if(this._imageInfo.currentScaleFactor<=a){this._imageWrapper.setLeft(0).setTop(0);this._imageViewport.setWidth(this._imageWrapper.getWidth()).setHeight(this._imageWrapper.getHeight());this._imageInfo.allowPan=false;this._imageViewport.removeClassNames(this._cssNames.imageAllowPan);}else{var c=a*this._imageInfo.oriWidth;var b=a*this._imageInfo.oriHeight;this._imageViewport.setWidth(c).setHeight(b);var f=this._imageViewport.getWidth()/2-d*this._imageInfo.currentScaleFactor;if(f>0){f=0;}else{if(this._imageInfo.currentWidth+f<c){f=c-this._imageInfo.currentWidth;}}this._imageWrapper.setLeft(f);var h=this._imageViewport.getHeight()/2-e*this._imageInfo.currentScaleFactor;if(h>0){h=0;}else{if(this._imageInfo.currentHeight+h<b){h=b-this._imageInfo.currentHeight;}}this._imageWrapper.setTop(h);this._imageInfo.allowPan=true;this._imageViewport.addClassNames(this._cssNames.imageAllowPan);}if(this._imageInfo.showZoomFactorTooltip){var k=Math.round(this._imageInfo.currentScaleFactor*100);this._imageViewport.setTitle(k+"%");}return this;};ImageViewer.prototype._updateHighlight=function(){if(this._imageInfo.highlight&&this._imageInfo.currentScaleFactor){var a=0.25*this._imageInfo.currentScaleFactor;var b=a*16;var h=this._imageInfo.highlight.top*this._imageInfo.currentScaleFactor-0.75*b;var d=this._imageInfo.highlight.left*this._imageInfo.currentScaleFactor-0.75*b;var j=this._imageInfo.highlight.width*this._imageInfo.currentScaleFactor-0.25*b;var c=this._imageInfo.highlight.height*this._imageInfo.currentScaleFactor-0.25*b;if(h<0){var g=0-h;h=0;c-=g;}if(d<0){var g=0-d;d=0;j-=g;}var f=this._imageInfo.oriWidth*this._imageInfo.currentScaleFactor-2*Math.max(1,b)-d;var e=this._imageInfo.oriHeight*this._imageInfo.currentScaleFactor-2*Math.max(1,b)-h;this._highlightObj.setTop(h).setLeft(d).setWidth(Math.min(j,f)).setHeight(Math.min(c,e));this._highlightObj.e.style.borderWidth=a+"em";if(this._animateHighlightInfo){this._animateHighlightInternal(this._animateHighlightInfo.number,this._animateHighlightInfo.interval);this._animateHighlightInfo=null;}}else{if(this._highlightObj){this._highlightObj.setTop(0).setLeft(0).setWidth(0).setHeight(0);this._highlightObj.e.style.borderWidth="0";}}return this;};ImageViewer.prototype._initZoomAndPan=function(){var c=this;if(this._isZoomAndPanInitialized){return;}var a=this;var b=function(f){var h=window.event||f;var d;if(h.wheelDelta){d=h.wheelDelta/120;}else{if(h.detail){d=h.detail/-3;}}var g=a._imageInfo.allowPan&&a._imageInfo.pan.enabled;if(g){a._stopPan(h.screenX,h.screenY);}a._zoom(d);if(g){a._startPan(h.screenX,h.screenY);}(h.preventDefault)?h.preventDefault():h.returnValue=false;};this._docker.addEventListener("mousewheel",b);this._docker.addEventListener("DOMMouseScroll",b);this._imageViewport.addEventListener("mousedown",function(d){var f=window.event||d;a._startPan(f.screenX,f.screenY);(f.preventDefault)?f.preventDefault():f.returnValue=false;});this._imageViewport.addEventListener("mouseup",function(d){var f=window.event||d;a._stopPan(f.screenX,f.screenY);a._docker.focus();(f.preventDefault)?f.preventDefault():f.returnValue=false;});this._imageViewport.addEventListener("mouseout",function(d){var f=window.event||d;a._stopPan(null,null);a._docker.focus();(f.preventDefault)?f.preventDefault():f.returnValue=false;});this._imageViewport.addEventListener("mousemove",function(d){var f=window.event||d;a._pan(f.screenX,f.screenY);(f.preventDefault)?f.preventDefault():f.returnValue=false;});window.onkeydown=function(f){if(!c){return;}f=f||window.event;if(f.keyCode==27){var g=document.getElementsByClassName("mask-layer")[0];var e=null;if(g){e=__uiElements.get_custom_prop(g,"floatPaneObj");}if(e){var j=__uiElements.get_custom_prop(g,"floatPaneRemoveCBInfo");if(j&&j.callback){var d=__uiElements.get_custom_prop(e,"internal_content_obj");var h={floatPane:e,content:d};j.callback(h,j.callbackArgs);}e.removeFrom(document.body);}var k=__uiElements.get_custom_prop(g,"windowResizeCBInfo");if(k){__callbackCenter.unregisterCallback("window_onresize",k.regByObj,k.callbackId);}document.body.removeChild(g);document.body.style.overflow="";}};this._isZoomAndPanInitialized=true;return this;};ImageViewer.prototype._zoom=function(e){if(this._imageInfo.currentScaleFactor){var f=[0.15,0.2,0.25,0.3,0.4,0.5,0.6,0.75,0.9,1,1.1,1.25,1.5,2,2.5,3,4,5];var a=this.getAutoScaleFactor();if(a!=1&&a>0&&a<=f[f.length-1]){var b=-1;for(var h=0;h<f.length;h++){var g=f[h];var k=g*0.95;var m=g*1.05;if(g==1){k=g*0.99;m=g*1.01;}if(a>k&&a<m){b=h;break;}}if(b>=0){if(f[b]!=1){f[b]=a;}}else{f.push(a);}}var c=this.getCurrentScaleFactor();var d=false;for(var h=0;h<f.length;h++){if(!d&&f[h]==c){d=true;break;}}if(!d){f.push(c);}f.sort();var j=-1;for(var h=0;h<f.length;h++){if(f[h]==c){j=h;break;}}if(j>=0){j+=e;if(j<0){j=0;}if(j>=f.length){j=f.length-1;}}var l=a;if(j>=0&&j<f.length){l=f[j];}this.update(l);}return this;};ImageViewer.prototype._startPan=function(a,b){if(this._imageInfo.allowPan&&this._imageWrapper){this._imageInfo.pan.enabled=true;this._imageInfo.pan.startScreenX=a;this._imageInfo.pan.startScreenY=b;this._imageInfo.pan.startImageOffsetLeft=this._imageWrapper.getOffsetLeft();this._imageInfo.pan.startImageOffsetTop=this._imageWrapper.getOffsetTop();}return this;};ImageViewer.prototype._stopPan=function(a,b){this._pan(a,b);this._imageInfo.pan.enabled=false;this._imageInfo.pan.startScreenX=null;this._imageInfo.pan.startScreenY=null;this._imageInfo.pan.startImageOffsetLeft=null;this._imageInfo.pan.startImageOffsetTop=null;return this;};ImageViewer.prototype._pan=function(f,g){if(this._imageInfo.allowPan&&this._imageInfo.pan.enabled&&f!=null&&g!=null){var c=f-this._imageInfo.pan.startScreenX;var d=g-this._imageInfo.pan.startScreenY;if(this._imageWrapper){var b=this._imageViewport.getWidth();var a=this._imageViewport.getHeight();var e=this._imageInfo.pan.startImageOffsetLeft+c;if(e>0){e=0;}else{if(this._imageInfo.currentWidth+e<b){e=b-this._imageInfo.currentWidth;}}var h=this._imageInfo.pan.startImageOffsetTop+d;if(h>0){h=0;}else{if(this._imageInfo.currentHeight+h<a){h=a-this._imageInfo.currentHeight;}}this._imageWrapper.setLeft(e).setTop(h);}}return this;};ImageViewer.prototype._addEventListenerInternal=function(a,b){if(this._imageViewport){this._imageViewport.addEventListener(a,b);}return this;};function ElementResizeSettings(){this.enabled=true;this.grabOffsetLeftEdge=8;this.grabOffsetRightEdge=8;this.grabOffsetTopEdge=8;this.grabOffsetBottomEdge=8;this.minWidth=0;this.maxWidth=0;this.minHeight=0;this.maxHeight=0;this.beforeResizing=function(){};this.afterResized=function(){};}ElementResizeSettings.prototype.setGrabOffsetForEdges=function(b,c,d,a){this.grabOffsetLeftEdge=b?b:0;this.grabOffsetRightEdge=c?c:0;this.grabOffsetTopEdge=d?d:0;this.grabOffsetBottomEdge=a?a:0;};ElementResizeSettings.prototype.setResizeBound=function(d,b,c,a){this.minWidth=d?d:0;this.maxWidth=b?b:0;this.minHeight=c?c:0;this.maxHeight=a?a:0;};var __elementsResizer={_currentResizing:null,_currentActivated:{isAvailable:function(){return(this.element&&this.settings);},set:function(d){var b=d.srcElement?d.srcElement:d.target;if(this.element!=b){this.reset();this.element=b;this.settings=__uiElements.get_custom_prop(this.element,"resize_settings");}this.direction=this._getDirection(d);this.grabX=d.clientX;this.grabY=d.clientY;if(this.isAvailable()){var c=__uiElements.get_wrapper(this.element);if(c){var a=this.direction;if(!a){c.setCursor("auto");}else{c.setCursor(a+"-resize");}if(this.direction){c.addClassNames("resize-activated");}else{c.removeClassNames("resize-activated");}}}return this;},reset:function(){if(this.isAvailable()){var a=__uiElements.get_wrapper(this.element);if(a){a.setCursor("auto");a.removeClassNames("resize-activated");}}this.element=null;this.settings=null;this.direction=null;this.grabX=null;this.grabY=null;return this;},_getDirection:function(d){if(this.element&&this.settings){var a=d.offsetX;var b=d.offsetY;var c="";if(this.settings.grabOffsetTopEdge>0&&b<=this.settings.grabOffsetTopEdge){c+="n";}else{if(this.settings.grabOffsetBottomEdge>0&&b>=this.element.offsetHeight-this.settings.grabOffsetBottomEdge){c+="s";}}if(this.settings.grabOffsetLeftEdge>0&&a<=this.settings.grabOffsetLeftEdge){c+="w";}else{if(this.settings.grabOffsetRightEdge>0&&a>=this.element.offsetWidth-this.settings.grabOffsetRightEdge){c+="e";}}return c;}}},processMouseDown:function(a){var b=window.event||a;if(this._currentActivated&&this._currentActivated.isAvailable()&&this._currentActivated.direction){this._currentResizing=this._currentActivated;this._currentResizing.oriWidth=this._currentResizing.element.offsetWidth;this._currentResizing.oriHeight=this._currentResizing.element.offsetHeight;this._currentResizing.oriLeft=this._currentResizing.element.offsetLeft;this._currentResizing.oriTop=this._currentResizing.element.offsetTop;if(window.event){b.returnValue=false;}else{b.preventDefault();}b.cancelBubble=true;}},processMouseUp:function(a){if(this._currentResizing){this._currentResizing.oriWidth=null;this._currentResizing.oriHeight=null;this._currentResizing.oriLeft=null;this._currentResizing.oriTop=null;this._currentResizing=null;}},processMouseMove:function(f){var s=window.event||f;if(this._currentResizing&&this._currentResizing.isAvailable()){var d=this._currentResizing.direction;if(d){var g=this._currentResizing.element;var l=this._currentResizing.oriWidth;var h=this._currentResizing.oriHeight;var j=this._currentResizing.oriLeft;var k=this._currentResizing.oriTop;var r=this._currentResizing.settings;var m=this._currentResizing.grabX;var n=this._currentResizing.grabY;var a=s.clientX;var b=s.clientY;if(r.beforeResizing){if(r.beforeResizing instanceof CallbackInfo){r.beforeResizing.invoke();}else{if(__commonUtils.general.isFunction(r.beforeResizing)){r.beforeResizing();}}}var q=function(y,u,e){var w=y;var v=u;if(u instanceof CallbackInfo){var x={retval:null};u.invoke(x);if(x.retval){v=x.retval;}}else{if(__commonUtils.general.isFunction(u)){v=u();}}if(v&&w<v){w=v;}var t=e;if(e instanceof CallbackInfo){var x={retval:null};e.invoke(x);if(x.retval){t=x.retval;}}else{if(__commonUtils.general.isFunction(e)){t=e();}}if(t&&w>t){w=t;}return w;};if(d.indexOf("e")!=-1){g.style.width=q(l+a-m,r.minWidth,r.maxWidth)+"px";}if(d.indexOf("s")!=-1){g.style.height=q(h+b-n,r.minHeight,r.maxHeight)+"px";}if(d.indexOf("w")!=-1){var c=a-m;var p=q(l-c,r.minWidth,r.maxWidth);c=l-p;g.style.left=(j+c)+"px";g.style.width=p+"px";}if(d.indexOf("n")!=-1){var c=b-n;var o=q(h-c,r.minHeight,r.maxHeight);c=h-o;g.style.top=(k+c)+"px";g.style.height=o+"px";}if(r.afterResized){if(r.afterResized instanceof CallbackInfo){r.afterResized.invoke();}else{if(__commonUtils.general.isFunction(r.afterResized)){r.afterResized();}}}if(window.event){s.returnValue=false;}else{s.preventDefault();}s.cancelBubble=true;}}else{this._currentActivated.set(s);}}};function CallbackInfo(a){this.key=a;this.callbacks=[];}CallbackInfo.prototype.register=function(c,a,b){if(!c){c=this;}if(c&&a){this.callbacks.push({owner:c,callback:a,callbackId:b});}return this;};CallbackInfo.prototype.unregister=function(c,a){if(!c){c=this;}if(c&&a){for(var b=0;b<this.callbacks.length;b++){if(this.callbacks[b].owner===c&&this.callbacks[b].callbackId===a){this.callbacks.splice(b,1);break;}}}return this;};CallbackInfo.prototype.invoke=function(){for(var b=0;b<this.callbacks.length;b++){var a=this.callbacks[b];if(a&&a.owner&&a.callback){a.callback.apply(a.owner,arguments);}}return this;};var __callbackCenter={_callbacks:{},_getCallbackInfo:function(c,b){if(c){var a=this._callbacks[c];if(!a&&b){a=new CallbackInfo(c);this._callbacks[c]=a;}return a;}},registerCallback:function(d,e,a,b){if(d&&e&&a){var c=this._getCallbackInfo(d,true);if(c){c.register(e,a,b);}}return this;},unregisterCallback:function(c,d,a){if(c&&d&&a){var b=this._getCallbackInfo(c,false);if(b){b.unregister(d,a);}}return this;},invokeCallbacks:function(f){var b=this._getCallbackInfo(f);if(b&&b.callbacks){var a;if(arguments.length>1){a=[];}for(var d=1;d<arguments.length;d++){a.push(arguments[d]);}for(var e=0;e<b.callbacks.length;e++){var c=b.callbacks[e];if(c&&c.owner&&c.callback){if(a&&a.length>0){c.callback.apply(c.owner,a);}else{c.callback.apply(c.owner);}}}}return this;}};var __uiViewObjectsCenter={_uiViewObjects:{},_totalLazyCreatorsCount:0,_lazyCreatorsOrdered:[],_lazyCreatorCallbacksCache:{},_lazyCreationTimer:null,_noMoreCreation:false,_constThresholdNumberofNodes:5000,_immediateInvokeCallback:function(b,a){if(b&&b.invoke&&__commonUtils.general.isFunction(b.invoke)){b.invoke(a);}return this;},addLazyTask:function(c,b,a,d){},forceExecuteLazyTask:function(b){if(b){var a=this._lazyCreatorCallbacksCache[b];if(a&&!a.completed){this._immediateInvokeCallback(a.callback,a.args);a.completed=true;this._lazyCreatorCallbacksCache[b]=null;}}return this;},startLazyTasksExecution:function(){var b=this;this.stopLazyTasksExecution();__callbackCenter.invokeCallbacks("glb_viewobj_start_lazy_tasks");var a=this;this._lazyCreationTimer=setInterval(function(){if(a._noMoreCreation&&(!a._lazyCreatorsOrdered||a._lazyCreatorsOrdered.length==0)){a.stopLazyTasksExecution();b.startSearch();return;}while(a._lazyCreatorsOrdered&&a._lazyCreatorsOrdered.length>0){var c=a._lazyCreatorsOrdered.shift();if(a._lazyCreatorCallbacksCache[c.key]){a._lazyCreatorCallbacksCache[c.key]=null;}if(!c.completed){a._immediateInvokeCallback(c.callback,c.args);c.completed=true;break;}}},30);return this;},stopLazyTasksExecution:function(){if(this._lazyCreationTimer){clearInterval(this._lazyCreationTimer);this._lazyCreationTimer=null;__callbackCenter.invokeCallbacks("glb_viewobj_stop_lazy_tasks");}return this;},setNoMoreLazyTask:function(){this._noMoreCreation=true;return this;},getLazyTaskCount:function(){var a={total:this._totalLazyCreatorsCount,waiting:this._lazyCreatorsOrdered.length,};a.executed=a.total-a.waiting;return a;},addUIViewObject:function(a,b){this._uiViewObjects[a]=b;return this;},getUIViewObject:function(a){return this._uiViewObjects[a];}};