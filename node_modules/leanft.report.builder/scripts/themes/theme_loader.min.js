function ThemeInfo(c,b,a){this.name=c;this.dispName=a;this.css_names={main:b};}ThemeInfo.querystringSearchParamName=function(){return"theme";};ThemeInfo.prototype.querystring=function(){var a=ThemeInfo.querystringSearchParamName();return a+"="+this.name;};ThemeInfo.prototype.locationSearch=function(){var g=ThemeInfo.querystringSearchParamName();var a=location.search;var e="";if(!a){return"?"+g+"="+this.name;}var k=false;var j=a.match(new RegExp("[?&][^?&]+=[^?&]*","g"));if(j&&j.length>0){for(var b=0;b<j.length;b++){var f=j[b];var h=f[0];var c=f.slice(1).split("=");if(c&&c.length>0){var d=c[0];if(d==g){e+=h+d+"="+this.name;k=true;}else{e+=f;}}}}if(!k){e+="&"+g+"="+this.name;}return e;};function ThemeLoader(){this._themes={"default":new ThemeInfo("default","",__res.get("theme_light","Light")),dark:new ThemeInfo("dark","theme-dark",__res.get("theme_dark","Dark"))};this.current=this.load();}ThemeLoader.prototype.toMap=function(){return this._themes;};ThemeLoader.prototype.toList=function(){var a=[];for(var b in this._themes){a.push(this._themes[b]);}return a;};ThemeLoader.prototype.load=function(){var a=this.defaultTheme();var c="";var b=__commonUtils.querystring.getByName(ThemeInfo.querystringSearchParamName());if(b){c=b.toLowerCase();}if(c in this._themes){a=this._themes[c];}return a;};ThemeLoader.prototype.applyTheme=function(){if(!document.body){console.warn("Document body is not ready yet. Cannot apply theme!");return;}var a=new ElementWrapper(document.body);for(var b in this._themes){var c=this._themes[b].css_names.main;if(c){a.removeClassNames(c);}}a.addClassNames(this.current.css_names.main);};ThemeLoader.prototype.defaultTheme=function(){return this._themes["default"];};ThemeLoader.prototype.isDefaultTheme=function(a){return a&&a.name===this.defaultTheme().name;};ThemeLoader.prototype.switchToDefault=function(){location.search=this.defaultTheme().locationSearch();};ThemeLoader.prototype.switchTo=function(a){if(a in this._themes){location.search=this._themes[a].locationSearch();}else{this.switchToDefault();}};ThemeLoader.prototype._qsParamNameHideThemeBar="hide-theme-bar";ThemeLoader.prototype.querystringHideThemeBar=function(){return this._qsParamNameHideThemeBar;};ThemeLoader.prototype.isThemeBarVisible=function(){var a=__commonUtils.querystring.getByNameWithDef(this._qsParamNameHideThemeBar,"true");if(typeof a==="undefined"||a==null){return true;}a=a.toLowerCase().trim();if(["0","false","no"].indexOf(a)>=0){return true;}return false;};var __themes=new ThemeLoader();