(function(){var a={};a.dev=false;a.tooltip=a.tooltip||{};a.utils=a.utils||{};a.models=a.models||{};a.charts={};a.logs={};a.dom={};if(typeof(module)!=="undefined"&&typeof(exports)!=="undefined"&&typeof(d3)=="undefined"){d3=require("d3");}a.dispatch=d3.dispatch("render_start","render_end");if(!Function.prototype.bind){Function.prototype.bind=function(g){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var c=Array.prototype.slice.call(arguments,1),f=this,e=function(){},d=function(){return f.apply(this instanceof e&&g?this:g,c.concat(Array.prototype.slice.call(arguments)));};e.prototype=this.prototype;d.prototype=new e();return d;};}if(a.dev){a.dispatch.on("render_start",function(c){a.logs.startTime=+new Date();});a.dispatch.on("render_end",function(c){a.logs.endTime=+new Date();a.logs.totalTime=a.logs.endTime-a.logs.startTime;a.log("total",a.logs.totalTime);});}a.log=function(){if(a.dev&&window.console&&console.log&&console.log.apply){console.log.apply(console,arguments);}else{if(a.dev&&window.console&&typeof console.log=="function"&&Function.prototype.bind){var c=Function.prototype.bind.call(console.log,console);c.apply(console,arguments);}}return arguments[arguments.length-1];};a.deprecated=function(d,c){if(console&&console.warn){console.warn("nvd3 warning: `"+d+"` has been deprecated. ",c||"");}};a.render=function b(d){d=d||1;a.render.active=true;a.dispatch.render_start();var c=function(){var e,f;for(var g=0;g<d&&(f=a.render.queue[g]);g++){e=f.generate();if(typeof f.callback==typeof(Function)){f.callback(e);}}a.render.queue.splice(0,g);if(a.render.queue.length){setTimeout(c);}else{a.dispatch.render_end();a.render.active=false;}};setTimeout(c);};a.render.active=false;a.render.queue=[];a.addGraph=function(c){if(typeof arguments[0]===typeof(Function)){c={generate:arguments[0],callback:arguments[1]};}a.render.queue.push(c);if(!a.render.active){a.render();}};a._drawPosition=function(g,d){if(!g){return;}a.positionX=g;var e=document.getElementsByTagName("rect")[0];if(e){g=__commonUtils._chart.xScale()(g);var c=d3.select(document.getElementsByClassName("nv-interactive")[0]),f=c.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([monitorData.runResults]);a.dom.write(function(){if(d){var h=f.select(".nv-stepline");h.remove();}var h=f.select(".nv-interactiveGuideLine").selectAll("line").data((g!=null)?[a.utils.NaNtoZero(g)]:[],String);h.exit().remove();h.enter().append("line").attr("class","nv-stepline").attr("x1",function(i){return i;}).attr("x2",function(i){return i;}).attr("y1",e.height.animVal.value).attr("y2",0);});}};if(typeof(module)!=="undefined"&&typeof(exports)!=="undefined"){module.exports=a;}if(typeof(window)!=="undefined"){window.nv=a;}a.dom.write=function(c){if(window.fastdom!==undefined){return fastdom.mutate(c);}return c();};a.dom.read=function(c){if(window.fastdom!==undefined){return fastdom.measure(c);}return c();};a.interactiveGuideline=function(){var g={left:0,top:0},k=null,d=null,l=d3.scale.linear(),c=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),h=true,i=null,j=a.models.tooltip(),e=window.ActiveXObject;j.duration(0).hideDelay(0).hidden(false);function f(m){m.each(function(q){var p=d3.select(this);var o=(k||960),n=(d||400);var s=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([q]);var t=s.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");t.append("g").attr("class","nv-interactiveGuideLine");if(!i){return;}function r(){var w=d3.event.clientX-this.getBoundingClientRect().left;var x=d3.event.clientY-this.getBoundingClientRect().top;var A=true;var v=false;if(e){w=d3.event.offsetX;x=d3.event.offsetY;if(d3.event.target.tagName!=="svg"){A=false;}if(d3.event.target.className.baseVal.match("nv-legend")){v=true;}}if(A){w-=g.left;x-=g.top;}if(d3.event.type==="mouseout"||w<0||x<0||w>o||x>n||(d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined)||v){if(e){if(d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined&&(d3.event.relatedTarget.className===undefined||d3.event.relatedTarget.className.match(j.nvPointerEventsClass))){return;}}c.elementMouseout({mouseX:w,mouseY:x});j.hidden(true);return;}else{j.hidden(false);}var z=typeof l.rangeBands==="function";var y=undefined;if(z){var u=d3.bisect(l.range(),w)-1;if(l.range()[u]+l.rangeBand()>=w){y=l.domain()[d3.bisect(l.range(),w)-1];}else{c.elementMouseout({mouseX:w,mouseY:x});f.renderGuideLine(null);j.hidden(true);return;}}else{y=l.invert(w);}c.elementMousemove({mouseX:w,mouseY:x,pointXValue:y});if(d3.event.type==="dblclick"){c.elementDblclick({mouseX:w,mouseY:x,pointXValue:y});}if(d3.event.type==="click"){c.elementClick({mouseX:w,mouseY:x,pointXValue:y});}if(d3.event.type==="mousedown"){c.elementMouseDown({mouseX:w,mouseY:x,pointXValue:y});}if(d3.event.type==="mouseup"){c.elementMouseUp({mouseX:w,mouseY:x,pointXValue:y});}}i.on("touchmove",r).on("mousemove",r,true).on("mouseout",r,true).on("mousedown",r,true).on("mouseup",r,true).on("dblclick",r).on("click",r);f.guideLine=null;f.renderGuideLine=function(u){if(!h){return;}if(f.guideLine&&f.guideLine.attr("x1")===u){return;}a.dom.write(function(){var v=s.select(".nv-interactiveGuideLine").selectAll(".nv-guideline").data((u!=null)?[a.utils.NaNtoZero(u)]:[],String);v.enter().append("line").attr("class","nv-guideline").attr("x1",function(w){return w;}).attr("x2",function(w){return w;}).attr("y1",n).attr("y2",0);v.exit().remove();});};});}f.dispatch=c;f.tooltip=j;f.margin=function(m){if(!arguments.length){return g;}g.top=typeof m.top!="undefined"?m.top:g.top;g.left=typeof m.left!="undefined"?m.left:g.left;return f;};f.width=function(m){if(!arguments.length){return k;}k=m;return f;};f.height=function(m){if(!arguments.length){return d;}d=m;return f;};f.xScale=function(m){if(!arguments.length){return l;}l=m;return f;};f.showGuideLine=function(m){if(!arguments.length){return h;}h=m;return f;};f.svgContainer=function(m){if(!arguments.length){return i;}i=m;return f;};return f;};a.interactiveBisect=function(k,j,l){if(!(k instanceof Array)){return null;}var d;if(typeof l!=="function"){d=function(m){return m.x;};}else{d=l;}var c=function(m,n){return d(m)-n;};var e=d3.bisector(c).left;var g=d3.max([0,e(k,j)-1]);var f=d(k[g]);if(typeof f==="undefined"){f=g;}if(f===j){return g;}var h=d3.min([g+1,k.length-1]);var i=d(k[h]);if(typeof i==="undefined"){i=h;}if(Math.abs(i-j)>=Math.abs(f-j)){return g;}else{return h;}};a.nearestValueIndex=function(f,d,e){var g=Infinity,c=null;f.forEach(function(h,k){var j=Math.abs(d-h);if(h!=null&&j<=g&&j<e){g=j;c=k;}});return c;};a.models.tooltip=function(){var p="nvtooltip-"+Math.floor(Math.random()*100000),f=null,k="w",h=25,x=0,d=null,n=true,o=200,y=null,s={left:null,top:null},j=true,i=100,l=true,t="nv-pointer-events-none";var z=function(A,B,C){return A;};var m=function(A){return A;};var r=function(A,B){return A;};var e=function(A,B){if(A===null){return"";}var D=d3.select(document.createElement("table"));if(l){var F=D.selectAll("thead").data([A]).enter().append("thead");F.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",true).html(function(H){return r(__res.get("xAxisLSM","Time (s)")+": "+H.value);});}var E=D.selectAll("tbody").data([A]).enter().append("tbody");var G=E.selectAll("tr").data(function(H){return H.series;}).enter().append("tr").classed("highlight",function(H){return H.highlight;});G.append("td").classed("legend-color-guide",true).append("div").style("background-color",function(H){return H.color;});G.append("td").classed("key",true).classed("total",function(H){return !!H.total;}).html(function(I,H){return r(I.key.substr(0,I.key.lastIndexOf("*")),H);});G.append("td").classed("value",true).html(function(I,H){return z(I.value/I.ratio,H,I);});G.filter(function(I,H){return I.percent!==undefined;}).append("td").classed("percent",true).html(function(I,H){return"("+d3.format("%")(I.percent)+")";});G.selectAll("td").each(function(J){if(J.highlight){var I=d3.scale.linear().domain([0,1]).range(["#fff",J.color]);var H=0.6;d3.select(this).style("border-bottom-color",I(H)).style("border-top-color",I(H));}});var C=D.node().outerHTML;if(A.footer!==undefined){C+="<div class='footer'>"+A.footer+"</div>";}return C;};var v=function(){var B={left:d3.event!==null?d3.event.clientX:0,top:d3.event!==null?d3.event.clientY:0};if(getComputedStyle(document.body).transform!="none"){var A=document.body.getBoundingClientRect();B.left-=A.left;B.top-=A.top;}return B;};var g=function(A){if(A&&A.series){if(a.utils.isArray(A.series)){return true;}if(a.utils.isObject(A.series)){A.series=[A.series];return true;}}return false;};var c=function(E){var C=y.node().offsetHeight,H=y.node().offsetWidth,B=document.documentElement.clientWidth,A=document.documentElement.clientHeight,D,G,F;switch(k){case"e":D=-H-h;G=-(C/2);if(E.left+D<0){D=h;}if((F=E.top+G)<0){G-=F;}if((F=E.top+G+C)>A){G-=F-A;}break;case"w":D=h;G=-(C/2);if(E.left+D+H>B){D=-H-h;}if((F=E.top+G)<0){G-=F;}if((F=E.top+G+C)>A){G-=F-A;}break;case"n":D=-(H/2)-5;G=h;if(E.top+G+C>A){G=-C-h;}if((F=E.left+D)<0){D-=F;}if((F=E.left+D+H)>B){D-=F-B;}break;case"s":D=-(H/2);G=-C-h;if(E.top+G<0){G=h;}if((F=E.left+D)<0){D-=F;}if((F=E.left+D+H)>B){D-=F-B;}break;case"center":D=-(H/2);G=-(C/2);break;default:D=0;G=0;break;}return{left:D,top:G};};var w=function(){a.dom.read(function(){var F=v(),A=c(F),C=F.left+A.left,G=F.top+A.top;if(n){y.interrupt().transition().delay(o).duration(0).style("opacity",0);}else{var E="translate("+s.left+"px, "+s.top+"px)";var D="translate("+Math.round(C)+"px, "+Math.round(G)+"px)";var H=d3.interpolateString(E,D);var B=y.style("opacity")<0.1;y.interrupt().transition().duration(B?0:i).styleTween("transform",function(I){return H;},"important").styleTween("-webkit-transform",function(I){return H;}).style("-ms-transform",D).style("opacity",1);}s.left=C;s.top=G;});};function q(){if(!y||!y.node()){var A=[1];y=d3.select(document.body).selectAll("#"+p).data(A);y.enter().append("div").attr("class","nvtooltip "+(d?d:"xy-tooltip")).attr("id",p).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(t,true).classed(t,true);y.exit().remove();}}function u(){if(!j){return;}if(!g(f)||__commonUtils.allLengendDisabled){return;}a.dom.write(function(){q();var A=e(f,y.node());if(A){y.node().innerHTML=A;}w();});return u;}u.nvPointerEventsClass=t;u.options=a.utils.optionsFunc.bind(u);u._options=Object.create({},{duration:{get:function(){return i;},set:function(A){i=A;}},gravity:{get:function(){return k;},set:function(A){k=A;}},distance:{get:function(){return h;},set:function(A){h=A;}},snapDistance:{get:function(){return x;},set:function(A){x=A;}},classes:{get:function(){return d;},set:function(A){d=A;}},enabled:{get:function(){return j;},set:function(A){j=A;}},hideDelay:{get:function(){return o;},set:function(A){o=A;}},contentGenerator:{get:function(){return e;},set:function(A){e=A;}},valueFormatter:{get:function(){return z;},set:function(A){z=A;}},headerFormatter:{get:function(){return m;},set:function(A){m=A;}},keyFormatter:{get:function(){return r;},set:function(A){r=A;}},headerEnabled:{get:function(){return l;},set:function(A){l=A;}},position:{get:function(){return v;},set:function(A){v=A;}},chartContainer:{get:function(){return document.body;},set:function(A){a.deprecated("chartContainer","feature removed after 1.8.3");}},fixedTop:{get:function(){return null;},set:function(A){a.deprecated("fixedTop","feature removed after 1.8.1");}},offset:{get:function(){return{left:0,top:0};},set:function(A){a.deprecated("offset","use chart.tooltip.distance() instead");}},hidden:{get:function(){return n;},set:function(A){if(n!=A){n=!!A;u();}}},data:{get:function(){return f;},set:function(A){if(A.point){A.value=A.point.x;A.series=A.series||{};A.series.value=A.point.y;A.series.color=A.point.color||A.series.color;}f=A;}},node:{get:function(){return y.node();},set:function(A){}},id:{get:function(){return p;},set:function(A){}}});a.utils.initOptions(u);return u;};a.utils.windowSize=function(){var c={width:640,height:480};if(window.innerWidth&&window.innerHeight){c.width=window.innerWidth;c.height=window.innerHeight;return(c);}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){c.width=document.documentElement.offsetWidth;c.height=document.documentElement.offsetHeight;return(c);}if(document.body&&document.body.offsetWidth){c.width=document.body.offsetWidth;c.height=document.body.offsetHeight;return(c);}return(c);};a.utils.isArray=Array.isArray;a.utils.isObject=function(c){return c!==null&&typeof c==="object";};a.utils.isFunction=function(c){return typeof c==="function";};a.utils.isDate=function(c){return toString.call(c)==="[object Date]";};a.utils.isNumber=function(c){return !isNaN(c)&&typeof c==="number";};a.utils.windowResize=function(c){if(window.addEventListener){window.addEventListener("resize",c);}else{a.log("ERROR: Failed to bind to window.resize with: ",c);}return{callback:c,clear:function(){window.removeEventListener("resize",c);}};};a.utils.getColor=function(c){if(c===undefined){return a.utils.defaultColor();}else{if(a.utils.isArray(c)){var d=d3.scale.ordinal().range(c);return function(e,f){var g=f===undefined?e:f;return e.color||d(g);};}else{return c;}}};a.utils.defaultColor=function(){return a.utils.getColor(d3.scale.category20().range());};a.utils.customTheme=function(e,f,c){f=f||function(g){return g.key;};c=c||d3.scale.category20().range();var d=c.length;return function(i,g){var h=f(i);if(a.utils.isFunction(e[h])){return e[h]();}else{if(e[h]!==undefined){return e[h];}else{if(!d){d=c.length;}d=d-1;return c[d];}}};};a.utils.pjax=function(d,c){var e=function(f){d3.html(f,function(g){var h=d3.select(c).node();h.parentNode.replaceChild(d3.select(g).select(c).node(),h);a.utils.pjax(d,c);});};d3.selectAll(d).on("click",function(){history.pushState(this.href,this.textContent,this.href);e(this.href);d3.event.preventDefault();});d3.select(window).on("popstate",function(){if(d3.event.state){e(d3.event.state);}});};a.utils.calcApproxTextWidth=function(d){if(a.utils.isFunction(d.style)&&a.utils.isFunction(d.text)){var c=parseInt(d.style("font-size").replace("px",""),10);var e=d.text().length;return a.utils.NaNtoZero(e*c*0.5);}return 0;};a.utils.NaNtoZero=function(c){if(!a.utils.isNumber(c)||isNaN(c)||c===null||c===Infinity||c===-Infinity){return 0;}return c;};d3.selection.prototype.watchTransition=function(d){var c=[this].concat([].slice.call(arguments,1));return d.transition.apply(d,c);};a.utils.renderWatch=function(d,e){if(!(this instanceof a.utils.renderWatch)){return new a.utils.renderWatch(d,e);}var c=e!==undefined?e:250;var f=[];var g=this;this.models=function(h){h=[].slice.call(arguments,0);h.forEach(function(i){i.__rendered=false;(function(j){j.dispatch.on("renderEnd",function(k){j.__rendered=true;g.renderEnd("model");});})(i);if(f.indexOf(i)<0){f.push(i);}});return this;};this.reset=function(h){if(h!==undefined){c=h;}f=[];};this.transition=function(k,h,i){h=arguments.length>1?[].slice.call(arguments,1):[];if(h.length>1){i=h.pop();}else{i=c!==undefined?c:250;}k.__rendered=false;if(f.indexOf(k)<0){f.push(k);}if(i===0){k.__rendered=true;k.delay=function(){return this;};k.duration=function(){return this;};return k;}else{if(k.length===0){k.__rendered=true;}else{if(k.every(function(l){return !l.length;})){k.__rendered=true;}else{k.__rendered=false;}}var j=0;return k.transition().duration(i).each(function(){++j;}).each("end",function(l,m){if(--j===0){k.__rendered=true;g.renderEnd.apply(this,h);}});}};this.renderEnd=function(){if(f.every(function(h){return h.__rendered;})){f.forEach(function(h){h.__rendered=false;});d.renderEnd.apply(this,arguments);}};};a.utils.deepExtend=function(c){var d=arguments.length>1?[].slice.call(arguments,1):[];d.forEach(function(h){for(var g in h){var e=a.utils.isArray(c[g]);var f=a.utils.isObject(c[g]);var i=a.utils.isObject(h[g]);if(f&&!e&&i){a.utils.deepExtend(c[g],h[g]);}else{c[g]=h[g];}}});};a.utils.state=function(){if(!(this instanceof a.utils.state)){return new a.utils.state();}var i={};var d=this;var f=function(){};var c=function(){return{};};var h=null;var g=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(j){f(j,true);});this.getter=function(j){c=j;return this;};this.setter=function(k,j){if(!j){j=function(){};}f=function(l,m){k(l);if(m){j();}};return this;};this.init=function(j){h=h||{};a.utils.deepExtend(h,j);};var e=function(){var k=c();if(JSON.stringify(k)===JSON.stringify(i)){return false;}for(var j in k){if(i[j]===undefined){i[j]={};}i[j]=k[j];g=true;}return true;};this.update=function(){if(h){f(h,false);h=null;}if(e.call(this)){this.dispatch.change(i);}};};a.utils.optionsFunc=function(c){if(c){d3.map(c).forEach((function(d,e){if(a.utils.isFunction(this[d])){this[d](e);}}).bind(this));}return this;};a.utils.calcTicksX=function(e,c){var f=1;var d=0;for(d;d<c.length;d+=1){var g=c[d]&&c[d].values?c[d].values.length:0;f=g>f?g:f;}a.log("Requested number of ticks: ",e);a.log("Calculated max values to be: ",f);e=e>f?e=f-1:e;e=e<1?1:e;e=Math.floor(e);a.log("Calculating tick count as: ",e);return e;};a.utils.calcTicksY=function(d,c){return a.utils.calcTicksX(d,c);};a.utils.initOption=function(c,d){if(c._calls&&c._calls[d]){c[d]=c._calls[d];}else{c[d]=function(e){if(!arguments.length){return c._options[d];}c._overrides[d]=true;c._options[d]=e;return c;};c["_"+d]=function(e){if(!arguments.length){return c._options[d];}if(!c._overrides[d]){c._options[d]=e;}return c;};}};a.utils.initOptions=function(d){d._overrides=d._overrides||{};var f=Object.getOwnPropertyNames(d._options||{});var c=Object.getOwnPropertyNames(d._calls||{});f=f.concat(c);for(var e in f){a.utils.initOption(d,f[e]);}};a.utils.inheritOptionsD3=function(e,c,d){e._d3options=d.concat(e._d3options||[]);e._d3options=(e._d3options||[]).filter(function(h,g,f){return f.indexOf(h)===g;});d.unshift(c);d.unshift(e);d3.rebind.apply(this,d);};a.utils.arrayUnique=function(c){return c.sort().filter(function(d,e){return !e||d!=c[e-1];});};a.utils.symbolMap=d3.map();a.utils.symbol=function(){var e,c=64;function d(f,g){var j=e.call(this,f,g);var h=c.call(this,f,g);if(d3.svg.symbolTypes.indexOf(j)!==-1){return d3.svg.symbol().type(j).size(h)();}else{return a.utils.symbolMap.get(j)(h);}}d.type=function(f){if(!arguments.length){return e;}e=d3.functor(f);return d;};d.size=function(f){if(!arguments.length){return c;}c=d3.functor(f);return d;};return d;};a.utils.inheritOptions=function(i,h){var g=Object.getOwnPropertyNames(h._options||{});var d=Object.getOwnPropertyNames(h._calls||{});var f=h._inherited||[];var e=h._d3options||[];var c=g.concat(d).concat(f).concat(e);c.unshift(h);c.unshift(i);d3.rebind.apply(this,c);i._inherited=a.utils.arrayUnique(g.concat(d).concat(f).concat(g).concat(i._inherited||[]));i._d3options=a.utils.arrayUnique(e.concat(i._d3options||[]));};a.utils.initSVG=function(c){c.classed({"nvd3-svg":true});};a.utils.sanitizeHeight=function(d,c){return(d||parseInt(c.style("height"),10)||400);};a.utils.sanitizeWidth=function(d,c){return(d||parseInt(c.style("width"),10)||960);};a.utils.availableHeight=function(d,c,e){return Math.max(0,a.utils.sanitizeHeight(d,c)-e.top-e.bottom);};a.utils.availableWidth=function(e,c,d){return Math.max(0,a.utils.sanitizeWidth(e,c)-d.left-d.right);};a.utils.noData=function(c,d){var j=c.options(),g=j.margin(),h=j.noData(),e=(h==null)?["No Data Available."]:[h],f=a.utils.availableHeight(null,d,g),k=a.utils.availableWidth(null,d,g),l=g.left+k/2,m=g.top+f/2;d.selectAll("g").remove();var i=d.selectAll(".nv-noData").data(e);i.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");i.attr("x",l).attr("y",m).text(function(n){return n;});};a.utils.wrapTicks=function(c,d){c.each(function(){var i=d3.select(this),l=i.text().split(/\s+/).reverse(),k,f=[],h=0,g=1.1,m=i.attr("y"),e=parseFloat(i.attr("dy")),j=i.text(null).append("tspan").attr("x",0).attr("y",m).attr("dy",e+"em");while(k=l.pop()){f.push(k);j.text(f.join(" "));if(j.node().getComputedTextLength()>d){f.pop();j.text(f.join(" "));f=[k];j=i.append("tspan").attr("x",0).attr("y",m).attr("dy",++h*g+e+"em").text(k);}}});};a.utils.arrayEquals=function(c,d){if(c===d){return true;}if(!c||!d){return false;}if(c.length!=d.length){return false;}for(var e=0,f=c.length;e<f;e++){if(c[e] instanceof Array&&d[e] instanceof Array){if(!a.arrayEquals(c[e],d[e])){return false;}}else{if(c[e]!=d[e]){return false;}}}return true;};a.utils.pointIsInArc=function(f,g,d){var h=d.innerRadius()(g),i=d.outerRadius()(g),j=d.startAngle()(g),k=d.endAngle()(g);var e=f.x*f.x+f.y*f.y,c=Math.atan2(f.x,-f.y);c=(c<0)?(c+Math.PI*2):c;return(h*h<=e)&&(e<=i*i)&&(j<=c)&&(c<=k);};a.models.axis=function(){var c=d3.svg.axis();var p=d3.scale.linear();var l={top:0,right:0,bottom:0,left:0},v=75,j=60,e=null,r=true,n=0,o=true,s=false,k=false,u=null,d=0,i=undefined,h=250,g=d3.dispatch("renderEnd"),t;c.scale(p).orient("bottom").tickFormat(function(w){return w;});var q;var m=a.utils.renderWatch(g,h);function f(w){m.reset();w.each(function(A){var z=d3.select(this);a.utils.initSVG(z);var K=z.selectAll("g.nv-wrap.nv-axis").data([A]);var L=K.enter().append("g").attr("class","nvd3 nv-wrap nv-axis");var D=L.append("g");var C=K.select("g");if(u!==null){c.ticks(u);}else{if(c.orient()=="top"||c.orient()=="bottom"){c.ticks(Math.abs(p.range()[1]-p.range()[0])/100);}}C.watchTransition(m,"axis").call(c);q=q||c.scale();var B=c.tickFormat();if(B==null){B=q.tickFormat();}var x=C.selectAll("text.nv-axislabel").data([e||null]);x.exit().remove();if(i!==undefined){C.selectAll("g").select("text").style("font-size",i);}var M;var y;var J;switch(c.orient()){case"top":x.enter().append("text").attr("class","nv-axislabel");J=0;if(p.range().length===1){J=k?p.range()[0]*2+p.rangeBand():0;}else{if(p.range().length===2){J=k?p.range()[0]+p.range()[1]+p.rangeBand():p.range()[1];}else{if(p.range().length>2){J=p.range()[p.range().length-1]+(p.range()[1]-p.range()[0]);}}}x.attr("text-anchor","middle").attr("y",0).attr("x",J/2);if(r){y=K.selectAll("g.nv-axisMaxMin").data(p.domain());y.enter().append("g").attr("class",function(O,P){return["nv-axisMaxMin","nv-axisMaxMin-x",(P==0?"nv-axisMin-x":"nv-axisMax-x")].join(" ");}).append("text");y.exit().remove();y.attr("transform",function(O,P){return"translate("+a.utils.NaNtoZero(p(O))+",0)";}).select("text").attr("dy","-0.5em").attr("y",-c.tickPadding()).attr("text-anchor","middle").text(function(O,Q){var P=t||B;var R=P(O);return(""+R).match("NaN")?"":R;});y.watchTransition(m,"min-max top").attr("transform",function(O,P){return"translate("+a.utils.NaNtoZero(p.range()[P])+",0)";});}break;case"bottom":M=d+36;var F=30;var I=0;var N=C.selectAll("g").select("text");var G="";if(n%360){N.attr("transform","");N.each(function(P,Q){var O=this.getBoundingClientRect();var R=O.width;I=O.height;if(R>F){F=R;}});G="rotate("+n+" 0,"+(I/2+c.tickPadding())+")";var H=Math.abs(Math.sin(n*Math.PI/180));M=(H?H*F:F)+30;N.attr("transform",G).style("text-anchor",n%360>0?"start":"end");}else{N.attr("transform","translate(0,0)");}x.enter().append("text").attr("class","nv-axislabel");J=0;if(p.range().length===1){J=k?p.range()[0]*2+p.rangeBand():0;}else{if(p.range().length===2){J=k?p.range()[0]+p.range()[1]+p.rangeBand():p.range()[1];}else{if(p.range().length>2){J=p.range()[p.range().length-1]+(p.range()[1]-p.range()[0]);}}}x.attr("text-anchor","middle").attr("y",M).attr("x",J/2);if(r){y=K.selectAll("g.nv-axisMaxMin").data([p.domain()[0],p.domain()[p.domain().length-1]]);y.enter().append("g").attr("class",function(O,P){return["nv-axisMaxMin","nv-axisMaxMin-x",(P==0?"nv-axisMin-x":"nv-axisMax-x")].join(" ");}).append("text");y.exit().remove();y.attr("transform",function(O,P){return"translate("+a.utils.NaNtoZero((p(O)+(k?p.rangeBand()/2:0)))+",0)";}).select("text").attr("dy",".71em").attr("y",c.tickPadding()).attr("transform",G).style("text-anchor",n?(n%360>0?"start":"end"):"middle").text(function(O,Q){var P=t||B;var R=P(O);return(""+R).match("NaN")?"":R;});y.watchTransition(m,"min-max bottom").attr("transform",function(O,P){return"translate("+a.utils.NaNtoZero((p(O)+(k?p.rangeBand()/2:0)))+",0)";});}break;case"right":x.enter().append("text").attr("class","nv-axislabel");x.style("text-anchor",o?"middle":"begin").attr("transform",o?"rotate(90)":"").attr("y",o?(-Math.max(l.right,v)+12-(d||0)):-10).attr("x",o?(d3.max(p.range())/2):c.tickPadding());if(r){y=K.selectAll("g.nv-axisMaxMin").data(p.domain());y.enter().append("g").attr("class",function(O,P){return["nv-axisMaxMin","nv-axisMaxMin-y",(P==0?"nv-axisMin-y":"nv-axisMax-y")].join(" ");}).append("text").style("opacity",0);y.exit().remove();y.attr("transform",function(O,P){return"translate(0,"+a.utils.NaNtoZero(p(O))+")";}).select("text").attr("dy",".32em").attr("y",0).attr("x",c.tickPadding()).style("text-anchor","start").text(function(O,Q){var P=t||B;var R=P(O);return(""+R).match("NaN")?"":R;});y.watchTransition(m,"min-max right").attr("transform",function(O,P){return"translate(0,"+a.utils.NaNtoZero(p.range()[P])+")";}).select("text").style("opacity",1);}break;case"left":x.enter().append("text").attr("class","nv-axislabel");x.style("text-anchor",o?"middle":"end").attr("transform",o?"rotate(-90)":"").attr("y",o?(-Math.max(l.left,v)+25-(d||0)):-10).attr("x",o?(-d3.max(p.range())/2):-c.tickPadding());if(r){y=K.selectAll("g.nv-axisMaxMin").data(p.domain());y.enter().append("g").attr("class",function(O,P){return["nv-axisMaxMin","nv-axisMaxMin-y",(P==0?"nv-axisMin-y":"nv-axisMax-y")].join(" ");}).append("text").style("opacity",0);y.exit().remove();y.attr("transform",function(O,P){return"translate(0,"+a.utils.NaNtoZero(q(O))+")";}).select("text").attr("dy",".32em").attr("y",0).attr("x",-c.tickPadding()).attr("text-anchor","end").text(function(O,Q){var P=t||B;var R=P(O);return(""+R).match("NaN")?"":R;});y.watchTransition(m,"min-max right").attr("transform",function(O,P){return"translate(0,"+a.utils.NaNtoZero(p.range()[P])+")";}).select("text").style("opacity",1);}break;}x.text(function(O){return O;});if(r&&(c.orient()==="left"||c.orient()==="right")){C.selectAll("g").each(function(O,P){d3.select(this).select("text").attr("opacity",1);if(p(O)<p.range()[1]+10||p(O)>p.range()[0]-10){if(O>1e-10||O<-1e-10){d3.select(this).attr("opacity",0);}d3.select(this).select("text").attr("opacity",0);}});if(p.domain()[0]==p.domain()[1]&&p.domain()[0]==0){K.selectAll("g.nv-axisMaxMin").style("opacity",function(O,P){return !P?1:0;});}}if(r&&(c.orient()==="top"||c.orient()==="bottom")){var E=[];K.selectAll("g.nv-axisMaxMin").each(function(O,Q){try{if(Q){E.push(p(O)-this.getBoundingClientRect().width-4);}else{E.push(p(O)+this.getBoundingClientRect().width+4);}}catch(P){if(Q){E.push(p(O)-4);}else{E.push(p(O)+4);}}});C.selectAll("g").each(function(O,P){if(p(O)<E[0]||p(O)>E[1]){if(O>1e-10||O<-1e-10){d3.select(this).remove();}else{d3.select(this).select("text").remove();}}});}C.selectAll(".tick").filter(function(O){return !parseFloat(Math.round(O*100000)/1000000)&&(O!==undefined);}).classed("zero",true);q=p.copy();});m.renderEnd("axis immediate");return f;}f.axis=c;f.dispatch=g;f.options=a.utils.optionsFunc.bind(f);f._options=Object.create({},{axisLabelDistance:{get:function(){return d;},set:function(w){d=w;}},staggerLabels:{get:function(){return s;},set:function(w){s=w;}},rotateLabels:{get:function(){return n;},set:function(w){n=w;}},rotateYLabel:{get:function(){return o;},set:function(w){o=w;}},showMaxMin:{get:function(){return r;},set:function(w){r=w;}},axisLabel:{get:function(){return e;},set:function(w){e=w;}},height:{get:function(){return j;},set:function(w){j=w;}},ticks:{get:function(){return u;},set:function(w){u=w;}},width:{get:function(){return v;},set:function(w){v=w;}},fontSize:{get:function(){return i;},set:function(w){i=w;}},tickFormatMaxMin:{get:function(){return t;},set:function(w){t=w;}},margin:{get:function(){return l;},set:function(w){l.top=w.top!==undefined?w.top:l.top;l.right=w.right!==undefined?w.right:l.right;l.bottom=w.bottom!==undefined?w.bottom:l.bottom;l.left=w.left!==undefined?w.left:l.left;}},duration:{get:function(){return h;},set:function(w){h=w;m.reset(h);}},scale:{get:function(){return p;},set:function(w){p=w;c.scale(p);k=typeof p.rangeBands==="function";a.utils.inheritOptionsD3(f,p,["domain","range","rangeBand","rangeBands"]);}}});a.utils.initOptions(f);a.utils.inheritOptionsD3(f,c,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]);a.utils.inheritOptionsD3(f,p,["domain","range","rangeBand","rangeBands"]);return f;};a.models.boxPlot=function(){var u={top:0,right:0,bottom:0,left:0},x=960,s=500,t=Math.floor(Math.random()*10000),A=d3.scale.ordinal(),E=d3.scale.linear(),r=function(G){return G.label;},m=function(G){return G.values.Q1;},n=function(G){return G.values.Q2;},o=function(G){return G.values.Q3;},q=function(G){return G.values.whisker_low;},p=function(G){return G.values.whisker_high;},h=function(G){return G.color;},j=function(G){return G.values.outliers;},l=function(G,H,I){return G;},k=function(G,H,I){return G;},i=function(G,H,I){return undefined;},d=a.utils.defaultColor(),e=null,y,z,C,D,f=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),g=250,v=null;var B,F;var w=a.utils.renderWatch(f,g);function c(G){w.reset();G.each(function(O){var I=x-u.left-u.right,H=s-u.top-u.bottom;e=d3.select(this);a.utils.initSVG(e);A.domain(y||O.map(function(W,X){return r(W,X);})).rangeBands(z||[0,I],0.1);var T=[];if(!C){var Q=[],V,U;O.forEach(function(W,X){var Z=m(W),aa=o(W),ac=q(W),ab=p(W);var Y=j(W);if(Y){Y.forEach(function(ad,ae){Q.push(l(ad,ae,undefined));});}if(ac){Q.push(ac);}if(Z){Q.push(Z);}if(aa){Q.push(aa);}if(ab){Q.push(ab);}});V=d3.min(Q);U=d3.max(Q);T=[V,U];}E.domain(C||T);E.range(D||[H,0]);B=B||A;F=F||E.copy().range([E(0),E(0)]);var R=e.selectAll("g.nv-wrap").data([O]);var S=R.enter().append("g").attr("class","nvd3 nv-wrap");R.attr("transform","translate("+u.left+","+u.top+")");var N=R.selectAll(".nv-boxplot").data(function(W){return W;});var M=N.enter().append("g").style("stroke-opacity",1e-06).style("fill-opacity",1e-06);N.attr("class","nv-boxplot").attr("transform",function(W,X,Y){return"translate("+(A(r(W,X))+A.rangeBand()*0.05)+", 0)";}).classed("hover",function(W){return W.hover;});N.watchTransition(w,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",0.75).delay(function(W,X){return X*g/O.length;}).attr("transform",function(W,X){return"translate("+(A(r(W,X))+A.rangeBand()*0.05)+", 0)";});N.exit().remove();M.each(function(X,Y){var W=d3.select(this);[q,p].forEach(function(Z){if(Z(X)!==undefined&&Z(X)!==null){var aa=(Z===q)?"low":"high";W.append("line").style("stroke",h(X)||d(X,Y)).attr("class","nv-boxplot-whisker nv-boxplot-"+aa);W.append("line").style("stroke",h(X)||d(X,Y)).attr("class","nv-boxplot-tick nv-boxplot-"+aa);}});});var L=function(){return(v===null?A.rangeBand()*0.9:Math.min(75,A.rangeBand()*0.9));};var J=function(){return A.rangeBand()*0.45-L()/2;};var K=function(){return A.rangeBand()*0.45+L()/2;};[q,p].forEach(function(X){var Y=(X===q)?"low":"high";var W=(X===q)?m:o;N.select("line.nv-boxplot-whisker.nv-boxplot-"+Y).watchTransition(w,"nv-boxplot: boxplots").attr("x1",A.rangeBand()*0.45).attr("y1",function(Z,aa){return E(X(Z));}).attr("x2",A.rangeBand()*0.45).attr("y2",function(Z,aa){return E(W(Z));});N.select("line.nv-boxplot-tick.nv-boxplot-"+Y).watchTransition(w,"nv-boxplot: boxplots").attr("x1",J).attr("y1",function(Z,aa){return E(X(Z));}).attr("x2",K).attr("y2",function(Z,aa){return E(X(Z));});});[q,p].forEach(function(W){var X=(W===q)?"low":"high";M.selectAll(".nv-boxplot-"+X).on("mouseover",function(Y,Z,aa){d3.select(this).classed("hover",true);f.elementMouseover({series:{key:W(Y),color:h(Y)||d(Y,aa)},e:d3.event});}).on("mouseout",function(Y,Z,aa){d3.select(this).classed("hover",false);f.elementMouseout({series:{key:W(Y),color:h(Y)||d(Y,aa)},e:d3.event});}).on("mousemove",function(Y,Z){f.elementMousemove({e:d3.event});});});M.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(W,X){d3.select(this).classed("hover",true);f.elementMouseover({key:r(W),value:r(W),series:[{key:"Q3",value:o(W),color:h(W)||d(W,X)},{key:"Q2",value:n(W),color:h(W)||d(W,X)},{key:"Q1",value:m(W),color:h(W)||d(W,X)}],data:W,index:X,e:d3.event});}).on("mouseout",function(W,X){d3.select(this).classed("hover",false);f.elementMouseout({key:r(W),value:r(W),series:[{key:"Q3",value:o(W),color:h(W)||d(W,X)},{key:"Q2",value:n(W),color:h(W)||d(W,X)},{key:"Q1",value:m(W),color:h(W)||d(W,X)}],data:W,index:X,e:d3.event});}).on("mousemove",function(W,X){f.elementMousemove({e:d3.event});});N.select("rect.nv-boxplot-box").watchTransition(w,"nv-boxplot: boxes").attr("y",function(W,X){return E(o(W));}).attr("width",L).attr("x",J).attr("height",function(W,X){return Math.abs(E(o(W))-E(m(W)))||1;}).style("fill",function(W,X){return h(W)||d(W,X);}).style("stroke",function(W,X){return h(W)||d(W,X);});M.append("line").attr("class","nv-boxplot-median");N.select("line.nv-boxplot-median").watchTransition(w,"nv-boxplot: boxplots line").attr("x1",J).attr("y1",function(W,X){return E(n(W));}).attr("x2",K).attr("y2",function(W,X){return E(n(W));});var P=N.selectAll(".nv-boxplot-outlier").data(function(W){return j(W)||[];});P.enter().append("circle").style("fill",function(W,X,Y){return i(W,X,Y)||d(W,Y);}).style("stroke",function(W,X,Y){return i(W,X,Y)||d(W,Y);}).style("z-index",9000).on("mouseover",function(W,X,Y){d3.select(this).classed("hover",true);f.elementMouseover({series:{key:k(W,X,Y),color:i(W,X,Y)||d(W,Y)},e:d3.event});}).on("mouseout",function(W,X,Y){d3.select(this).classed("hover",false);f.elementMouseout({series:{key:k(W,X,Y),color:i(W,X,Y)||d(W,Y)},e:d3.event});}).on("mousemove",function(W,X){f.elementMousemove({e:d3.event});});P.attr("class","nv-boxplot-outlier");P.watchTransition(w,"nv-boxplot: nv-boxplot-outlier").attr("cx",A.rangeBand()*0.45).attr("cy",function(W,X,Y){return E(l(W,X,Y));}).attr("r","3");P.exit().remove();B=A.copy();F=E.copy();});w.renderEnd("nv-boxplot immediate");return c;}c.dispatch=f;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return x;},set:function(G){x=G;}},height:{get:function(){return s;},set:function(G){s=G;}},maxBoxWidth:{get:function(){return v;},set:function(G){v=G;}},x:{get:function(){return r;},set:function(G){r=G;}},q1:{get:function(){return m;},set:function(G){m=G;}},q2:{get:function(){return n;},set:function(G){n=G;}},q3:{get:function(){return o;},set:function(G){o=G;}},wl:{get:function(){return q;},set:function(G){q=G;}},wh:{get:function(){return p;},set:function(G){p=G;}},itemColor:{get:function(){return h;},set:function(G){h=G;}},outliers:{get:function(){return j;},set:function(G){j=G;}},outlierValue:{get:function(){return l;},set:function(G){l=G;}},outlierLabel:{get:function(){return k;},set:function(G){k=G;}},outlierColor:{get:function(){return i;},set:function(G){i=G;}},xScale:{get:function(){return A;},set:function(G){A=G;}},yScale:{get:function(){return E;},set:function(G){E=G;}},xDomain:{get:function(){return y;},set:function(G){y=G;}},yDomain:{get:function(){return C;},set:function(G){C=G;}},xRange:{get:function(){return z;},set:function(G){z=G;}},yRange:{get:function(){return D;},set:function(G){D=G;}},id:{get:function(){return t;},set:function(G){t=G;}},y:{get:function(){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.");return{};},set:function(G){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.");}},margin:{get:function(){return u;},set:function(G){u.top=G.top!==undefined?G.top:u.top;u.right=G.right!==undefined?G.right:u.right;u.bottom=G.bottom!==undefined?G.bottom:u.bottom;u.left=G.left!==undefined?G.left:u.left;}},color:{get:function(){return d;},set:function(G){d=a.utils.getColor(G);}},duration:{get:function(){return g;},set:function(G){g=G;w.reset(g);}}});a.utils.initOptions(c);return c;};a.models.boxPlotChart=function(){var c=a.models.boxPlot(),s=a.models.axis(),u=a.models.axis();var i={top:15,right:10,bottom:50,left:60},q=null,h=null,e=a.utils.getColor(),m=true,n=true,l=false,o=false,p=a.models.tooltip(),r,t,j="No Data Available.",f=d3.dispatch("beforeUpdate","renderEnd"),g=250;s.orient("bottom").showMaxMin(false).tickFormat(function(v){return v;});u.orient((l)?"right":"left").tickFormat(d3.format(",.1f"));p.duration(0);var k=a.utils.renderWatch(f,g);function d(v){k.reset();k.models(c);if(m){k.models(s);}if(n){k.models(u);}v.each(function(A){var z=d3.select(this),F=this;a.utils.initSVG(z);var x=(q||parseInt(z.style("width"))||960)-i.left-i.right;var w=(h||parseInt(z.style("height"))||400)-i.top-i.bottom;d.update=function(){f.beforeUpdate();z.transition().duration(g).call(d);};d.container=this;if(!A||!A.length){var E=z.selectAll(".nv-noData").data([j]);E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");E.attr("x",i.left+x/2).attr("y",i.top+w/2).text(function(I){return I;});return d;}else{z.selectAll(".nv-noData").remove();}r=c.xScale();t=c.yScale().clamp(true);var G=z.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([A]);var D=G.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g");var B=D.append("defs");var C=G.select("g");D.append("g").attr("class","nv-x nv-axis");D.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");D.append("g").attr("class","nv-barsWrap");C.attr("transform","translate("+i.left+","+i.top+")");if(l){C.select(".nv-y.nv-axis").attr("transform","translate("+x+",0)");}c.width(x).height(w);var y=C.select(".nv-barsWrap").datum(A.filter(function(I){return !I.disabled;}));y.transition().call(c);B.append("clipPath").attr("id","nv-x-label-clip-"+c.id()).append("rect");C.select("#nv-x-label-clip-"+c.id()+" rect").attr("width",r.rangeBand()*(o?2:1)).attr("height",16).attr("x",-r.rangeBand()/(o?1:2));if(m){s.scale(r).ticks(a.utils.calcTicksX(x/100,A)).tickSize(-w,0);C.select(".nv-x.nv-axis").attr("transform","translate(0,"+t.range()[0]+")");C.select(".nv-x.nv-axis").call(s);var H=C.select(".nv-x.nv-axis").selectAll("g");if(o){H.selectAll("text").attr("transform",function(I,J,K){return"translate(0,"+(K%2===0?"5":"17")+")";});}}if(n){u.scale(t).ticks(Math.floor(w/36)).tickSize(-x,0);C.select(".nv-y.nv-axis").call(u);}C.select(".nv-zeroLine line").attr("x1",0).attr("x2",x).attr("y1",t(0)).attr("y2",t(0));});k.renderEnd("nv-boxplot chart immediate");return d;}c.dispatch.on("elementMouseover.tooltip",function(v){p.data(v).hidden(false);});c.dispatch.on("elementMouseout.tooltip",function(v){p.data(v).hidden(true);});c.dispatch.on("elementMousemove.tooltip",function(v){p();});d.dispatch=f;d.boxplot=c;d.xAxis=s;d.yAxis=u;d.tooltip=p;d.options=a.utils.optionsFunc.bind(d);d._options=Object.create({},{width:{get:function(){return q;},set:function(v){q=v;}},height:{get:function(){return h;},set:function(v){h=v;}},staggerLabels:{get:function(){return o;},set:function(v){o=v;}},showXAxis:{get:function(){return m;},set:function(v){m=v;}},showYAxis:{get:function(){return n;},set:function(v){n=v;}},tooltipContent:{get:function(){return p;},set:function(v){p=v;}},noData:{get:function(){return j;},set:function(v){j=v;}},margin:{get:function(){return i;},set:function(v){i.top=v.top!==undefined?v.top:i.top;i.right=v.right!==undefined?v.right:i.right;i.bottom=v.bottom!==undefined?v.bottom:i.bottom;i.left=v.left!==undefined?v.left:i.left;}},duration:{get:function(){return g;},set:function(v){g=v;k.reset(g);c.duration(g);s.duration(g);u.duration(g);}},color:{get:function(){return e;},set:function(v){e=a.utils.getColor(v);c.color(e);}},rightAlignYAxis:{get:function(){return l;},set:function(v){l=v;u.orient((v)?"right":"left");}}});a.utils.inheritOptions(d,c);a.utils.initOptions(d);return d;};a.models.bullet=function(){var l={top:0,right:0,bottom:0,left:0},s="left",v=false,u=function(z){return z.ranges;},p=function(z){return z.markers?z.markers:[];},o=function(z){return z.markerLines?z.markerLines:[0];},r=function(z){return z.measures;},t=function(z){return z.rangeLabels?z.rangeLabels:[];},m=function(z){return z.markerLabels?z.markerLabels:[];},n=function(z){return z.markerLineLabels?z.markerLineLabels:[];},q=function(z){return z.measureLabels?z.measureLabels:[];},i=[0],y=380,j=30,e=null,x=null,d=a.utils.getColor(["#1f77b4"]),g=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),f=["Maximum","Mean","Minimum"],k=["Max","Avg","Min"],h=1000;function w(z,B){var A=z.slice();z.sort(function(C,D){var E=A.indexOf(C);var F=A.indexOf(D);return d3.descending(B[E],B[F]);});}function c(z){z.each(function(C,G){var B=y-l.left-l.right,A=j-l.top-l.bottom;e=d3.select(this);a.utils.initSVG(e);var W=u.call(this,C,G).slice(),N=p.call(this,C,G).slice(),M=o.call(this,C,G).slice(),P=r.call(this,C,G).slice(),T=t.call(this,C,G).slice(),J=m.call(this,C,G).slice(),K=n.call(this,C,G).slice(),O=q.call(this,C,G).slice();w(T,W);w(J,N);w(K,M);w(O,P);W.sort(d3.descending);N.sort(d3.descending);M.sort(d3.descending);P.sort(d3.descending);var ac=d3.scale.linear().domain(d3.extent(d3.merge([i,W]))).range(v?[B,0]:[0,B]);var ab=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(ac.range());this.__chart__=ac;var V=d3.min(W),U=d3.max(W),R=W[1];var Z=e.selectAll("g.nv-wrap.nv-bullet").data([C]);var aa=Z.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet");var E=aa.append("g");var D=Z.select("g");for(var G=0,H=W.length;G<H;G++){var S="nv-range nv-range"+G;if(G<=2){S=S+" nv-range"+k[G];}E.append("rect").attr("class",S);}E.append("rect").attr("class","nv-measure");Z.attr("transform","translate("+l.left+","+l.top+")");var X=function(af){return Math.abs(ab(af)-ab(0));},Y=function(af){return Math.abs(ac(af)-ac(0));};var ad=function(af){return af<0?ab(af):ab(0);},ae=function(af){return af<0?ac(af):ac(0);};for(var G=0,H=W.length;G<H;G++){var Q=W[G];D.select("rect.nv-range"+G).datum(Q).attr("height",A).transition().duration(h).attr("width",Y(Q)).attr("x",ae(Q));}D.select("rect.nv-measure").style("fill",d).attr("height",A/3).attr("y",A/3).on("mouseover",function(){g.elementMouseover({value:P[0],label:O[0]||"Current",color:d3.select(this).style("fill")});}).on("mousemove",function(){g.elementMousemove({value:P[0],label:O[0]||"Current",color:d3.select(this).style("fill")});}).on("mouseout",function(){g.elementMouseout({value:P[0],label:O[0]||"Current",color:d3.select(this).style("fill")});}).transition().duration(h).attr("width",P<0?ac(0)-ac(P[0]):ac(P[0])-ac(0)).attr("x",ae(P));var F=A/6;var I=N.map(function(ag,af){return{value:ag,label:J[af]};});E.selectAll("path.nv-markerTriangle").data(I).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+F+"L"+F+","+(-F)+" "+(-F)+","+(-F)+"Z").on("mouseover",function(af){g.elementMouseover({value:af.value,label:af.label||"Previous",color:d3.select(this).style("fill"),pos:[ac(af.value),A/2]});}).on("mousemove",function(af){g.elementMousemove({value:af.value,label:af.label||"Previous",color:d3.select(this).style("fill")});}).on("mouseout",function(af,ag){g.elementMouseout({value:af.value,label:af.label||"Previous",color:d3.select(this).style("fill")});});D.selectAll("path.nv-markerTriangle").data(I).transition().duration(h).attr("transform",function(af){return"translate("+ac(af.value)+","+(A/2)+")";});var L=M.map(function(ag,af){return{value:ag,label:K[af]};});E.selectAll("line.nv-markerLine").data(L).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(af){return ac(af.value);}).attr("y1","2").attr("x2",function(af){return ac(af.value);}).attr("y2",A-2).on("mouseover",function(af){g.elementMouseover({value:af.value,label:af.label||"Previous",color:d3.select(this).style("fill"),pos:[ac(af.value),A/2]});}).on("mousemove",function(af){g.elementMousemove({value:af.value,label:af.label||"Previous",color:d3.select(this).style("fill")});}).on("mouseout",function(af,ag){g.elementMouseout({value:af.value,label:af.label||"Previous",color:d3.select(this).style("fill")});});D.selectAll("line.nv-markerLine").data(L).transition().duration(h).attr("x1",function(af){return ac(af.value);}).attr("x2",function(af){return ac(af.value);});Z.selectAll(".nv-range").on("mouseover",function(af,ag){var ah=T[ag]||f[ag];g.elementMouseover({value:af,label:ah,color:d3.select(this).style("fill")});}).on("mousemove",function(){g.elementMousemove({value:P[0],label:O[0]||"Previous",color:d3.select(this).style("fill")});}).on("mouseout",function(af,ag){var ah=T[ag]||f[ag];g.elementMouseout({value:af,label:ah,color:d3.select(this).style("fill")});});});return c;}c.dispatch=g;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{ranges:{get:function(){return u;},set:function(z){u=z;}},markers:{get:function(){return p;},set:function(z){p=z;}},measures:{get:function(){return r;},set:function(z){r=z;}},forceX:{get:function(){return i;},set:function(z){i=z;}},width:{get:function(){return y;},set:function(z){y=z;}},height:{get:function(){return j;},set:function(z){j=z;}},tickFormat:{get:function(){return x;},set:function(z){x=z;}},duration:{get:function(){return h;},set:function(z){h=z;}},margin:{get:function(){return l;},set:function(z){l.top=z.top!==undefined?z.top:l.top;l.right=z.right!==undefined?z.right:l.right;l.bottom=z.bottom!==undefined?z.bottom:l.bottom;l.left=z.left!==undefined?z.left:l.left;}},orient:{get:function(){return s;},set:function(z){s=z;v=s=="right"||s=="bottom";}},color:{get:function(){return d;},set:function(z){d=a.utils.getColor(z);}}});a.utils.initOptions(c);return c;};a.models.bulletChart=function(){var c=a.models.bullet();var p=a.models.tooltip();var k="left",m=false,g={top:5,right:40,bottom:20,left:120},l=function(r){return r.ranges;},h=function(r){return r.markers?r.markers:[];},i=function(r){return r.measures;},q=null,f=55,n=null,o=null,j=null,e=d3.dispatch();p.duration(0).headerEnabled(false);function d(r){r.each(function(w,A){var v=d3.select(this);a.utils.initSVG(v);var t=a.utils.availableWidth(q,v,g),s=f-g.top-g.bottom,E=this;d.update=function(){d(r);};d.container=this;if(!w||!l.call(this,w,A)){a.utils.noData(d,v);return d;}else{v.selectAll(".nv-noData").remove();}var D=l.call(this,w,A).slice().sort(d3.descending),B=h.call(this,w,A).slice().sort(d3.descending),C=i.call(this,w,A).slice().sort(d3.descending);var L=v.selectAll("g.nv-wrap.nv-bulletChart").data([w]);var M=L.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart");var z=M.append("g");var y=L.select("g");z.append("g").attr("class","nv-bulletWrap");z.append("g").attr("class","nv-titles");L.attr("transform","translate("+g.left+","+g.top+")");var O=d3.scale.linear().domain([0,Math.max(D[0],(B[0]||0),C[0])]).range(m?[t,0]:[0,t]);var N=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(O.range());this.__chart__=O;var J=function(P){return Math.abs(N(P)-N(0));},K=function(P){return Math.abs(O(P)-O(0));};var I=z.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(f-g.top-g.bottom)/2+")");I.append("text").attr("class","nv-title").text(function(P){return P.title;});I.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(P){return P.subtitle;});c.width(t).height(s);var u=y.select(".nv-bulletWrap");d3.transition(u).call(c);var x=n||O.tickFormat(t/100);var F=y.selectAll("g.nv-tick").data(O.ticks(o?o:(t/50)),function(P){return this.textContent||x(P);});var G=F.enter().append("g").attr("class","nv-tick").attr("transform",function(P){return"translate("+N(P)+",0)";}).style("opacity",1e-06);G.append("line").attr("y1",s).attr("y2",s*7/6);G.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",s*7/6).text(x);var H=d3.transition(F).transition().duration(c.duration()).attr("transform",function(P){return"translate("+O(P)+",0)";}).style("opacity",1);H.select("line").attr("y1",s).attr("y2",s*7/6);H.select("text").attr("y",s*7/6);d3.transition(F.exit()).transition().duration(c.duration()).attr("transform",function(P){return"translate("+O(P)+",0)";}).style("opacity",1e-06).remove();});d3.timer.flush();return d;}c.dispatch.on("elementMouseover.tooltip",function(r){r.series={key:r.label,value:r.value,color:r.color};p.data(r).hidden(false);});c.dispatch.on("elementMouseout.tooltip",function(r){p.hidden(true);});c.dispatch.on("elementMousemove.tooltip",function(r){p();});d.bullet=c;d.dispatch=e;d.tooltip=p;d.options=a.utils.optionsFunc.bind(d);d._options=Object.create({},{ranges:{get:function(){return l;},set:function(r){l=r;}},markers:{get:function(){return h;},set:function(r){h=r;}},measures:{get:function(){return i;},set:function(r){i=r;}},width:{get:function(){return q;},set:function(r){q=r;}},height:{get:function(){return f;},set:function(r){f=r;}},tickFormat:{get:function(){return n;},set:function(r){n=r;}},ticks:{get:function(){return o;},set:function(r){o=r;}},noData:{get:function(){return j;},set:function(r){j=r;}},margin:{get:function(){return g;},set:function(r){g.top=r.top!==undefined?r.top:g.top;g.right=r.right!==undefined?r.right:g.right;g.bottom=r.bottom!==undefined?r.bottom:g.bottom;g.left=r.left!==undefined?r.left:g.left;}},orient:{get:function(){return k;},set:function(r){k=r;m=k=="right"||k=="bottom";}}});a.utils.inheritOptions(d,c);a.utils.initOptions(d);return d;};a.models.candlestickBar=function(){var s={top:0,right:0,bottom:0,left:0},u=null,p=null,q=Math.floor(Math.random()*10000),f,v=d3.scale.linear(),A=d3.scale.linear(),n=function(x){return x.x;},o=function(x){return x.y;},m=function(x){return x.open;},j=function(x){return x.close;},k=function(x){return x.high;},l=function(x){return x.low;},h=[],i=[],t=false,d=true,e=a.utils.defaultColor(),r=false,w,B,z,C,g=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function c(x){x.each(function(F){f=d3.select(this);var D=a.utils.availableWidth(u,f,s),y=a.utils.availableHeight(p,f,s);a.utils.initSVG(f);var E=(D/F[0].values.length)*0.45;v.domain(w||d3.extent(F[0].values.map(n).concat(h)));if(t){v.range(z||[D*0.5/F[0].values.length,D*(F[0].values.length-0.5)/F[0].values.length]);}else{v.range(z||[5+E/2,D-E/2-5]);}A.domain(B||[d3.min(F[0].values.map(l).concat(i)),d3.max(F[0].values.map(k).concat(i))]).range(C||[y,0]);if(v.domain()[0]===v.domain()[1]){v.domain()[0]?v.domain([v.domain()[0]-v.domain()[0]*0.01,v.domain()[1]+v.domain()[1]*0.01]):v.domain([-1,1]);}if(A.domain()[0]===A.domain()[1]){A.domain()[0]?A.domain([A.domain()[0]+A.domain()[0]*0.01,A.domain()[1]-A.domain()[1]*0.01]):A.domain([-1,1]);}var N=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([F[0].values]);var O=N.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar");var G=O.append("defs");var I=O.append("g");var H=N.select("g");I.append("g").attr("class","nv-ticks");N.attr("transform","translate("+s.left+","+s.top+")");f.on("click",function(P,Q){g.chartClick({data:P,index:Q,pos:d3.event,id:q});});G.append("clipPath").attr("id","nv-chart-clip-path-"+q).append("rect");N.select("#nv-chart-clip-path-"+q+" rect").attr("width",D).attr("height",y);H.attr("clip-path",d?"url(#nv-chart-clip-path-"+q+")":"");var M=N.select(".nv-ticks").selectAll(".nv-tick").data(function(P){return P;});M.exit().remove();var L=M.enter().append("g");M.attr("class",function(P,Q,R){return(m(P,Q)>j(P,Q)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+R+"-"+Q;});var J=L.append("line").attr("class","nv-candlestick-lines").attr("transform",function(P,Q){return"translate("+v(n(P,Q))+",0)";}).attr("x1",0).attr("y1",function(P,Q){return A(k(P,Q));}).attr("x2",0).attr("y2",function(P,Q){return A(l(P,Q));});var K=L.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(P,Q){return"translate("+(v(n(P,Q))-E/2)+","+(A(o(P,Q))-(m(P,Q)>j(P,Q)?(A(j(P,Q))-A(m(P,Q))):0))+")";}).attr("x",0).attr("y",0).attr("width",E).attr("height",function(Q,R){var S=m(Q,R);var P=j(Q,R);return S>P?A(P)-A(S):A(S)-A(P);});M.select(".nv-candlestick-lines").transition().attr("transform",function(P,Q){return"translate("+v(n(P,Q))+",0)";}).attr("x1",0).attr("y1",function(P,Q){return A(k(P,Q));}).attr("x2",0).attr("y2",function(P,Q){return A(l(P,Q));});M.select(".nv-candlestick-rects").transition().attr("transform",function(P,Q){return"translate("+(v(n(P,Q))-E/2)+","+(A(o(P,Q))-(m(P,Q)>j(P,Q)?(A(j(P,Q))-A(m(P,Q))):0))+")";}).attr("x",0).attr("y",0).attr("width",E).attr("height",function(Q,R){var S=m(Q,R);var P=j(Q,R);return S>P?A(P)-A(S):A(S)-A(P);});});return c;}c.highlightPoint=function(y,x){c.clearHighlights();f.select(".nv-candlestickBar .nv-tick-0-"+y).classed("hover",x);};c.clearHighlights=function(){f.select(".nv-candlestickBar .nv-tick.hover").classed("hover",false);};c.dispatch=g;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return u;},set:function(x){u=x;}},height:{get:function(){return p;},set:function(x){p=x;}},xScale:{get:function(){return v;},set:function(x){v=x;}},yScale:{get:function(){return A;},set:function(x){A=x;}},xDomain:{get:function(){return w;},set:function(x){w=x;}},yDomain:{get:function(){return B;},set:function(x){B=x;}},xRange:{get:function(){return z;},set:function(x){z=x;}},yRange:{get:function(){return C;},set:function(x){C=x;}},forceX:{get:function(){return h;},set:function(x){h=x;}},forceY:{get:function(){return i;},set:function(x){i=x;}},padData:{get:function(){return t;},set:function(x){t=x;}},clipEdge:{get:function(){return d;},set:function(x){d=x;}},id:{get:function(){return q;},set:function(x){q=x;}},interactive:{get:function(){return r;},set:function(x){r=x;}},x:{get:function(){return n;},set:function(x){n=x;}},y:{get:function(){return o;},set:function(x){o=x;}},open:{get:function(){return m();},set:function(x){m=x;}},close:{get:function(){return j();},set:function(x){j=x;}},high:{get:function(){return k;},set:function(x){k=x;}},low:{get:function(){return l;},set:function(x){l=x;}},margin:{get:function(){return s;},set:function(x){s.top=x.top!=undefined?x.top:s.top;s.right=x.right!=undefined?x.right:s.right;s.bottom=x.bottom!=undefined?x.bottom:s.bottom;s.left=x.left!=undefined?x.left:s.left;}},color:{get:function(){return e;},set:function(x){e=a.utils.getColor(x);}}});a.utils.initOptions(c);return c;};a.models.cumulativeLineChart=function(){var t=a.models.line(),P=a.models.axis(),R=a.models.axis(),s=a.models.legend(),f=a.models.legend(),r=a.interactiveGuideline(),K=a.models.tooltip();var u={top:30,right:30,bottom:50,left:60},v=null,e=a.utils.defaultColor(),N=null,m=null,E=true,F=true,G=true,C=false,D=true,M=false,B=true,O,Q,n=t.id(),H=a.utils.state(),h=null,w=null,c=function(x){return x.average;},i=d3.dispatch("stateChange","changeState","renderEnd"),L=250,j=250,z=false;H.index=0;H.rescaleY=B;P.orient("bottom").tickPadding(7);R.orient((C)?"right":"left");K.valueFormatter(function(x,y){return R.tickFormat()(x,y);}).headerFormatter(function(x,y){return P.tickFormat()(x,y);});f.updateState(false);var k=d3.scale.linear(),o={i:0,x:0},A=a.utils.renderWatch(i,j),g;var I=function(x){return function(){return{active:x.map(function(y){return !y.disabled;}),index:o.i,rescaleY:B};};};var J=function(x){return function(y){if(y.index!==undefined){o.i=y.index;}if(y.rescaleY!==undefined){B=y.rescaleY;}if(y.active!==undefined){x.forEach(function(T,S){T.disabled=!y.active[S];});}};};function d(x){A.reset();A.models(t);if(F){A.models(P);}if(G){A.models(R);}x.each(function(X){var V=d3.select(this);a.utils.initSVG(V);V.classed("nv-chart-"+n,true);var ak=this;var S=a.utils.availableWidth(N,V,u),y=a.utils.availableHeight(m,V,u);d.update=function(){if(j===0){V.call(d);}else{V.transition().duration(j).call(d);}};d.container=this;H.setter(J(X),d.update).getter(I(X)).update();H.disabled=X.map(function(an){return !!an.disabled;});if(!h){var ah;h={};for(ah in H){if(H[ah] instanceof Array){h[ah]=H[ah].slice(0);}else{h[ah]=H[ah];}}}var ae=d3.behavior.drag().on("dragstart",aa).on("drag",Z).on("dragend",Y);function aa(an,ao){d3.select(d.container).style("cursor","ew-resize");}function Z(an,ao){o.x=d3.event.x;o.i=Math.round(k.invert(o.x));al();}function Y(an,ao){d3.select(d.container).style("cursor","auto");H.index=o.i;i.stateChange(H);}if(!X||!X.length||!X.filter(function(an){return an.values.length;}).length){a.utils.noData(d,V);return d;}else{V.selectAll(".nv-noData").remove();}O=t.xScale();Q=t.yScale();k.domain([0,X[0].values.length-1]).range([0,S]).clamp(true);var X=p(o.i,X);if(typeof(g)==="undefined"){g=l(X);}if(!B){t.yDomain(g);t.clipEdge(true);}else{t.yDomain(null);}var ag=(M)?"none":"all";var am=V.selectAll("g.nv-wrap.nv-cumulativeLine").data([X]);var ac=am.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g");var ab=am.select("g");ac.append("g").attr("class","nv-interactive");ac.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");ac.append("g").attr("class","nv-y nv-axis");ac.append("g").attr("class","nv-background");ac.append("g").attr("class","nv-linesWrap").style("pointer-events",ag);ac.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");ac.append("g").attr("class","nv-legendWrap");ac.append("g").attr("class","nv-controlsWrap");if(!E){ab.select(".nv-legendWrap").selectAll("*").remove();}else{s.width(S);ab.select(".nv-legendWrap").datum(X).call(s);if(!v&&s.height()!==u.top){u.top=s.height();y=a.utils.availableHeight(m,V,u);}ab.select(".nv-legendWrap").attr("transform","translate(0,"+(-u.top)+")");}if(!D){ab.select(".nv-controlsWrap").selectAll("*").remove();}else{var W=[{key:"Re-scale y-axis",disabled:!B}];f.width(140).color(["#444","#444","#444"]).rightAlign(false).margin({top:5,right:0,bottom:5,left:20});ab.select(".nv-controlsWrap").datum(W).attr("transform","translate(0,"+(-u.top)+")").call(f);}am.attr("transform","translate("+u.left+","+u.top+")");if(C){ab.select(".nv-y.nv-axis").attr("transform","translate("+S+",0)");}var aj=X.filter(function(an){return an.tempDisabled;});am.select(".tempDisabled").remove();if(aj.length){am.append("text").attr("class","tempDisabled").attr("x",S/2).attr("y","-.71em").style("text-anchor","end").text(aj.map(function(an){return an.key;}).join(", ")+" values cannot be calculated for this time period.");}if(M){r.width(S).height(y).margin({left:u.left,top:u.top}).svgContainer(V).xScale(O);am.select(".nv-interactive").call(r);}ac.select(".nv-background").append("rect");ab.select(".nv-background rect").attr("width",S).attr("height",y);t.y(function(an){return an.display.y;}).width(S).height(y).color(X.map(function(an,ao){return an.color||e(an,ao);}).filter(function(an,ao){return !X[ao].disabled&&!X[ao].tempDisabled;}));var ai=ab.select(".nv-linesWrap").datum(X.filter(function(an){return !an.disabled&&!an.tempDisabled;}));ai.call(t);X.forEach(function(an,ao){an.seriesIndex=ao;});var T=X.filter(function(an){return !an.disabled&&!!c(an);});var U=ab.select(".nv-avgLinesWrap").selectAll("line").data(T,function(an){return an.key;});var ad=function(an){var ao=Q(c(an));if(ao<0){return 0;}if(ao>y){return y;}return ao;};U.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(an,ao){return t.color()(an,an.seriesIndex);}).attr("x1",0).attr("x2",S).attr("y1",ad).attr("y2",ad);U.style("stroke-opacity",function(an){var ao=Q(c(an));if(ao<0||ao>y){return 0;}return 1;}).attr("x1",0).attr("x2",S).attr("y1",ad).attr("y2",ad);U.exit().remove();var af=ai.selectAll(".nv-indexLine").data([o]);af.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",0.5).style("pointer-events","all").call(ae);af.attr("transform",function(an){return"translate("+k(an.i)+",0)";}).attr("height",y);if(F){P.scale(O)._ticks(a.utils.calcTicksX(S/70,X)).tickSize(-y,0);ab.select(".nv-x.nv-axis").attr("transform","translate(0,"+Q.range()[0]+")");ab.select(".nv-x.nv-axis").call(P);}if(G){R.scale(Q)._ticks(a.utils.calcTicksY(y/36,X)).tickSize(-S,0);ab.select(".nv-y.nv-axis").call(R);}function al(){af.data([o]);var an=d.duration();d.duration(0);d.update();d.duration(an);}ab.select(".nv-background rect").on("click",function(){o.x=d3.mouse(this)[0];o.i=Math.round(k.invert(o.x));H.index=o.i;i.stateChange(H);al();});t.dispatch.on("elementClick",function(an){o.i=an.pointIndex;o.x=k(o.i);H.index=o.i;i.stateChange(H);al();});f.dispatch.on("legendClick",function(an,ao){an.disabled=!an.disabled;B=!an.disabled;H.rescaleY=B;if(!B){g=l(X);}i.stateChange(H);d.update();});s.dispatch.on("stateChange",function(ao){for(var an in ao){H[an]=ao[an];}i.stateChange(H);d.update();});r.dispatch.on("elementMousemove",function(ap){t.clearHighlights();var au,ar,at,an=[];X.filter(function(az,ay){az.seriesIndex=ay;return !(az.disabled||az.tempDisabled);}).forEach(function(aA,ay){ar=a.interactiveBisect(aA.values,ap.pointXValue,d.x());t.highlightPoint(ay,ar,true);var az=aA.values[ar];if(typeof az==="undefined"){return;}if(typeof au==="undefined"){au=az;}if(typeof at==="undefined"){at=d.xScale()(d.x()(az,ar));}an.push({key:aA.key,value:d.y()(az,ar),color:e(aA,aA.seriesIndex)});});if(an.length>2){var ax=d.yScale().invert(ap.mouseY);var ao=Math.abs(d.yScale().domain()[0]-d.yScale().domain()[1]);var av=0.03*ao;var aq=a.nearestValueIndex(an.map(function(ay){return ay.value;}),ax,av);if(aq!==null){an[aq].highlight=true;}}var aw=P.tickFormat()(d.x()(au,ar),ar);r.tooltip.valueFormatter(function(ay,az){return R.tickFormat()(ay);}).data({value:aw,series:an})();r.renderGuideLine(at);});r.dispatch.on("elementMouseout",function(an){t.clearHighlights();});i.on("changeState",function(an){if(typeof an.disabled!=="undefined"){X.forEach(function(ap,ao){ap.disabled=an.disabled[ao];});H.disabled=an.disabled;}if(typeof an.index!=="undefined"){o.i=an.index;o.x=k(o.i);H.index=an.index;af.data([o]);}if(typeof an.rescaleY!=="undefined"){B=an.rescaleY;}d.update();});});A.renderEnd("cumulativeLineChart immediate");return d;}t.dispatch.on("elementMouseover.tooltip",function(x){var y={x:d.x()(x.point),y:d.y()(x.point),color:x.point.color};x.point=y;K.data(x).hidden(false);});t.dispatch.on("elementMouseout.tooltip",function(x){K.hidden(true);});var q=null;function p(y,x){if(!q){q=t.y();}return x.map(function(U,S){if(!U.values){return U;}var T=U.values[y];if(T==null){return U;}var V=q(T,y);if(Math.abs(V)<1e-05&&!z){U.tempDisabled=true;return U;}U.tempDisabled=false;U.values=U.values.map(function(W,X){W.display={y:(q(W,X)-V)/V};return W;});return U;});}function l(x){var y=x.filter(function(S){return !(S.disabled||S.tempDisabled);}).map(function(T,S){return d3.extent(T.values,function(U){return U.display.y;});});return[d3.min(y,function(S){return S[0];}),d3.max(y,function(S){return S[1];})];}d.dispatch=i;d.lines=t;d.legend=s;d.controls=f;d.xAxis=P;d.yAxis=R;d.interactiveLayer=r;d.state=H;d.tooltip=K;d.options=a.utils.optionsFunc.bind(d);d._options=Object.create({},{width:{get:function(){return N;},set:function(x){N=x;}},height:{get:function(){return m;},set:function(x){m=x;}},showControls:{get:function(){return D;},set:function(x){D=x;}},showLegend:{get:function(){return E;},set:function(x){E=x;}},average:{get:function(){return c;},set:function(x){c=x;}},defaultState:{get:function(){return h;},set:function(x){h=x;}},noData:{get:function(){return w;},set:function(x){w=x;}},showXAxis:{get:function(){return F;},set:function(x){F=x;}},showYAxis:{get:function(){return G;},set:function(x){G=x;}},noErrorCheck:{get:function(){return z;},set:function(x){z=x;}},rescaleY:{get:function(){return B;},set:function(x){B=x;d.state.rescaleY=x;}},margin:{get:function(){return u;},set:function(x){if(x.top!==undefined){u.top=x.top;v=x.top;}u.right=x.right!==undefined?x.right:u.right;u.bottom=x.bottom!==undefined?x.bottom:u.bottom;u.left=x.left!==undefined?x.left:u.left;}},color:{get:function(){return e;},set:function(x){e=a.utils.getColor(x);s.color(e);}},useInteractiveGuideline:{get:function(){return M;},set:function(x){M=x;if(x===true){d.interactive(false);d.useVoronoi(false);}}},rightAlignYAxis:{get:function(){return C;},set:function(x){C=x;R.orient((x)?"right":"left");}},duration:{get:function(){return j;},set:function(x){j=x;t.duration(j);P.duration(j);R.duration(j);A.reset(j);}}});a.utils.inheritOptions(d,t);a.utils.initOptions(d);return d;};a.models.discreteBar=function(){var m={top:0,right:0,bottom:0,left:0},r=960,k=500,l=Math.floor(Math.random()*10000),e,s=d3.scale.ordinal(),w=d3.scale.linear(),i=function(x){return x.x;},j=function(x){return x.y;},h=[0],d=a.utils.defaultColor(),p=false,q=d3.format(",.2f"),u,A,v,B,f=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),n="discreteBar",g=250;var t,z;var o=a.utils.renderWatch(f,g);function c(x){o.reset();x.each(function(F){var C=r-m.left-m.right,y=k-m.top-m.bottom;e=d3.select(this);a.utils.initSVG(e);F.forEach(function(N,M){N.values.forEach(function(O){O.series=M;});});var J=(u&&A)?[]:F.map(function(M){return M.values.map(function(N,O){return{x:i(N,O),y:j(N,O),y0:N.y0};});});s.domain(u||d3.merge(J).map(function(M){return M.x;})).rangeBands(v||[0,C],0.1);w.domain(A||d3.extent(d3.merge(J).map(function(M){return M.y;}).concat(h)));if(p){w.range(B||[y-(w.domain()[0]<0?12:0),w.domain()[1]>0?12:0]);}else{w.range(B||[y,0]);}t=t||s;z=z||w.copy().range([w(0),w(0)]);var K=e.selectAll("g.nv-wrap.nv-discretebar").data([F]);var L=K.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar");var H=L.append("g");var G=K.select("g");H.append("g").attr("class","nv-groups");K.attr("transform","translate("+m.left+","+m.top+")");var I=K.select(".nv-groups").selectAll(".nv-group").data(function(M){return M;},function(M){return M.key;});I.enter().append("g").style("stroke-opacity",1e-06).style("fill-opacity",1e-06);I.exit().watchTransition(o,"discreteBar: exit groups").style("stroke-opacity",1e-06).style("fill-opacity",1e-06).remove();I.attr("class",function(M,N){return"nv-group nv-series-"+N;}).classed("hover",function(M){return M.hover;});I.watchTransition(o,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",0.75);var D=I.selectAll("g.nv-bar").data(function(M){return M.values;});D.exit().remove();var E=D.enter().append("g").attr("transform",function(M,N,O){return"translate("+(s(i(M,N))+s.rangeBand()*0.05)+", "+w(0)+")";}).on("mouseover",function(M,N){d3.select(this).classed("hover",true);f.elementMouseover({data:M,index:N,color:d3.select(this).style("fill")});}).on("mouseout",function(M,N){d3.select(this).classed("hover",false);f.elementMouseout({data:M,index:N,color:d3.select(this).style("fill")});}).on("mousemove",function(M,N){f.elementMousemove({data:M,index:N,color:d3.select(this).style("fill")});}).on("click",function(M,O){var N=this;f.elementClick({data:M,index:O,color:d3.select(this).style("fill"),event:d3.event,element:N});d3.event.stopPropagation();}).on("dblclick",function(M,N){f.elementDblClick({data:M,index:N,color:d3.select(this).style("fill")});d3.event.stopPropagation();});E.append("rect").attr("height",0).attr("width",s.rangeBand()*0.9/F.length);if(p){E.append("text").attr("text-anchor","middle");D.select("text").text(function(M,N){return q(j(M,N));}).watchTransition(o,"discreteBar: bars text").attr("x",s.rangeBand()*0.9/2).attr("y",function(M,N){return j(M,N)<0?w(j(M,N))-w(0)+12:-4;});}else{D.selectAll("text").remove();}D.attr("class",function(M,N){return j(M,N)<0?"nv-bar negative":"nv-bar positive";}).style("fill",function(M,N){return M.color||d(M,N);}).style("stroke",function(M,N){return M.color||d(M,N);}).select("rect").attr("class",n).watchTransition(o,"discreteBar: bars rect").attr("width",s.rangeBand()*0.9/F.length);D.watchTransition(o,"discreteBar: bars").attr("transform",function(M,N){var O=s(i(M,N))+s.rangeBand()*0.05,P=j(M,N)<0?w(0):w(0)-w(j(M,N))<1?w(0)-1:w(j(M,N));return"translate("+O+", "+P+")";}).select("rect").attr("height",function(M,N){return Math.max(Math.abs(w(j(M,N))-w(0)),1);});t=s.copy();z=w.copy();});o.renderEnd("discreteBar immediate");return c;}c.dispatch=f;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return r;},set:function(x){r=x;}},height:{get:function(){return k;},set:function(x){k=x;}},forceY:{get:function(){return h;},set:function(x){h=x;}},showValues:{get:function(){return p;},set:function(x){p=x;}},x:{get:function(){return i;},set:function(x){i=x;}},y:{get:function(){return j;},set:function(x){j=x;}},xScale:{get:function(){return s;},set:function(x){s=x;}},yScale:{get:function(){return w;},set:function(x){w=x;}},xDomain:{get:function(){return u;},set:function(x){u=x;}},yDomain:{get:function(){return A;},set:function(x){A=x;}},xRange:{get:function(){return v;},set:function(x){v=x;}},yRange:{get:function(){return B;},set:function(x){B=x;}},valueFormat:{get:function(){return q;},set:function(x){q=x;}},id:{get:function(){return l;},set:function(x){l=x;}},rectClass:{get:function(){return n;},set:function(x){n=x;}},margin:{get:function(){return m;},set:function(x){m.top=x.top!==undefined?x.top:m.top;m.right=x.right!==undefined?x.right:m.right;m.bottom=x.bottom!==undefined?x.bottom:m.bottom;m.left=x.left!==undefined?x.left:m.left;}},color:{get:function(){return d;},set:function(x){d=a.utils.getColor(x);}},duration:{get:function(){return g;},set:function(x){g=x;o.reset(g);}}});a.utils.initOptions(c);return c;};a.models.discreteBarChart=function(){var e=a.models.discreteBar(),z=a.models.axis(),B=a.models.axis(),i=a.models.legend(),t=a.models.tooltip();var j={top:15,right:10,bottom:50,left:60},k=null,u=null,h=null,d=a.utils.getColor(),p=false,q=true,r=true,n=false,s=false,v=false,o=0,w,A,l=null,f=d3.dispatch("beforeUpdate","renderEnd"),g=250;z.orient("bottom").showMaxMin(false).tickFormat(function(x){return x;});B.orient((n)?"right":"left").tickFormat(d3.format(",.1f"));t.duration(0).headerEnabled(false).valueFormatter(function(x,y){return B.tickFormat()(x,y);}).keyFormatter(function(x,y){return z.tickFormat()(x,y);});var m=a.utils.renderWatch(f,g);function c(x){m.reset();m.models(e);if(q){m.models(z);}if(r){m.models(B);}x.each(function(F){var E=d3.select(this),J=this;a.utils.initSVG(E);var C=a.utils.availableWidth(u,E,j),y=a.utils.availableHeight(h,E,j);c.update=function(){f.beforeUpdate();E.transition().duration(g).call(c);};c.container=this;if(!F||!F.length||!F.filter(function(M){return M.values.length;}).length){a.utils.noData(c,E);return c;}else{E.selectAll(".nv-noData").remove();}w=e.xScale();A=e.yScale().clamp(true);var K=E.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([F]);var I=K.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g");var G=I.append("defs");var H=K.select("g");I.append("g").attr("class","nv-x nv-axis");I.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");I.append("g").attr("class","nv-barsWrap");I.append("g").attr("class","nv-legendWrap");H.attr("transform","translate("+j.left+","+j.top+")");if(!p){H.select(".nv-legendWrap").selectAll("*").remove();}else{i.width(C);H.select(".nv-legendWrap").datum(F).call(i);if(!k&&i.height()!==j.top){j.top=i.height();y=a.utils.availableHeight(h,E,j);}K.select(".nv-legendWrap").attr("transform","translate(0,"+(-j.top)+")");}if(n){H.select(".nv-y.nv-axis").attr("transform","translate("+C+",0)");}e.width(C).height(y);var D=H.select(".nv-barsWrap").datum(F.filter(function(M){return !M.disabled;}));D.transition().call(e);G.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");H.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",w.rangeBand()*(s?2:1)).attr("height",16).attr("x",-w.rangeBand()/(s?1:2));if(q){z.scale(w)._ticks(a.utils.calcTicksX(C/100,F)).tickSize(-y,0);H.select(".nv-x.nv-axis").attr("transform","translate(0,"+(A.range()[0]+((e.showValues()&&A.domain()[0]<0)?16:0))+")");H.select(".nv-x.nv-axis").call(z);var L=H.select(".nv-x.nv-axis").selectAll("g");if(s){L.selectAll("text").attr("transform",function(M,N,O){return"translate(0,"+(O%2==0?"5":"17")+")";});}if(o){L.selectAll(".tick text").attr("transform","rotate("+o+" 0,0)").style("text-anchor",o>0?"start":"end");}if(v){H.selectAll(".tick text").call(a.utils.wrapTicks,c.xAxis.rangeBand());}}if(r){B.scale(A)._ticks(a.utils.calcTicksY(y/36,F)).tickSize(-C,0);H.select(".nv-y.nv-axis").call(B);}H.select(".nv-zeroLine line").attr("x1",0).attr("x2",(n)?-C:C).attr("y1",A(0)).attr("y2",A(0));});m.renderEnd("discreteBar chart immediate");return c;}e.dispatch.on("elementMouseover.tooltip",function(x){x.series={key:c.x()(x.data),value:c.y()(x.data),color:x.color};t.data(x).hidden(false);});e.dispatch.on("elementMouseout.tooltip",function(x){t.hidden(true);});e.dispatch.on("elementMousemove.tooltip",function(x){t();});c.dispatch=f;c.discretebar=e;c.legend=i;c.xAxis=z;c.yAxis=B;c.tooltip=t;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return u;},set:function(x){u=x;}},height:{get:function(){return h;},set:function(x){h=x;}},showLegend:{get:function(){return p;},set:function(x){p=x;}},staggerLabels:{get:function(){return s;},set:function(x){s=x;}},rotateLabels:{get:function(){return o;},set:function(x){o=x;}},wrapLabels:{get:function(){return v;},set:function(x){v=!!x;}},showXAxis:{get:function(){return q;},set:function(x){q=x;}},showYAxis:{get:function(){return r;},set:function(x){r=x;}},noData:{get:function(){return l;},set:function(x){l=x;}},margin:{get:function(){return j;},set:function(x){if(x.top!==undefined){j.top=x.top;k=x.top;}j.right=x.right!==undefined?x.right:j.right;j.bottom=x.bottom!==undefined?x.bottom:j.bottom;j.left=x.left!==undefined?x.left:j.left;}},duration:{get:function(){return g;},set:function(x){g=x;m.reset(g);e.duration(g);z.duration(g);B.duration(g);}},color:{get:function(){return d;},set:function(x){d=a.utils.getColor(x);e.color(d);i.color(d);}},rightAlignYAxis:{get:function(){return n;},set:function(x){n=x;B.orient((x)?"right":"left");}}});a.utils.inheritOptions(c,e);a.utils.initOptions(c);return c;};a.models.distribution=function(){var j={top:0,right:0,bottom:0,left:0},o=400,n=8,c="x",i=function(p){return p[c];},e=a.utils.defaultColor(),l=d3.scale.linear(),g,h=250,f=d3.dispatch("renderEnd");var m;var k=a.utils.renderWatch(f,h);function d(p){k.reset();p.each(function(s){var q=o-(c==="x"?j.left+j.right:j.top+j.bottom),x=c=="x"?"y":"x",r=d3.select(this);a.utils.initSVG(r);m=m||l;var y=r.selectAll("g.nv-distribution").data([s]);var z=y.enter().append("g").attr("class","nvd3 nv-distribution");var w=z.append("g");var v=y.select("g");y.attr("transform","translate("+j.left+","+j.top+")");var u=v.selectAll("g.nv-dist").data(function(A){return A;},function(A){return A.key;});u.enter().append("g");u.attr("class",function(A,B){return"nv-dist nv-series-"+B;}).style("stroke",function(A,B){return e(A,B);});var t=u.selectAll("line.nv-dist"+c).data(function(A){return A.values;});t.enter().append("line").attr(c+"1",function(A,B){return m(i(A,B));}).attr(c+"2",function(A,B){return m(i(A,B));});k.transition(u.exit().selectAll("line.nv-dist"+c),"dist exit").attr(c+"1",function(A,B){return l(i(A,B));}).attr(c+"2",function(A,B){return l(i(A,B));}).style("stroke-opacity",0).remove();t.attr("class",function(A,B){return"nv-dist"+c+" nv-dist"+c+"-"+B;}).attr(x+"1",0).attr(x+"2",n);k.transition(t,"dist").attr(c+"1",function(A,B){return l(i(A,B));}).attr(c+"2",function(A,B){return l(i(A,B));});m=l.copy();});k.renderEnd("distribution immediate");return d;}d.options=a.utils.optionsFunc.bind(d);d.dispatch=f;d.margin=function(p){if(!arguments.length){return j;}j.top=typeof p.top!="undefined"?p.top:j.top;j.right=typeof p.right!="undefined"?p.right:j.right;j.bottom=typeof p.bottom!="undefined"?p.bottom:j.bottom;j.left=typeof p.left!="undefined"?p.left:j.left;return d;};d.width=function(p){if(!arguments.length){return o;}o=p;return d;};d.axis=function(p){if(!arguments.length){return c;}c=p;return d;};d.size=function(p){if(!arguments.length){return n;}n=p;return d;};d.getData=function(p){if(!arguments.length){return i;}i=d3.functor(p);return d;};d.scale=function(p){if(!arguments.length){return l;}l=p;return d;};d.color=function(p){if(!arguments.length){return e;}e=a.utils.getColor(p);return d;};d.duration=function(p){if(!arguments.length){return h;}h=p;k.reset(h);return d;};return d;};a.models.distroPlot=function(){var O={top:0,right:0,bottom:0,left:0},ad=960,G=500,I=Math.floor(Math.random()*10000),ag=d3.scale.ordinal(),aj=d3.scale.linear(),E=function(al){return al.label;},F=function(al){return al.value;},q=function(al){return al.color;},x=function(al){return al.values.q1;},y=function(al){return al.values.q2;},z=function(al){return al.values.q3;},v=function(al){return(h=="mean"?t(al):y(al))-al.values.notch;},w=function(al){return(h=="mean"?t(al):y(al))+al.values.notch;},t=function(al){return al.values.mean;},D=function(al){return al.values.wl[ac];},C=function(al){return al.values.wu[ac];},u=function(al){return al.values.min;},s=function(al){return al.values.max;},r=function(al){return al.values.dev;},B=function(al){return al.values.observations;},A=function(al){return al.values.observations.map(function(am){return am.y;});},S,R=false,ac="iqr",H=false,Q=false,k=false,h=false,aa=true,K=0.7,ab=true,f="scott",Y=50,T=3,j=a.utils.defaultColor(),l=null,ae,af,ah,ai,m=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),n=250,P=null;function L(am,al){if(typeof al==="undefined"){al=0.7;}al=d3.min([1,al]);return am/2+Math.floor(Math.random()*am*al)-(am*al)/2;}function Z(ao){var an=ao.sort(d3.ascending);var am=1.349;var al=(d3.quantile(an,0.75)-d3.quantile(an,0.25))/am;return d3.min([d3.deviation(an),al]);}function g(ao,an){if(typeof an==="undefined"){an="scott";}var al=Z(ao);var am=ao.length;return an==="scott"?Math.pow(1.059*al*am,-0.2):Math.pow(0.9*al*am,-0.2);}function U(an){function am(au,aI){var aF=au.map(function(aJ){if(k){c.add(k(aJ));}return F(aJ);}).sort(d3.ascending);var aB=d3.quantile(aF,0.25);var aC=d3.quantile(aF,0.75);var av=aC-aB;var aG={iqr:d3.max([d3.min(aF),aB-1.5*av]),minmax:d3.min(aF),stddev:d3.mean(aF)-d3.deviation(aF)};var aH={iqr:d3.min([d3.max(aF),aC+1.5*av]),minmax:d3.max(aF),stddev:d3.mean(aF)+d3.deviation(aF)};var az=d3.median(aF);var ay=d3.mean(aF);var aA=[];if(typeof d3.beeswarm!=="undefined"){aA=d3.beeswarm().data(au.map(function(aJ){return F(aJ);})).radius(T+1).orientation("vertical").side("symmetric").distributeOn(function(aJ){return aj(aJ);}).arrange();aA.map(function(aJ,aK){aJ.key=aI;aJ.idx=au[aK].idx;aJ.isOutlier=(aJ.datum<aG.iqr||aJ.datum>aH.iqr);aJ.isOutlierStdDev=(aJ.datum<aG.stddev||aJ.datum>aH.stddev);});}else{aF.forEach(function(aJ,aK){aA.push({idx:aK,datum:aJ,key:aI,isOutlier:(aJ<aG.iqr||aJ>aH.iqr),isOutlierStdDev:(aJ<aG.stddev||aJ>aH.stddev),});});}if(isNaN(parseFloat(f))){if(["scott","silverman"].indexOf(f)!=-1){f=g(aF,f);}else{f=g(aF);}}var aw=M(o(f),aj.ticks(Y));var ax=aw(aF);var aE=d3.scale.linear().domain([0,d3.max(ax,function(aJ){return aJ.y;})]).clamp(true);ak.push(aE);var aD={count:aF.length,num_outlier:aA.filter(function(aJ){return aJ.isOutlier;}).length,sum:d3.sum(aF),mean:ay,q1:aB,q2:az,q3:aC,wl:aG,wu:aH,iqr:av,min:d3.min(aF),max:d3.max(aF),dev:d3.deviation(aF),observations:aA,key:aI,kde:ax,notch:1.57*av/Math.sqrt(aF.length),};if(k){W.push({key:aI,values:aD});}return aD;}an.forEach(function(au,av){au.idx=av;});var ao;if(!k){ao=d3.nest().key(function(au){return E(au);}).rollup(function(av,au){return am(av);}).entries(an);}else{c=d3.set();var ar=d3.nest().key(function(au){return E(au);}).key(function(au){return k(au);}).rollup(function(au){return am(au,E(au[0]));}).entries(an);c=c.values();var at=ar.map(function(au){return au.key;});var al=[];for(var ap=0;ap<at.length;ap++){for(var aq=0;aq<c.length;aq++){al.push(at[ap]+"_"+c[aq]);}}c=al;ao=[];ar.forEach(function(au){au.values.forEach(function(av){av.key=au.key+"_"+av.key;});ao.push.apply(ao,au.values);});}return ao;}function M(al,am){return function(an){return am.map(function(ao){return{x:ao,y:d3.mean(an,function(ap){return al(ao-ap);})};});};}function o(al){return function(am){return Math.abs(am/=al)<=1?0.75*(1-am*am)/al:0;};}function N(am,ap,al,ao){var an;var aq=h=="mean"?t(ao):y(ao);if(Q){an=[{x:al,y:aj(x(ao))},{x:am,y:aj(x(ao))},{x:am,y:aj(v(ao))},{x:ap,y:aj(aq)},{x:am,y:aj(w(ao))},{x:am,y:aj(z(ao))},{x:al,y:aj(z(ao))},];}else{an=[{x:al,y:aj(x(ao))},{x:am,y:aj(x(ao))},{x:am,y:aj(aq)},{x:am,y:aj(aq)},{x:am,y:aj(aq)},{x:am,y:aj(z(ao))},{x:al,y:aj(z(ao))},];}return an;}function p(am){if(!k){return am;}var al=V.find(function(an){return an.key==am;});return al.values.map(function(an){return an.key;}).sort(d3.ascending);}function J(al){return(ac=="iqr"&&al.isOutlier)||(ac=="stddev"&&al.isOutlierStdDev);}var c=d3.set();var ak=[],V,W=[];var X=a.utils.renderWatch(m,n);var e,d;function i(al){X.reset();al.each(function(ar){e=ad-O.left-O.right,d=G-O.top-O.bottom;l=d3.select(this);a.utils.initSVG(l);aj.domain(ah||d3.extent(ar.map(function(aB){return F(aB);}))).nice().range(ai||[d,0]);if(typeof V==="undefined"){V=U(ar);}ag.rangeBands(af||[0,e],0.1).domain(ae||(k&&!ab)?c:V.map(function(aB){return aB.key;}));var az=l.selectAll("g.nv-wrap").data([V]);var aA=az.enter().append("g").attr("class","nvd3 nv-wrap");az.watchTransition(X,"nv-wrap: wrap").attr("transform","translate("+O.left+","+O.top+")");var an,at=az.selectAll(".nv-distroplot-x-group").data(function(aB){return aB;});at.each(function(aB,aC){d3.select(this).selectAll("line.nv-distroplot-middle").datum(aB);});an=at.enter().append("g").attr("class","nv-distroplot-x-group").style("stroke-opacity",1e-06).style("fill-opacity",1e-06).style("fill",function(aB,aC){return q(aB)||j(aB,aC);}).style("stroke",function(aB,aC){return q(aB)||j(aB,aC);});at.exit().remove();var aw=function(){return ag.rangeBand();};var aq=function(){return d3.min([P,aw()*0.9]);};var am=function(){return aq()/2;};var ao=function(){return am()-aq()/2;};var ap=function(){return am()+aq()/2;};var ax=function(){return am()-aq()/5;};var ay=function(){return am()+aq()/5;};an.attr("transform",function(aB){return"translate("+(ag(aB.key)+(aw()-aq())*0.5)+", 0)";});at.watchTransition(X,"nv-distroplot-x-group: distroplots").style("stroke-opacity",1).style("fill-opacity",0.5).attr("transform",function(aB){return"translate("+(ag(aB.key)+(aw()-aq())*0.5)+", 0)";});ak.map(function(aB){aB.range([aq()/2,0]);});if(!S){aa=false;if(!R){R="random";}}an.each(function(aC,aD){var aB=d3.select(this);[D,C].forEach(function(aE){var aF=(aE===D)?"low":"high";aB.append("line").style("opacity",function(){return !H?"0":"1";}).attr("class","nv-distroplot-whisker nv-distroplot-"+aF);aB.append("line").style("opacity",function(){return H?"0":"1";}).attr("class","nv-distroplot-tick nv-distroplot-"+aF);});});[D,C].forEach(function(aC){var aD=(aC===D)?"low":"high";var aB=(aC===D)?x:z;at.select("line.nv-distroplot-whisker.nv-distroplot-"+aD).watchTransition(X,"nv-distroplot-x-group: distroplots").attr("x1",am()).attr("y1",function(aE){return S=="box"?aj(aC(aE)):aj(y(aE));}).attr("x2",am()).attr("y2",function(aE){return S=="box"?aj(aB(aE)):aj(y(aE));}).style("opacity",function(){return H?"0":"1";});at.select("line.nv-distroplot-tick.nv-distroplot-"+aD).watchTransition(X,"nv-distroplot-x-group: distroplots").attr("x1",function(aE){return S=="box"?ax():am();}).attr("y1",function(aE,aF){return S=="box"?aj(aC(aE)):aj(y(aE));}).attr("x2",function(aE){return S=="box"?ay():am();}).attr("y2",function(aE,aF){return S=="box"?aj(aC(aE)):aj(y(aE));}).style("opacity",function(){return(H||S!=="box")?"0":"1";});});[D,C].forEach(function(aB){var aC=(aB===D)?"low":"high";an.selectAll(".nv-distroplot-"+aC).on("mouseover",function(aD,aE,aF){d3.select(this.parentNode).selectAll("line.nv-distroplot-"+aC).classed("hover",true);m.elementMouseover({value:aC=="low"?"Lower whisker":"Upper whisker",series:{key:aB(aD).toFixed(2),color:q(aD)||j(aD,aF)},e:d3.event});}).on("mouseout",function(aD,aE,aF){d3.select(this.parentNode).selectAll("line.nv-distroplot-"+aC).classed("hover",false);m.elementMouseout({value:aC=="low"?"Lower whisker":"Upper whisker",series:{key:aB(aD).toFixed(2),color:q(aD)||j(aD,aF)},e:d3.event});}).on("mousemove",function(aD,aE){m.elementMousemove({e:d3.event});});});an.each(function(aB,aC){var aD=d3.select(this);["left","right"].forEach(function(aE){["line","area"].forEach(function(aF){aD.append("path").attr("class","nv-distribution-"+aF+" nv-distribution-"+aE).attr("transform","rotate(90,0,0)   translate(0,"+(aE=="left"?-aq():0)+")"+(aE=="left"?"":" scale(1,-1)"));});});an.selectAll(".nv-distribution-line").style("fill","none");an.selectAll(".nv-distribution-area").style("stroke","none").style("opacity",0.7);});at.each(function(aB,aC){var aG=d3.select(this);var aE=S=="box"?N(ao(),ax(),am(),aB):aB.values.kde;aG.selectAll("path").datum(aE);var aF=ak[aC];var aD=S=="box"?"linear":"cardinal";if(S=="box"||S=="violin"){["left","right"].forEach(function(aH){at.selectAll(".nv-distribution-line.nv-distribution-"+aH).watchTransition(X,"nv-distribution-line: distroplots").attr("d",d3.svg.line().x(function(aI){return S=="box"?aI.y:aj(aI.x);}).y(function(aI){return S=="box"?aI.x:aF(aI.y);}).interpolate(aD)).attr("transform","rotate(90,0,0)   translate(0,"+(aH=="left"?-aq():0)+")"+(aH=="left"?"":" scale(1,-1)")).style("opacity",!S?"0":"1");at.selectAll(".nv-distribution-area.nv-distribution-"+aH).watchTransition(X,"nv-distribution-line: distroplots").attr("d",d3.svg.area().x(function(aI){return S=="box"?aI.y:aj(aI.x);}).y(function(aI){return S=="box"?aI.x:aF(aI.y);}).y0(aq()/2).interpolate(aD)).attr("transform","rotate(90,0,0)   translate(0,"+(aH=="left"?-aq():0)+")"+(aH=="left"?"":" scale(1,-1)")).style("opacity",!S?"0":"1");});}else{at.selectAll(".nv-distribution-area").watchTransition(X,"nv-distribution-area: distroplots").style("opacity",!S?"0":"1");at.selectAll(".nv-distribution-line").watchTransition(X,"nv-distribution-line: distroplots").style("opacity",!S?"0":"1");}});at.selectAll("path").on("mouseover",function(aB,aC,aD){aB=d3.select(this.parentNode).datum();d3.select(this).classed("hover",true);m.elementMouseover({key:aB.key,value:"Group "+aB.key+" stats",series:[{key:"max",value:s(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"Q3",value:z(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"Q2",value:y(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"Q1",value:x(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"min",value:u(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"mean",value:t(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"std. dev.",value:r(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"count",value:aB.values.count,color:q(aB)||j(aB,aD)},{key:"num. outliers",value:aB.values.num_outlier,color:q(aB)||j(aB,aD)},],data:aB,index:aC,e:d3.event});}).on("mouseout",function(aB,aC,aD){d3.select(this).classed("hover",false);aB=d3.select(this.parentNode).datum();m.elementMouseout({key:aB.key,value:"Group "+aB.key+" stats",series:[{key:"max",value:s(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"Q3",value:z(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"Q2",value:y(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"Q1",value:x(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"min",value:u(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"mean",value:t(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"std. dev.",value:r(aB).toFixed(2),color:q(aB)||j(aB,aD)},{key:"count",value:aB.values.count,color:q(aB)||j(aB,aD)},{key:"num. outliers",value:aB.values.num_outlier,color:q(aB)||j(aB,aD)},],data:aB,index:aC,e:d3.event});}).on("mousemove",function(aB,aC){m.elementMousemove({e:d3.event});});an.append("line").attr("class",function(aB){return"nv-distroplot-middle";});at.selectAll("line.nv-distroplot-middle").watchTransition(X,"nv-distroplot-x-group: distroplots line").attr("x1",Q?ax:S=="box"?ao:ax()).attr("y1",function(aB,aC,aD){return h=="mean"?aj(t(aB)):aj(y(aB));}).attr("x2",Q?ay:S=="box"?ap:ay()).attr("y2",function(aB,aC){return h=="mean"?aj(t(aB)):aj(y(aB));}).style("opacity",h?"1":"0");at.selectAll(".nv-distroplot-middle").on("mouseover",function(aB,aD,aE){if(d3.select(this).style("opacity")==0){return;}var aC=d3.select(this.parentNode).style("fill");d3.select(this).classed("hover",true);m.elementMouseover({value:h=="mean"?"Mean":"Median",series:{key:h=="mean"?t(aB).toFixed(2):y(aB).toFixed(2),color:aC},e:d3.event});}).on("mouseout",function(aB,aD,aE){if(d3.select(this).style("opacity")==0){return;}d3.select(this).classed("hover",false);var aC=d3.select(this.parentNode).style("fill");m.elementMouseout({value:h=="mean"?"Mean":"Median",series:{key:h=="mean"?t(aB).toFixed(2):y(aB).toFixed(2),color:aC},e:d3.event});}).on("mousemove",function(aB,aC){m.elementMousemove({e:d3.event});});var av=at.selectAll("g.nv-distroplot-observation").data(function(aB){return B(aB);},function(aB,aC){return aB.idx;});var au=av.enter().append("g").attr("class","nv-distroplot-observation");au.append("circle").style({opacity:0});au.append("line").style("stroke-width",1).style({stroke:d3.rgb(85,85,85),opacity:0});av.exit().remove();av.attr("class",function(aB,aC,aD){return"nv-distroplot-observation "+(J(aB)&&S=="box"?"nv-distroplot-outlier":"nv-distroplot-non-outlier");});if(R=="line"){at.selectAll("g.nv-distroplot-observation line").watchTransition(X,"nv-distrolot-x-group: nv-distoplot-observation").attr("x1",ax()+aq()/4).attr("x2",ay()-aq()/4).attr("y1",function(aB){return aj(aB.datum);}).attr("y2",function(aB){return aj(aB.datum);});}else{at.selectAll("g.nv-distroplot-observation circle").watchTransition(X,"nv-distroplot: nv-distroplot-observation").attr("cx",function(aB){return R=="swarm"?aB.x+aq()/2:R=="random"?L(aq(),K):aq()/2;}).attr("cy",function(aB){return R=="swarm"?aB.y:aj(aB.datum);}).attr("r",T);}if(R!==false){if(!aa){at.selectAll(R=="line"?"line":"circle").style("opacity",1);}else{at.selectAll(".nv-distroplot-outlier "+(R=="line"?"line":"circle")).style("opacity",1);at.selectAll(".nv-distroplot-non-outlier "+(R=="line"?"line":"circle")).style("opacity",0);}}at.selectAll(".nv-distroplot-observation"+(R=="line"?" circle":" line")).watchTransition(X,"nv-distroplot: nv-distoplot-observation").style("opacity",0);at.selectAll(".nv-distroplot-observation").on("mouseover",function(aB,aD,aE){var aF=d3.select(this);if(aa&&S=="box"&&!J(aB)){return;}var aC=d3.select(this.parentNode).style("fill");aF.classed("hover",true);m.elementMouseover({value:(S=="box"&&J(aB))?"Outlier":"Observation",series:{key:aB.datum.toFixed(2),color:aC},e:d3.event});}).on("mouseout",function(aB,aD,aE){var aF=d3.select(this);var aC=d3.select(this.parentNode).style("fill");aF.classed("hover",false);m.elementMouseout({value:(S=="box"&&J(aB))?"Outlier":"Observation",series:{key:aB.datum.toFixed(2),color:aC},e:d3.event});}).on("mousemove",function(aB,aC){m.elementMousemove({e:d3.event});});});X.renderEnd("nv-distroplot-x-group immediate");return i;}i.dispatch=m;i.options=a.utils.optionsFunc.bind(i);i._options=Object.create({},{width:{get:function(){return ad;},set:function(al){ad=al;}},height:{get:function(){return G;},set:function(al){G=al;}},maxBoxWidth:{get:function(){return P;},set:function(al){P=al;}},x:{get:function(){return E;},set:function(al){E=al;}},y:{get:function(){return F;},set:function(al){F=al;}},plotType:{get:function(){return S;},set:function(al){S=al;}},observationType:{get:function(){return R;},set:function(al){R=al;}},whiskerDef:{get:function(){return ac;},set:function(al){ac=al;}},notchBox:{get:function(){return Q;},set:function(al){Q=al;}},hideWhiskers:{get:function(){return H;},set:function(al){H=al;}},colorGroup:{get:function(){return k;},set:function(al){k=al;}},centralTendency:{get:function(){return h;},set:function(al){h=al;}},bandwidth:{get:function(){return f;},set:function(al){f=al;}},resolution:{get:function(){return Y;},set:function(al){Y=al;}},xScale:{get:function(){return ag;},set:function(al){ag=al;}},yScale:{get:function(){return aj;},set:function(al){aj=al;}},showOnlyOutliers:{get:function(){return aa;},set:function(al){aa=al;}},jitter:{get:function(){return K;},set:function(al){K=al;}},squash:{get:function(){return ab;},set:function(al){ab=al;}},pointSize:{get:function(){return T;},set:function(al){T=al;}},xDomain:{get:function(){return ae;},set:function(al){ae=al;}},yDomain:{get:function(){return ah;},set:function(al){ah=al;}},xRange:{get:function(){return af;},set:function(al){af=al;}},yRange:{get:function(){return ai;},set:function(al){ai=al;}},recalcData:{get:function(){V=U(d3.select("svg").data()[0]);}},itemColor:{get:function(){return q;},set:function(al){q=al;}},id:{get:function(){return I;},set:function(al){I=al;}},margin:{get:function(){return O;},set:function(al){O.top=al.top!==undefined?al.top:O.top;O.right=al.right!==undefined?al.right:O.right;O.bottom=al.bottom!==undefined?al.bottom:O.bottom;O.left=al.left!==undefined?al.left:O.left;}},color:{get:function(){return j;},set:function(al){j=a.utils.getColor(al);}},duration:{get:function(){return n;},set:function(al){n=al;X.reset(n);}}});a.utils.initOptions(i);return i;};a.models.distroPlotChart=function(){var h=a.models.distroPlot(),B=a.models.axis(),F=a.models.axis();var k={top:25,right:10,bottom:40,left:60},w=null,j=null,d=a.utils.getColor(),p=true,q=true,o=false,r=false,C=false,G=false,v=a.models.tooltip(),z,D,s=a.utils.state(),f=null,m="No Data Available.",g=d3.dispatch("stateChange","beforeUpdate","renderEnd"),i=500;B.orient("bottom").showMaxMin(false).tickFormat(function(x){return x;});F.orient((o)?"right":"left").tickFormat(d3.format(",.1f"));v.duration(0);var n=a.utils.renderWatch(g,i);var e,l=k.top,A,E;var t=function(x){return function(){return{active:x.map(function(y){return !y.disabled;}),};};};var u=function(x){return function(y){if(y.active!==undefined){x.forEach(function(I,H){I.disabled=!y.active[H];});}};};function c(x){n.reset();n.models(h);if(p){n.models(B);}if(q){n.models(F);}x.each(function(J){var I=d3.select(this),P=this;a.utils.initSVG(I);var H=(w||parseInt(I.style("width"))||960)-k.left-k.right;var y=(j||parseInt(I.style("height"))||400)-k.top-k.bottom;c.update=function(){g.beforeUpdate();var T=h.options();if(e!==T.colorGroup()||A!==T.x()||E!==T.y()){h.recalcData();}I.transition().duration(i).call(c);};c.container=this;s.setter(u(J),c.update).getter(t(J)).update();if(!f){var O;f={};for(O in s){if(s[O] instanceof Array){f[O]=s[O].slice(0);}else{f[O]=s[O];}}}if(typeof d3.beeswarm!=="function"&&c.options().observationType()=="swarm"){var R=k.left+H/2;m='Please include the library https://github.com/Kcnarf/d3-beeswarm to use "swarm".';a.utils.noData(c,I);return c;}else{if(!J||!J.length){a.utils.noData(c,I);return c;}else{I.selectAll(".nv-noData").remove();}}z=h.xScale();D=h.yScale().clamp(true);var Q=I.selectAll("g.nv-wrap.nv-distroPlot").data([J]);var N=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-distroPlot").append("g");var K=N.append("defs");var M=Q.select("g");N.append("g").attr("class","nv-x nv-axis");N.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");N.append("g").attr("class","nv-distroWrap");N.attr("transform","translate("+k.left+","+k.top+")");M.watchTransition(n,"nv-wrap: wrap").attr("transform","translate("+k.left+","+k.top+")");if(o){M.select(".nv-y.nv-axis").attr("transform","translate("+H+",0)");}h.width(H).height(y);var L=M.select(".nv-distroWrap").datum(J);L.transition().call(h);K.append("clipPath").attr("id","nv-x-label-clip-"+h.id()).append("rect");M.select("#nv-x-label-clip-"+h.id()+" rect").attr("width",z.rangeBand()*(r?2:1)).attr("height",16).attr("x",-z.rangeBand()/(r?1:2));if(p){B.scale(z).ticks(a.utils.calcTicksX(H/100,J)).tickSize(-y,0);M.select(".nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+")");M.select(".nv-x.nv-axis").call(B);M.select(".nv-x.nv-axis").select(".nv-axislabel").style("font-size",d3.min([H*0.05,20])+"px");var S=M.select(".nv-x.nv-axis").selectAll("g");if(r){S.selectAll("text").attr("transform",function(T,U,V){return"translate(0,"+(V%2===0?"5":"17")+")";});}}if(q){F.scale(D).ticks(Math.floor(y/36)).tickSize(-H,0);M.select(".nv-y.nv-axis").call(F);M.select(".nv-y.nv-axis").select(".nv-axislabel").style("font-size",d3.min([y*0.05,20])+"px");}M.select(".nv-zeroLine line").attr("x1",0).attr("x2",H).attr("y1",D(0)).attr("y2",D(0));e=h.options().colorGroup();A=h.options().x();E=h.options().y();});n.renderEnd("nv-distroplot chart immediate");return c;}h.dispatch.on("elementMouseover.tooltip",function(x){v.data(x).hidden(false);});h.dispatch.on("elementMouseout.tooltip",function(x){v.data(x).hidden(true);});h.dispatch.on("elementMousemove.tooltip",function(x){v();});c.dispatch=g;c.distroplot=h;c.xAxis=B;c.yAxis=F;c.tooltip=v;c.state=s;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return w;},set:function(x){w=x;}},height:{get:function(){return j;},set:function(x){j=x;}},staggerLabels:{get:function(){return r;},set:function(x){r=x;}},showXAxis:{get:function(){return p;},set:function(x){p=x;}},showYAxis:{get:function(){return q;},set:function(x){q=x;}},tooltipContent:{get:function(){return v;},set:function(x){v=x;}},noData:{get:function(){return m;},set:function(x){m=x;}},defaultState:{get:function(){return f;},set:function(x){f=x;}},margin:{get:function(){return k;},set:function(x){k.top=x.top!==undefined?x.top:k.top;k.right=x.right!==undefined?x.right:k.right;k.bottom=x.bottom!==undefined?x.bottom:k.bottom;k.left=x.left!==undefined?x.left:k.left;}},duration:{get:function(){return i;},set:function(x){i=x;n.reset(i);h.duration(i);B.duration(i);F.duration(i);}},color:{get:function(){return d;},set:function(x){d=a.utils.getColor(x);h.color(d);}},rightAlignYAxis:{get:function(){return o;},set:function(x){o=x;F.orient((x)?"right":"left");}},xLabel:{get:function(){return C;},set:function(x){C=x;B.axisLabel(C);}},yLabel:{get:function(){return G;},set:function(x){G=x;F.axisLabel(G);}},});a.utils.inheritOptions(c,h);a.utils.initOptions(c);return c;};a.models.focus=function(g){var g=g||a.models.line(),t=a.models.axis(),v=a.models.axis(),c=d3.svg.brush();var k={top:10,right:0,bottom:30,left:0},f=a.utils.defaultColor(),r=null,j=70,n=true,o=false,m=false,q=null,s,u,d=null,i=250,h=d3.dispatch("brush","onBrush","renderEnd"),p=true;g.interactive(false);g.pointActive(function(w){return false;});var l=a.utils.renderWatch(h,i);function e(w){l.reset();l.models(g);if(n){l.models(t);}if(o){l.models(v);}w.each(function(D){var B=d3.select(this);a.utils.initSVG(B);var y=a.utils.availableWidth(r,B,k),x=j-k.top-k.bottom;e.update=function(){if(i===0){B.call(e);}else{B.transition().duration(i).call(e);}};e.container=this;s=g.xScale();u=g.yScale();var K=B.selectAll("g.nv-focus").data([D]);var G=K.enter().append("g").attr("class","nvd3 nv-focus").append("g");var E=K.select("g");K.attr("transform","translate("+k.left+","+k.top+")");G.append("g").attr("class","nv-background").append("rect");G.append("g").attr("class","nv-x nv-axis");G.append("g").attr("class","nv-y nv-axis");G.append("g").attr("class","nv-contentWrap");G.append("g").attr("class","nv-brushBackground");G.append("g").attr("class","nv-x nv-brush");if(m){E.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)");}E.select(".nv-background rect").attr("width",y).attr("height",x);g.width(y).height(x).color(D.map(function(L,M){return L.color||f(L,M);}).filter(function(L,M){return !D[M].disabled;}));var C=E.select(".nv-contentWrap").datum(D.filter(function(L){return !L.disabled;}));d3.transition(C).call(g);c.x(s).on("brush",function(){H(p);});c.on("brushend",function(){if(!p){h.onBrush(c.empty()?s.domain():c.extent());}});if(d){c.extent(d);}var z=E.select(".nv-brushBackground").selectAll("g").data([d||c.extent()]);var A=z.enter().append("g");A.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",x);A.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",x);var F=E.select(".nv-x.nv-brush").call(c);F.selectAll("rect").attr("height",x);F.selectAll(".resize").append("path").attr("d",I);H(true);E.select(".nv-background rect").attr("width",y).attr("height",x);if(n){t.scale(s)._ticks(a.utils.calcTicksX(y/100,D)).tickSize(-x,0);E.select(".nv-x.nv-axis").attr("transform","translate(0,"+u.range()[0]+")");d3.transition(E.select(".nv-x.nv-axis")).call(t);}if(o){v.scale(u)._ticks(a.utils.calcTicksY(x/36,D)).tickSize(-y,0);d3.transition(E.select(".nv-y.nv-axis")).call(v);}E.select(".nv-x.nv-axis").attr("transform","translate(0,"+u.range()[0]+")");function I(L){var M=+(L=="e"),N=M?1:-1,O=x/3;return"M"+(0.5*N)+","+O+"A6,6 0 0 "+M+" "+(6.5*N)+","+(O+6)+"V"+(2*O-6)+"A6,6 0 0 "+M+" "+(0.5*N)+","+(2*O)+"ZM"+(2.5*N)+","+(O+8)+"V"+(2*O-8)+"M"+(4.5*N)+","+(O+8)+"V"+(2*O-8);}function J(){if(!c.empty()){c.extent(d);}z.data([c.empty()?s.domain():d]).each(function(L,M){var N=s(L[0])-s.range()[0],O=y-s(L[1]);d3.select(this).select(".left").attr("width",N<0?0:N);d3.select(this).select(".right").attr("x",s(L[1])).attr("width",O<0?0:O);});}function H(M){d=c.empty()?null:c.extent();var L=c.empty()?s.domain():c.extent();h.brush({extent:L,brush:c});J();if(M){h.onBrush(L);}}});l.renderEnd("focus immediate");return e;}e.dispatch=h;e.content=g;e.brush=c;e.xAxis=t;e.yAxis=v;e.options=a.utils.optionsFunc.bind(e);e._options=Object.create({},{width:{get:function(){return r;},set:function(w){r=w;}},height:{get:function(){return j;},set:function(w){j=w;}},showXAxis:{get:function(){return n;},set:function(w){n=w;}},showYAxis:{get:function(){return o;},set:function(w){o=w;}},brushExtent:{get:function(){return d;},set:function(w){d=w;}},syncBrushing:{get:function(){return p;},set:function(w){p=w;}},margin:{get:function(){return k;},set:function(w){k.top=w.top!==undefined?w.top:k.top;k.right=w.right!==undefined?w.right:k.right;k.bottom=w.bottom!==undefined?w.bottom:k.bottom;k.left=w.left!==undefined?w.left:k.left;}},duration:{get:function(){return i;},set:function(w){i=w;l.reset(i);g.duration(i);t.duration(i);v.duration(i);}},color:{get:function(){return f;},set:function(w){f=a.utils.getColor(w);g.color(f);}},interpolate:{get:function(){return g.interpolate();},set:function(w){g.interpolate(w);}},xTickFormat:{get:function(){return t.tickFormat();},set:function(w){t.tickFormat(w);}},yTickFormat:{get:function(){return v.tickFormat();},set:function(w){v.tickFormat(w);}},x:{get:function(){return g.x();},set:function(w){g.x(w);}},y:{get:function(){return g.y();},set:function(w){g.y(w);}},rightAlignYAxis:{get:function(){return m;},set:function(w){m=w;v.orient(m?"right":"left");}}});a.utils.inheritOptions(e,g);a.utils.initOptions(e);return e;};a.models.forceDirectedGraph=function(){var q={top:2,right:0,bottom:2,left:0},x=400,m=32,g=null,h=d3.dispatch("renderEnd"),f=a.utils.getColor(["#000"]),w=a.models.tooltip(),r=null,p=0.1,i=0.9,n=30,d=-120,l=0.1,v=0.8,c=0.1,t=5,s=function(y){},o=function(y){},j=d3.functor(0),k=d3.functor(0);var u=a.utils.renderWatch(h);function e(y){u.reset();y.each(function(B){g=d3.select(this);a.utils.initSVG(g);var A=a.utils.availableWidth(x,g,q),z=a.utils.availableHeight(m,g,q);g.attr("width",A).attr("height",z);if(!B||!B.links||!B.nodes){a.utils.noData(e,g);return e;}else{g.selectAll(".nv-noData").remove();}g.selectAll("*").remove();var F=new Set();B.nodes.forEach(function(H){var G=Object.keys(H);G.forEach(function(I){F.add(I);});});var C=d3.layout.force().nodes(B.nodes).links(B.links).size([A,z]).linkStrength(p).friction(i).linkDistance(n).charge(d).gravity(l).theta(v).alpha(c).start();var D=g.selectAll(".link").data(B.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",function(G){return Math.sqrt(G.value);});var E=g.selectAll(".node").data(B.nodes).enter().append("g").attr("class","nv-force-node").call(C.drag);E.append("circle").attr("r",t).style("fill",function(G){return f(G);}).on("mouseover",function(G){g.select(".nv-series-"+G.seriesIndex+" .nv-distx-"+G.pointIndex).attr("y1",G.py);g.select(".nv-series-"+G.seriesIndex+" .nv-disty-"+G.pointIndex).attr("x2",G.px);var H=f(G);G.series=[];F.forEach(function(I){G.series.push({color:H,key:I,value:G[I]});});w.data(G).hidden(false);}).on("mouseout",function(G){w.hidden(true);});w.headerFormatter(function(G){return"Node";});o(D);s(E);C.on("tick",function(){D.attr("x1",function(G){return G.source.x;}).attr("y1",function(G){return G.source.y;}).attr("x2",function(G){return G.target.x;}).attr("y2",function(G){return G.target.y;});E.attr("transform",function(G){return"translate("+G.x+", "+G.y+")";});});});return e;}e.options=a.utils.optionsFunc.bind(e);e._options=Object.create({},{width:{get:function(){return x;},set:function(y){x=y;}},height:{get:function(){return m;},set:function(y){m=y;}},linkStrength:{get:function(){return p;},set:function(y){p=y;}},friction:{get:function(){return i;},set:function(y){i=y;}},linkDist:{get:function(){return n;},set:function(y){n=y;}},charge:{get:function(){return d;},set:function(y){d=y;}},gravity:{get:function(){return l;},set:function(y){l=y;}},theta:{get:function(){return v;},set:function(y){v=y;}},alpha:{get:function(){return c;},set:function(y){c=y;}},radius:{get:function(){return t;},set:function(y){t=y;}},x:{get:function(){return j;},set:function(y){j=d3.functor(y);}},y:{get:function(){return k;},set:function(y){k=d3.functor(y);}},margin:{get:function(){return q;},set:function(y){q.top=y.top!==undefined?y.top:q.top;q.right=y.right!==undefined?y.right:q.right;q.bottom=y.bottom!==undefined?y.bottom:q.bottom;q.left=y.left!==undefined?y.left:q.left;}},color:{get:function(){return f;},set:function(y){f=a.utils.getColor(y);}},noData:{get:function(){return r;},set:function(y){r=y;}},nodeExtras:{get:function(){return s;},set:function(y){s=y;}},linkExtras:{get:function(){return o;},set:function(y){o=y;}}});e.dispatch=h;e.tooltip=w;a.utils.initOptions(e);return e;};a.models.furiousLegend=function(){var k={top:5,right:0,bottom:5,left:0},r=400,i=20,h=function(s){return s.key;},j=function(s){return s;},e=a.utils.getColor(),l=20,c=true,m=28,o=true,p=true,n=false,g=false,f=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),q="classic";function d(s){s.each(function(z){var v=r-k.left-k.right,x=d3.select(this);a.utils.initSVG(x);var P=x.selectAll("g.nv-legend").data([z]);var B=P.enter().append("g").attr("class","nvd3 nv-legend").append("g");var A=P.select("g");P.attr("transform","translate("+k.left+","+k.top+")");var H=A.selectAll(".nv-series").data(function(T){if(q!="furious"){return T;}return T.filter(function(U){return g?true:!U.disengaged;});});var J=H.enter().append("g").attr("class","nv-series");var L;if(q=="classic"){J.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);L=H.select("circle");}else{if(q=="furious"){J.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3);L=H.select("rect");J.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var I=H.select(".nv-check-box");I.each(function(T,U){d3.select(this).selectAll("path").attr("stroke",u(T,U));});}}J.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var M=H.select("text.nv-legend-text");H.on("mouseover",function(T,U){f.legendMouseover(T,U);}).on("mouseout",function(T,U){f.legendMouseout(T,U);}).on("click",function(T,W){f.legendClick(T,W);var U=H.data();if(p){if(q=="classic"){if(n){U.forEach(function(X){X.disabled=true;});T.disabled=false;}else{T.disabled=!T.disabled;if(U.every(function(X){return X.disabled;})){U.forEach(function(X){X.disabled=false;});}}}else{if(q=="furious"){if(g){T.disengaged=!T.disengaged;T.userDisabled=T.userDisabled==undefined?!!T.disabled:T.userDisabled;T.disabled=T.disengaged||T.userDisabled;}else{if(!g){T.disabled=!T.disabled;T.userDisabled=T.disabled;var V=U.filter(function(X){return !X.disengaged;});if(V.every(function(X){return X.userDisabled;})){U.forEach(function(X){X.disabled=X.userDisabled=false;});}}}}}f.stateChange({disabled:U.map(function(X){return !!X.disabled;}),disengaged:U.map(function(X){return !!X.disengaged;})});}}).on("dblclick",function(T,V){if(q=="furious"&&g){return;}f.legendDblclick(T,V);if(p){var U=H.data();U.forEach(function(W){W.disabled=true;if(q=="furious"){W.userDisabled=W.disabled;}});T.disabled=false;if(q=="furious"){T.userDisabled=T.disabled;}f.stateChange({disabled:U.map(function(W){return !!W.disabled;})});}});H.classed("nv-disabled",function(T){return T.userDisabled;});H.exit().remove();M.attr("fill",u).text(function(T){return j(h(T));});var O;switch(q){case"furious":O=23;break;case"classic":O=20;}if(c){var N=[];H.each(function(T,V){var W;if(j(h(T))&&j(h(T)).length>l){var Y=j(h(T)).substring(0,l);W=d3.select(this).select("text").text(Y+"...");d3.select(this).append("svg:title").text(j(h(T)));}else{W=d3.select(this).select("text");}var X;try{X=W.node().getComputedTextLength();if(X<=0){throw Error();}}catch(U){X=a.utils.calcApproxTextWidth(W);}N.push(X+m);});var K=0;var E=0;var w=[];while(E<v&&K<N.length){w[K]=N[K];E+=N[K++];}if(K===0){K=1;}while(E>v&&K>1){w=[];K--;for(var D=0;D<N.length;D++){if(N[D]>(w[D%K]||0)){w[D%K]=N[D];}}E=w.reduce(function(W,U,V,T){return W+U;});}var R=[];for(var C=0,y=0;C<K;C++){R[C]=y;y+=w[C];}H.attr("transform",function(T,U){return"translate("+R[U%K]+","+(5+Math.floor(U/K)*O)+")";});if(o){A.attr("transform","translate("+(r-k.right-E)+","+k.top+")");}else{A.attr("transform","translate(0,"+k.top+")");}i=k.top+k.bottom+(Math.ceil(N.length/K)*O);}else{var S=5,G=5,F=0,Q;H.attr("transform",function(T,U){var V=d3.select(this).select("text").node().getComputedTextLength()+m;Q=G;if(r<k.left+k.right+Q+V){G=Q=5;S+=O;}G+=V;if(G>F){F=G;}return"translate("+Q+","+S+")";});A.attr("transform","translate("+(r-k.right-F)+","+k.top+")");i=k.top+k.bottom+S+15;}if(q=="furious"){L.attr("width",function(T,U){return M[0][U].getComputedTextLength()+27;}).attr("height",18).attr("y",-9).attr("x",-15);}L.style("fill",t).style("stroke",function(T,U){return T.color||e(T,U);});});function u(v,w){if(q!="furious"){return"#000";}if(g){return v.disengaged?e(v,w):"#fff";}else{if(!g){return !!v.disabled?e(v,w):"#fff";}}}function t(v,w){if(g&&q=="furious"){return v.disengaged?"#fff":e(v,w);}else{return !!v.disabled?"#fff":e(v,w);}}return d;}d.dispatch=f;d.options=a.utils.optionsFunc.bind(d);d._options=Object.create({},{width:{get:function(){return r;},set:function(s){r=s;}},height:{get:function(){return i;},set:function(s){i=s;}},key:{get:function(){return h;},set:function(s){h=s;}},keyFormatter:{get:function(){return j;},set:function(s){j=s;}},align:{get:function(){return c;},set:function(s){c=s;}},rightAlign:{get:function(){return o;},set:function(s){o=s;}},maxKeyLength:{get:function(){return l;},set:function(s){l=s;}},padding:{get:function(){return m;},set:function(s){m=s;}},updateState:{get:function(){return p;},set:function(s){p=s;}},radioButtonMode:{get:function(){return n;},set:function(s){n=s;}},expanded:{get:function(){return g;},set:function(s){g=s;}},vers:{get:function(){return q;},set:function(s){q=s;}},margin:{get:function(){return k;},set:function(s){k.top=s.top!==undefined?s.top:k.top;k.right=s.right!==undefined?s.right:k.right;k.bottom=s.bottom!==undefined?s.bottom:k.bottom;k.left=s.left!==undefined?s.left:k.left;}},color:{get:function(){return e;},set:function(s){e=a.utils.getColor(s);}}});a.utils.initOptions(d);return d;};a.models.historicalBar=function(){var o={top:0,right:0,bottom:0,left:0},r=null,l=null,m=Math.floor(Math.random()*10000),f=null,s=d3.scale.linear(),v=d3.scale.linear(),j=function(x){return x.x;},k=function(x){return x.y;},h=[],i=[0],p=false,d=true,e=a.utils.defaultColor(),t,w,u,z,g=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),n=true;var q=a.utils.renderWatch(g,0);function c(x){x.each(function(C){q.reset();f=d3.select(this);var A=a.utils.availableWidth(r,f,o),y=a.utils.availableHeight(l,f,o);a.utils.initSVG(f);s.domain(t||d3.extent(C[0].values.map(j).concat(h)));if(p){s.range(u||[A*0.5/C[0].values.length,A*(C[0].values.length-0.5)/C[0].values.length]);}else{s.range(u||[0,A]);}v.domain(w||d3.extent(C[0].values.map(k).concat(i))).range(z||[y,0]);if(s.domain()[0]===s.domain()[1]){s.domain()[0]?s.domain([s.domain()[0]-s.domain()[0]*0.01,s.domain()[1]+s.domain()[1]*0.01]):s.domain([-1,1]);}if(v.domain()[0]===v.domain()[1]){v.domain()[0]?v.domain([v.domain()[0]+v.domain()[0]*0.01,v.domain()[1]-v.domain()[1]*0.01]):v.domain([-1,1]);}var G=f.selectAll("g.nv-wrap.nv-historicalBar-"+m).data([C[0].values]);var H=G.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+m);var D=H.append("defs");var F=H.append("g");var E=G.select("g");F.append("g").attr("class","nv-bars");G.attr("transform","translate("+o.left+","+o.top+")");f.on("click",function(I,J){g.chartClick({data:I,index:J,pos:d3.event,id:m});});D.append("clipPath").attr("id","nv-chart-clip-path-"+m).append("rect");G.select("#nv-chart-clip-path-"+m+" rect").attr("width",A).attr("height",y);E.attr("clip-path",d?"url(#nv-chart-clip-path-"+m+")":"");var B=G.select(".nv-bars").selectAll(".nv-bar").data(function(I){return I;},function(I,J){return j(I,J);});B.exit().remove();B.enter().append("rect").attr("x",0).attr("y",function(I,J){return a.utils.NaNtoZero(v(Math.max(0,k(I,J))));}).attr("height",function(I,J){return a.utils.NaNtoZero(Math.abs(v(k(I,J))-v(0)));}).attr("transform",function(I,J){return"translate("+(s(j(I,J))-A/C[0].values.length*0.45)+",0)";}).on("mouseover",function(I,J){if(!n){return;}d3.select(this).classed("hover",true);g.elementMouseover({data:I,index:J,color:d3.select(this).style("fill")});}).on("mouseout",function(I,J){if(!n){return;}d3.select(this).classed("hover",false);g.elementMouseout({data:I,index:J,color:d3.select(this).style("fill")});}).on("mousemove",function(I,J){if(!n){return;}g.elementMousemove({data:I,index:J,color:d3.select(this).style("fill")});}).on("click",function(I,K){if(!n){return;}var J=this;g.elementClick({data:I,index:K,color:d3.select(this).style("fill"),event:d3.event,element:J});d3.event.stopPropagation();}).on("dblclick",function(I,J){if(!n){return;}g.elementDblClick({data:I,index:J,color:d3.select(this).style("fill")});d3.event.stopPropagation();});B.attr("fill",function(I,J){return e(I,J);}).attr("class",function(I,J,K){return(k(I,J)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+K+"-"+J;}).watchTransition(q,"bars").attr("transform",function(I,J){return"translate("+(s(j(I,J))-A/C[0].values.length*0.45)+",0)";}).attr("width",(A/C[0].values.length)*0.9);B.watchTransition(q,"bars").attr("y",function(I,J){var K=k(I,J)<0?v(0):v(0)-v(k(I,J))<1?v(0)-1:v(k(I,J));return a.utils.NaNtoZero(K);}).attr("height",function(I,J){return a.utils.NaNtoZero(Math.max(Math.abs(v(k(I,J))-v(0)),1));});});q.renderEnd("historicalBar immediate");return c;}c.highlightPoint=function(y,x){f.select(".nv-bars .nv-bar-0-"+y).classed("hover",x);};c.clearHighlights=function(){f.select(".nv-bars .nv-bar.hover").classed("hover",false);};c.dispatch=g;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return r;},set:function(x){r=x;}},height:{get:function(){return l;},set:function(x){l=x;}},forceX:{get:function(){return h;},set:function(x){h=x;}},forceY:{get:function(){return i;},set:function(x){i=x;}},padData:{get:function(){return p;},set:function(x){p=x;}},x:{get:function(){return j;},set:function(x){j=x;}},y:{get:function(){return k;},set:function(x){k=x;}},xScale:{get:function(){return s;},set:function(x){s=x;}},yScale:{get:function(){return v;},set:function(x){v=x;}},xDomain:{get:function(){return t;},set:function(x){t=x;}},yDomain:{get:function(){return w;},set:function(x){w=x;}},xRange:{get:function(){return u;},set:function(x){u=x;}},yRange:{get:function(){return z;},set:function(x){z=x;}},clipEdge:{get:function(){return d;},set:function(x){d=x;}},id:{get:function(){return m;},set:function(x){m=x;}},interactive:{get:function(){return n;},set:function(x){n=x;}},margin:{get:function(){return o;},set:function(x){o.top=x.top!==undefined?x.top:o.top;o.right=x.right!==undefined?x.right:o.right;o.bottom=x.bottom!==undefined?x.bottom:o.bottom;o.left=x.left!==undefined?x.left:o.left;}},color:{get:function(){return e;},set:function(x){e=a.utils.getColor(x);}}});a.utils.initOptions(c);return c;};a.models.historicalBarChart=function(c){var d=c||a.models.historicalBar(),B=a.models.axis(),D=a.models.axis(),k=a.models.legend(),j=a.interactiveGuideline(),u=a.models.tooltip();var l={top:30,right:90,bottom:50,left:90},m=null,f=a.utils.defaultColor(),z=null,i=null,q=false,r=true,s=true,p=false,w=false,A,C,t={},g=null,n=null,h=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),v=250;B.orient("bottom").tickPadding(7);D.orient((p)?"right":"left");u.duration(0).headerEnabled(false).valueFormatter(function(x,y){return D.tickFormat()(x,y);}).headerFormatter(function(x,y){return B.tickFormat()(x,y);});var o=a.utils.renderWatch(h,0);function e(x){x.each(function(H){o.reset();o.models(d);if(r){o.models(B);}if(s){o.models(D);}var G=d3.select(this),L=this;a.utils.initSVG(G);var E=a.utils.availableWidth(z,G,l),y=a.utils.availableHeight(i,G,l);e.update=function(){G.transition().duration(v).call(e);};e.container=this;t.disabled=H.map(function(N){return !!N.disabled;});if(!g){var K;g={};for(K in t){if(t[K] instanceof Array){g[K]=t[K].slice(0);}else{g[K]=t[K];}}}if(!H||!H.length||!H.filter(function(N){return N.values.length;}).length){a.utils.noData(e,G);return e;}else{G.selectAll(".nv-noData").remove();}A=d.xScale();C=d.yScale();var M=G.selectAll("g.nv-wrap.nv-historicalBarChart").data([H]);var J=M.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");var I=M.select("g");J.append("g").attr("class","nv-x nv-axis");J.append("g").attr("class","nv-y nv-axis");J.append("g").attr("class","nv-barsWrap");J.append("g").attr("class","nv-legendWrap");J.append("g").attr("class","nv-interactive");if(!q){I.select(".nv-legendWrap").selectAll("*").remove();}else{k.width(E);I.select(".nv-legendWrap").datum(H).call(k);if(!m&&k.height()!==l.top){l.top=k.height();y=a.utils.availableHeight(i,G,l);}M.select(".nv-legendWrap").attr("transform","translate(0,"+(-l.top)+")");}M.attr("transform","translate("+l.left+","+l.top+")");if(p){I.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)");}if(w){j.width(E).height(y).margin({left:l.left,top:l.top}).svgContainer(G).xScale(A);M.select(".nv-interactive").call(j);}d.width(E).height(y).color(H.map(function(N,O){return N.color||f(N,O);}).filter(function(N,O){return !H[O].disabled;}));var F=I.select(".nv-barsWrap").datum(H.filter(function(N){return !N.disabled;}));F.transition().call(d);if(r){B.scale(A)._ticks(a.utils.calcTicksX(E/100,H)).tickSize(-y,0);I.select(".nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")");I.select(".nv-x.nv-axis").transition().call(B);}if(s){D.scale(C)._ticks(a.utils.calcTicksY(y/36,H)).tickSize(-E,0);I.select(".nv-y.nv-axis").transition().call(D);}j.dispatch.on("elementMousemove",function(O){d.clearHighlights();var R,P,Q,N=[];H.filter(function(U,T){U.seriesIndex=T;return !U.disabled;}).forEach(function(V,T){P=a.interactiveBisect(V.values,O.pointXValue,e.x());d.highlightPoint(P,true);var U=V.values[P];if(U===undefined){return;}if(R===undefined){R=U;}if(Q===undefined){Q=e.xScale()(e.x()(U,P));}N.push({key:V.key,value:e.y()(U,P),color:f(V,V.seriesIndex),data:V.values[P]});});var S=B.tickFormat()(e.x()(R,P));j.tooltip.valueFormatter(function(T,U){return D.tickFormat()(T);}).data({value:S,index:P,series:N})();j.renderGuideLine(Q);});j.dispatch.on("elementMouseout",function(N){h.tooltipHide();d.clearHighlights();});k.dispatch.on("legendClick",function(N,O){N.disabled=!N.disabled;if(!H.filter(function(P){return !P.disabled;}).length){H.map(function(P){P.disabled=false;M.selectAll(".nv-series").classed("disabled",false);return P;});}t.disabled=H.map(function(P){return !!P.disabled;});h.stateChange(t);x.transition().call(e);});k.dispatch.on("legendDblclick",function(N){H.forEach(function(O){O.disabled=true;});N.disabled=false;t.disabled=H.map(function(O){return !!O.disabled;});h.stateChange(t);e.update();});h.on("changeState",function(N){if(typeof N.disabled!=="undefined"){H.forEach(function(P,O){P.disabled=N.disabled[O];});t.disabled=N.disabled;}e.update();});});o.renderEnd("historicalBarChart immediate");return e;}d.dispatch.on("elementMouseover.tooltip",function(x){x.series={key:e.x()(x.data),value:e.y()(x.data),color:x.color};u.data(x).hidden(false);});d.dispatch.on("elementMouseout.tooltip",function(x){u.hidden(true);});d.dispatch.on("elementMousemove.tooltip",function(x){u();});e.dispatch=h;e.bars=d;e.legend=k;e.xAxis=B;e.yAxis=D;e.interactiveLayer=j;e.tooltip=u;e.options=a.utils.optionsFunc.bind(e);e._options=Object.create({},{width:{get:function(){return z;},set:function(x){z=x;}},height:{get:function(){return i;},set:function(x){i=x;}},showLegend:{get:function(){return q;},set:function(x){q=x;}},showXAxis:{get:function(){return r;},set:function(x){r=x;}},showYAxis:{get:function(){return s;},set:function(x){s=x;}},defaultState:{get:function(){return g;},set:function(x){g=x;}},noData:{get:function(){return n;},set:function(x){n=x;}},margin:{get:function(){return l;},set:function(x){if(x.top!==undefined){l.top=x.top;m=x.top;}l.right=x.right!==undefined?x.right:l.right;l.bottom=x.bottom!==undefined?x.bottom:l.bottom;l.left=x.left!==undefined?x.left:l.left;}},color:{get:function(){return f;},set:function(x){f=a.utils.getColor(x);k.color(f);d.color(f);}},duration:{get:function(){return v;},set:function(x){v=x;o.reset(v);D.duration(v);B.duration(v);}},rightAlignYAxis:{get:function(){return p;},set:function(x){p=x;D.orient((x)?"right":"left");}},useInteractiveGuideline:{get:function(){return w;},set:function(x){w=x;if(x===true){e.interactive(false);}}}});a.utils.inheritOptions(e,d);a.utils.initOptions(e);return e;};a.models.ohlcBarChart=function(){var c=a.models.historicalBarChart(a.models.ohlcBar());c.useInteractiveGuideline(true);c.interactiveLayer.tooltip.contentGenerator(function(g){var f=g.series[0].data;var e=f.open<f.close?"2ca02c":"d62728";return'<h3 style="color: #'+e+'">'+g.value+"</h3><table><tr><td>open:</td><td>"+c.yAxis.tickFormat()(f.open)+"</td></tr><tr><td>close:</td><td>"+c.yAxis.tickFormat()(f.close)+"</td></tr><tr><td>high</td><td>"+c.yAxis.tickFormat()(f.high)+"</td></tr><tr><td>low:</td><td>"+c.yAxis.tickFormat()(f.low)+"</td></tr></table>";});return c;};a.models.candlestickBarChart=function(){var c=a.models.historicalBarChart(a.models.candlestickBar());c.useInteractiveGuideline(true);c.interactiveLayer.tooltip.contentGenerator(function(g){var f=g.series[0].data;var e=f.open<f.close?"2ca02c":"d62728";return'<h3 style="color: #'+e+'">'+g.value+"</h3><table><tr><td>open:</td><td>"+c.yAxis.tickFormat()(f.open)+"</td></tr><tr><td>close:</td><td>"+c.yAxis.tickFormat()(f.close)+"</td></tr><tr><td>high</td><td>"+c.yAxis.tickFormat()(f.high)+"</td></tr><tr><td>low:</td><td>"+c.yAxis.tickFormat()(f.low)+"</td></tr></table>";});return c;};a.models.legend=function(){var l={top:5,right:0,bottom:5,left:0},s=400,j=20,i=function(t){return t.key;},k=function(t){return t;},e=a.utils.getColor(),m=40,c=true,n=32,p=true,q=true,g=true,o=false,h=false,f=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),r="classic";function d(t){t.each(function(B){var x=s-l.left-l.right,z=d3.select(this);a.utils.initSVG(z);var S=z.selectAll("g.nv-legend").data([B]);var D=S.enter().append("g").attr("class","nvd3 nv-legend").append("g");var C=S.select("g");if(p){S.attr("transform","translate("+(-l.right)+","+l.top+")");}else{S.attr("transform","translate("+l.left+","+l.top+")");}var J=C.selectAll(".nv-series").data(function(W){if(r!="furious"){return W;}return W.filter(function(X){return h?true:!X.disengaged;});});var M=J.enter().append("g").attr("class","nv-series");var O;var R;switch(r){case"furious":R=23;break;case"classic":R=20;}if(r=="classic"){M.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);M.append("path").style({"stroke-width":2,stroke:"white"}).attr({"class":"legend-checkmark",fill:"none",d:"M-4 0 0 3.5 4 -4"});O=J.select(".nv-legend-symbol");}else{if(r=="furious"){M.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3);O=J.select(".nv-legend-symbol");M.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var L=J.select(".nv-check-box");L.each(function(W,X){d3.select(this).selectAll("path").attr("stroke",w(W,X));});}}M.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var P=J.select("text.nv-legend-text");J.on("mouseover",function(W,X){f.legendMouseover(W,X);}).on("mouseout",function(W,X){f.legendMouseout(W,X);}).on("click",function(W,Z){f.legendClick(W,Z);var X=J.data();if(q){if(r=="classic"){if(o){X.forEach(function(ab){ab.disabled=true;});W.disabled=false;}else{W.disabled=!W.disabled;__commonUtils.allLengendDisabled=false;if(X.every(function(ab){return ab.disabled;})){__commonUtils.allLengendDisabled=true;var aa=document.getElementsByClassName("nv-stepline");if(aa.length>0){aa[0].remove();}}}}else{if(r=="furious"){if(h){W.disengaged=!W.disengaged;W.userDisabled=W.userDisabled==undefined?!!W.disabled:W.userDisabled;W.disabled=W.disengaged||W.userDisabled;}else{if(!h){W.disabled=!W.disabled;W.userDisabled=W.disabled;var Y=X.filter(function(ab){return !ab.disengaged;});if(Y.every(function(ab){return ab.userDisabled;})){X.forEach(function(ab){ab.disabled=ab.userDisabled=false;});}}}}}f.stateChange({disabled:X.map(function(ab){return !!ab.disabled;}),disengaged:X.map(function(ab){return !!ab.disengaged;})});}}).on("dblclick",function(W,Y){if(g){if(r=="furious"&&h){return;}f.legendDblclick(W,Y);if(q){var X=J.data();X.forEach(function(Z){Z.disabled=true;if(r=="furious"){Z.userDisabled=Z.disabled;}});W.disabled=false;if(r=="furious"){W.userDisabled=W.disabled;}f.stateChange({disabled:X.map(function(Z){return !!Z.disabled;})});}}});J.classed("nv-disabled",function(W){return W.userDisabled;});J.exit().remove();P.attr("fill",w).text(function(W){return k(i(W));});var G=0;if(c){var Q=[];J.each(function(W,Y){var Z;if(k(i(W))&&k(i(W)).length>m){var ab=k(i(W)).substring(0,m);Z=d3.select(this).select("text").text(ab+"...");d3.select(this).append("svg:title").text(k(i(W)));}else{Z=d3.select(this).select("text");}var aa;try{aa=Z.node().getComputedTextLength();if(aa<=0){throw Error();}}catch(X){aa=a.utils.calcApproxTextWidth(Z);}Q.push(aa+n);});var N=0;var y=[];G=0;while(G<x&&N<Q.length){y[N]=Q[N];G+=Q[N++];}if(N===0){N=1;}while(G>x&&N>1){y=[];N--;for(var F=0;F<Q.length;F++){if(Q[F]>(y[F%N]||0)){y[F%N]=Q[F];}}G=y.reduce(function(Z,X,Y,W){return Z+X;});}var U=[];for(var E=0,A=0;E<N;E++){U[E]=A;A+=y[E];}J.attr("transform",function(W,X){return"translate("+U[X%N]+","+(5+Math.floor(X/N)*R)+")";});if(p){C.attr("transform","translate("+(s-l.right-G)+","+l.top+")");}else{C.attr("transform","translate(0,"+l.top+")");}j=l.top+l.bottom+(Math.ceil(Q.length/N)*R);}else{var V=5,I=5,H=0,T;J.attr("transform",function(W,X){var Y=d3.select(this).select("text").node().getComputedTextLength()+n;T=I;if(s<l.left+l.right+T+Y){I=T=5;V+=R;}I+=Y;if(I>H){H=I;}if(G<T+H){G=T+H;}return"translate("+T+","+V+")";});C.attr("transform","translate("+(s-l.right-H)+","+l.top+")");j=l.top+l.bottom+V+15;}if(r=="furious"){O.attr("width",function(W,X){return P[0][X].getComputedTextLength()+27;}).attr("height",18).attr("y",-9).attr("x",-15);D.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0);var K=C.select(".nv-legend-bg");K.transition().duration(300).attr("x",-R).attr("width",G+R-12).attr("height",j+10).attr("y",-l.top-10).attr("opacity",h?1:0);}O.style("fill",u).style("fill-opacity",v).style("stroke",u);});function w(x,y){if(r!="furious"){return"inherit";}if(h){return x.disengaged?"#000":"#fff";}else{if(!h){if(!x.color){x.color=e(x,y);}return !!x.disabled?x.color:"#fff";}}}function u(x,y){if(h&&r=="furious"){return x.disengaged?"#eee":x.color||e(x,y);}else{return x.color||e(x,y);}}function v(x,y){if(h&&r=="furious"){return 1;}else{if(!!x.disabled){this.nextElementSibling.style.display="none";return 0;}else{this.nextElementSibling.style.display="";return 1;}}}return d;}d.dispatch=f;d.options=a.utils.optionsFunc.bind(d);d._options=Object.create({},{width:{get:function(){return s;},set:function(t){s=t;}},height:{get:function(){return j;},set:function(t){j=t;}},key:{get:function(){return i;},set:function(t){i=t;}},keyFormatter:{get:function(){return k;},set:function(t){k=t;}},align:{get:function(){return c;},set:function(t){c=t;}},maxKeyLength:{get:function(){return m;},set:function(t){m=t;}},rightAlign:{get:function(){return p;},set:function(t){p=t;}},padding:{get:function(){return n;},set:function(t){n=t;}},updateState:{get:function(){return q;},set:function(t){q=t;}},enableDoubleClick:{get:function(){return g;},set:function(t){g=t;}},radioButtonMode:{get:function(){return o;},set:function(t){o=t;}},expanded:{get:function(){return h;},set:function(t){h=t;}},vers:{get:function(){return r;},set:function(t){r=t;}},margin:{get:function(){return l;},set:function(t){l.top=t.top!==undefined?t.top:l.top;l.right=t.right!==undefined?t.right:l.right;l.bottom=t.bottom!==undefined?t.bottom:l.bottom;l.left=t.left!==undefined?t.left:l.left;}},color:{get:function(){return e;},set:function(t){e=a.utils.getColor(t);}}});a.utils.initOptions(d);return d;};a.models.line=function(){var q=a.models.scatter();var o={top:0,right:0,bottom:0,left:0},s=960,l=500,f=null,r=1.5,e=a.utils.defaultColor(),j=function(x){return x.x;},k=function(x){return x.y;},g=function(x,y){return !isNaN(k(x,y))&&k(x,y)!==null;},n=function(x){return x.area;},d=false,t,v,m="linear",i=250,h=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");q.pointSize(16).pointDomain([16,256]);var u,w,p=a.utils.renderWatch(h,i);function c(x){p.reset();p.models(q);x.each(function(B){f=d3.select(this);var A=a.utils.availableWidth(s,f,o),z=a.utils.availableHeight(l,f,o);a.utils.initSVG(f);t=q.xScale();v=q.yScale();u=u||t;w=w||v;var I=f.selectAll("g.nv-wrap.nv-line").data([B]);var J=I.enter().append("g").attr("class","nvd3 nv-wrap nv-line");var C=J.append("defs");var E=J.append("g");var D=I.select("g");E.append("g").attr("class","nv-groups");E.append("g").attr("class","nv-scatterWrap");I.attr("transform","translate("+o.left+","+o.top+")");q.width(A).height(z);var H=I.select(".nv-scatterWrap");H.call(q);C.append("clipPath").attr("id","nv-edge-clip-"+q.id()).append("rect");I.select("#nv-edge-clip-"+q.id()+" rect").attr("width",A).attr("height",(z>0)?z:0);D.attr("clip-path",d?"url(#nv-edge-clip-"+q.id()+")":"");H.attr("clip-path",d?"url(#nv-edge-clip-"+q.id()+")":"");var F=I.select(".nv-groups").selectAll(".nv-group").data(function(K){return K;},function(K){return K.key;});F.enter().append("g").style("stroke-opacity",1e-06).style("stroke-width",function(K){return K.strokeWidth||r;}).style("fill-opacity",1e-06);F.exit().remove();F.attr("class",function(K,L){return(K.classed||"")+" nv-group nv-series-"+L;}).classed("hover",function(K){return K.hover;}).style("fill",function(K,L){return e(K,L);}).style("stroke",function(K,L){return e(K,L);});F.watchTransition(p,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(K){return K.fillOpacity||0.5;});var y=F.selectAll("path.nv-area").data(function(K){return n(K)?[K]:[];});y.enter().append("path").attr("class","nv-area").attr("d",function(K){return d3.svg.area().interpolate(m).defined(g).x(function(L,M){return a.utils.NaNtoZero(u(j(L,M)));}).y0(function(L,M){return a.utils.NaNtoZero(w(k(L,M)));}).y1(function(L,M){return w(v.domain()[0]<=0?v.domain()[1]>=0?0:v.domain()[1]:v.domain()[0]);}).apply(this,[K.values]);});F.exit().selectAll("path.nv-area").remove();y.watchTransition(p,"line: areaPaths").attr("d",function(K){return d3.svg.area().interpolate(m).defined(g).x(function(L,M){return a.utils.NaNtoZero(t(j(L,M)));}).y0(function(L,M){return a.utils.NaNtoZero(v(k(L,M)));}).y1(function(L,M){return v(v.domain()[0]<=0?v.domain()[1]>=0?0:v.domain()[1]:v.domain()[0]);}).apply(this,[K.values]);});var G=F.selectAll("path.nv-line").data(function(K){return[K.values];});G.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(m).defined(g).x(function(K,L){return a.utils.NaNtoZero(u(j(K,L)));}).y(function(K,L){return a.utils.NaNtoZero(w(k(K,L)));}));G.watchTransition(p,"line: linePaths").attr("d",d3.svg.line().interpolate(m).defined(g).x(function(K,L){return a.utils.NaNtoZero(t(j(K,L)));}).y(function(K,L){return a.utils.NaNtoZero(v(k(K,L)));}));u=t.copy();w=v.copy();});p.renderEnd("line immediate");return c;}c.dispatch=h;c.scatter=q;q.dispatch.on("elementClick",function(){h.elementClick.apply(this,arguments);});q.dispatch.on("elementMouseover",function(){h.elementMouseover.apply(this,arguments);});q.dispatch.on("elementMouseout",function(){h.elementMouseout.apply(this,arguments);});c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return s;},set:function(x){s=x;}},height:{get:function(){return l;},set:function(x){l=x;}},defined:{get:function(){return g;},set:function(x){g=x;}},interpolate:{get:function(){return m;},set:function(x){m=x;}},clipEdge:{get:function(){return d;},set:function(x){d=x;}},margin:{get:function(){return o;},set:function(x){o.top=x.top!==undefined?x.top:o.top;o.right=x.right!==undefined?x.right:o.right;o.bottom=x.bottom!==undefined?x.bottom:o.bottom;o.left=x.left!==undefined?x.left:o.left;}},duration:{get:function(){return i;},set:function(x){i=x;p.reset(i);q.duration(i);}},isArea:{get:function(){return n;},set:function(x){n=d3.functor(x);}},x:{get:function(){return j;},set:function(x){j=x;q.x(x);}},y:{get:function(){return k;},set:function(x){k=x;q.y(x);}},color:{get:function(){return e;},set:function(x){e=a.utils.getColor(x);q.color(e);}}});a.utils.inheritOptions(c,q);a.utils.initOptions(c);return c;};a.models.lineChart=function(){var o=a.models.line(),G=a.models.axis(),I=a.models.axis(),m=a.models.legend(),l=a.interactiveGuideline(),C=a.models.tooltip(),h=a.models.focus(a.models.line());var p={top:30,right:20,bottom:50,left:60},q=null,d=a.utils.defaultColor(),E=null,k=null,u=true,n="bottom",v=true,w=true,t=false,D=false,F,H,i=false,z=a.utils.state(),e=null,r=null,f=d3.dispatch("stateChange","changeState","renderEnd"),g=250;G.orient("bottom").tickPadding(7);I.orient(t?"right":"left");o.clipEdge(true).duration(0);C.valueFormatter(function(x,y){return I.tickFormat()(x,y);}).headerFormatter(function(x,y){return G.tickFormat()(x,y);});l.tooltip.valueFormatter(function(x,y){return I.tickFormat()(x,y);}).headerFormatter(function(x,y){return G.tickFormat()(x,y);});var s=a.utils.renderWatch(f,g);var A=function(x){return function(){return{active:x.map(function(y){return !y.disabled;})};};};var B=function(x){return function(y){if(y.active!==undefined){x.forEach(function(K,J){K.disabled=!y.active[J];});}};};var j=function(y,J){var x=[];for(var L=0;L<J.length;L+=1){if(J[L]&&!J[L].disabled&&J[L].values){for(var M=0;M<J[L].values.length;M+=1){if(J[L].values){x.push(J[L].values[M].y);}}}}var O=d3.min(x);var N=d3.max(x);var K=10;if(N-O<=50){K=5;}var Q=Math.floor(O/K)*K;var P=Math.ceil(N/K)*K;y.forceY([Q,P]);};function c(x){s.reset();s.models(o);if(v){s.models(G);}if(w){s.models(I);}x.each(function(M){var K=d3.select(this);a.utils.initSVG(K);var J=a.utils.availableWidth(E,K,p),y=a.utils.availableHeight(k,K,p)-(i?h.height():0);j(c,M);c.update=function(){if(g===0){K.call(c);}else{K.transition().duration(g).call(c);}};c.container=this;z.setter(B(M),c.update).getter(A(M)).update();z.disabled=M.map(function(Y){return !!Y.disabled;});if(!e){var R;e={};for(R in z){if(z[R] instanceof Array){e[R]=z[R].slice(0);}else{e[R]=z[R];}}}if(!M||!M.length||!M.filter(function(Y){return Y.values.length;}).length){a.utils.noData(c,K);return c;}else{K.selectAll(".nv-noData").remove();}h.dispatch.on("onBrush",function(Y){T(Y);});F=o.xScale();H=o.yScale();var X=K.selectAll("g.nv-wrap.nv-lineChart").data([M]);var Q=X.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g");var P=X.select("g");Q.append("g").attr("class","nv-legendWrap");var O=Q.append("g").attr("class","nv-focus");O.append("g").attr("class","nv-background").append("rect");O.append("g").attr("class","nv-x nv-axis");O.append("g").attr("class","nv-y nv-axis");O.append("g").attr("class","nv-linesWrap");O.append("g").attr("class","nv-interactive");var L=Q.append("g").attr("class","nv-focusWrap");if(!u){P.select(".nv-legendWrap").selectAll("*").remove();}else{m.width(J);P.select(".nv-legendWrap").datum(M).call(m);if(n==="bottom"){p.bottom=G.height()+m.height();y=a.utils.availableHeight(k,K,p);P.select(".nv-legendWrap").attr("transform","translate(0,"+(y+G.height())+")");}else{if(n==="top"){if(!q&&m.height()!==p.top){p.top=m.height();y=a.utils.availableHeight(k,K,p)-(i?h.height():0);}X.select(".nv-legendWrap").attr("transform","translate(0,"+(-p.top)+")");}}}X.attr("transform","translate("+p.left+","+p.top+")");if(t){P.select(".nv-y.nv-axis").attr("transform","translate("+J+",0)");}if(D){l.width(J).height(y).margin({left:p.left,top:p.top}).svgContainer(K).xScale(F);X.select(".nv-interactive").call(l);}P.select(".nv-focus .nv-background rect").attr("width",J).attr("height",y);o.width(J).height(y).color(M.map(function(Y,Z){return Y.color||d(Y,Z);}).filter(function(Y,Z){return !M[Z].disabled;}));var S=P.select(".nv-linesWrap").datum(M.filter(function(Y){return !Y.disabled;}));if(v){G.scale(F)._ticks(a.utils.calcTicksX(J/100,M)).tickSize(-y,0);}if(w){I.scale(H)._ticks(a.utils.calcTicksY(y/36,M)).tickSize(-J,0);}function V(){if(v){P.select(".nv-focus .nv-x.nv-axis").transition().duration(g).call(G);}}function W(){if(w){P.select(".nv-focus .nv-y.nv-axis").transition().duration(g).call(I);}}P.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+y+")");if(!i&&h.brush.extent()===null){S.call(o);V();W();}else{h.width(J);P.select(".nv-focusWrap").style("display",i?"initial":"none").attr("transform","translate(0,"+(y+p.bottom+h.margin().top)+")").call(h);var N=h.brush.empty()?h.xDomain():h.brush.extent();if(N!==null){T(N);}}m.dispatch.on("stateChange",function(Z){for(var Y in Z){z[Y]=Z[Y];}f.stateChange(z);c.update();});l.dispatch.on("elementMousemove",function(ab){o.clearHighlights();var af,ad,ae,Y=[];M.filter(function(aj,ai){aj.seriesIndex=ai;return !aj.disabled&&!aj.disableTooltip;}).forEach(function(an,ak){var aj=h.brush.extent()!==null?(h.brush.empty()?h.xScale().domain():h.brush.extent()):F.domain();var ai=an.values.filter(function(ao,ap){if(aj[0]<=aj[1]){return o.x()(ao,ap)>=aj[0]&&o.x()(ao,ap)<=aj[1];}else{return o.x()(ao,ap)>=aj[1]&&o.x()(ao,ap)<=aj[0];}});ad=a.interactiveBisect(ai,ab.pointXValue,o.x());var al=ai[ad];var am=c.y()(al,ad);if(am!==null){o.highlightPoint(ak,an.values.indexOf(al),true);}if(al===undefined){return;}if(af===undefined){af=al;}if(ae===undefined){ae=c.xScale()(c.x()(al,ad));}Y.push({key:an.key,ratio:an.ratio,value:am,color:d(an,an.seriesIndex),data:al});});if(Y.length>2){var ah=c.yScale().invert(ab.mouseY);var aa=Math.abs(c.yScale().domain()[0]-c.yScale().domain()[1]);var ag=0.03*aa;var ac=a.nearestValueIndex(Y.map(function(ai){return ai.value;}),ah,ag);if(ac!==null){Y[ac].highlight=true;}}var Z=function(ai,aj){return ai==null?"N/A":I.tickFormat()(ai);};l.tooltip.valueFormatter(l.tooltip.valueFormatter()||Z).data({value:c.x()(af,ad),index:ad,series:Y})();l.renderGuideLine(ae);});l.dispatch.on("elementClick",function(Z){var aa,Y=[];M.filter(function(ac,ab){ac.seriesIndex=ab;return !ac.disabled;}).forEach(function(ad){var ac=a.interactiveBisect(ad.values,Z.pointXValue,c.x());var ab=ad.values[ac];if(typeof ab==="undefined"){return;}if(typeof aa==="undefined"){aa=c.xScale()(c.x()(ab,ac));}var ae=c.yScale()(c.y()(ab,ac));Y.push({point:ab,pointIndex:ac,pos:[aa,ae],seriesIndex:ad.seriesIndex,series:ad});});o.dispatch.elementClick(Y);});l.dispatch.on("elementMouseout",function(Y){o.clearHighlights();});f.on("changeState",function(Y){if(typeof Y.disabled!=="undefined"&&M.length===Y.disabled.length){M.forEach(function(aa,Z){aa.disabled=Y.disabled[Z];});z.disabled=Y.disabled;}c.update();});function U(Y){var Z=+(Y=="e"),aa=Z?1:-1,ab=y/3;return"M"+(0.5*aa)+","+ab+"A6,6 0 0 "+Z+" "+(6.5*aa)+","+(ab+6)+"V"+(2*ab-6)+"A6,6 0 0 "+Z+" "+(0.5*aa)+","+(2*ab)+"ZM"+(2.5*aa)+","+(ab+8)+"V"+(2*ab-8)+"M"+(4.5*aa)+","+(ab+8)+"V"+(2*ab-8);}function T(Y){var Z=P.select(".nv-focus .nv-linesWrap").datum(M.filter(function(aa){return !aa.disabled;}).map(function(aa,ab){return{key:aa.key,area:aa.area,classed:aa.classed,values:aa.values.filter(function(ac,ad){return o.x()(ac,ad)>=Y[0]&&o.x()(ac,ad)<=Y[1];}),disableTooltip:aa.disableTooltip};}));Z.transition().duration(g).call(o);V();W();}});s.renderEnd("lineChart immediate");return c;}o.dispatch.on("elementMouseover.tooltip",function(x){if(!x.series.disableTooltip){C.data(x).hidden(false);}});o.dispatch.on("elementMouseout.tooltip",function(x){C.hidden(true);});c.dispatch=f;c.lines=o;c.legend=m;c.focus=h;c.xAxis=G;c.x2Axis=h.xAxis;c.yAxis=I;c.y2Axis=h.yAxis;c.interactiveLayer=l;c.tooltip=C;c.state=z;c.dispatch=f;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return E;},set:function(x){E=x;}},height:{get:function(){return k;},set:function(x){k=x;}},showLegend:{get:function(){return u;},set:function(x){u=x;}},legendPosition:{get:function(){return n;},set:function(x){n=x;}},showXAxis:{get:function(){return v;},set:function(x){v=x;}},showYAxis:{get:function(){return w;},set:function(x){w=x;}},defaultState:{get:function(){return e;},set:function(x){e=x;}},noData:{get:function(){return r;},set:function(x){r=x;}},focusEnable:{get:function(){return i;},set:function(x){i=x;}},focusHeight:{get:function(){return h.height();},set:function(x){h.height(x);}},focusShowAxisX:{get:function(){return h.showXAxis();},set:function(x){h.showXAxis(x);}},focusShowAxisY:{get:function(){return h.showYAxis();},set:function(x){h.showYAxis(x);}},brushExtent:{get:function(){return h.brushExtent();},set:function(x){h.brushExtent(x);}},focusMargin:{get:function(){return h.margin;},set:function(x){if(x.top!==undefined){p.top=x.top;q=x.top;}h.margin.right=x.right!==undefined?x.right:h.margin.right;h.margin.bottom=x.bottom!==undefined?x.bottom:h.margin.bottom;h.margin.left=x.left!==undefined?x.left:h.margin.left;}},margin:{get:function(){return p;},set:function(x){p.top=x.top!==undefined?x.top:p.top;p.right=x.right!==undefined?x.right:p.right;p.bottom=x.bottom!==undefined?x.bottom:p.bottom;p.left=x.left!==undefined?x.left:p.left;}},duration:{get:function(){return g;},set:function(x){g=x;s.reset(g);o.duration(g);h.duration(g);G.duration(g);I.duration(g);}},color:{get:function(){return d;},set:function(x){d=a.utils.getColor(x);m.color(d);o.color(d);h.color(d);}},interpolate:{get:function(){return o.interpolate();},set:function(x){o.interpolate(x);h.interpolate(x);}},xTickFormat:{get:function(){return G.tickFormat();},set:function(x){G.tickFormat(x);h.xTickFormat(x);}},yTickFormat:{get:function(){return I.tickFormat();},set:function(x){I.tickFormat(x);h.yTickFormat(x);}},x:{get:function(){return o.x();},set:function(x){o.x(x);h.x(x);}},y:{get:function(){return o.y();},set:function(x){o.y(x);h.y(x);}},rightAlignYAxis:{get:function(){return t;},set:function(x){t=x;I.orient(t?"right":"left");}},useInteractiveGuideline:{get:function(){return D;},set:function(x){D=x;if(D){o.interactive(false);o.useVoronoi(false);}}}});a.utils.inheritOptions(c,o);a.utils.initOptions(c);return c;};a.models.lineWithFocusChart=function(){return a.models.lineChart().margin({bottom:30}).focusEnable(true);};a.models.linePlusBarChart=function(){var z=a.models.line(),A=a.models.line(),d=a.models.historicalBar(),e=a.models.historicalBar(),Q=a.models.axis(),P=a.models.axis(),S=a.models.axis(),U=a.models.axis(),W=a.models.axis(),Y=a.models.axis(),v=a.models.legend(),f=d3.svg.brush(),K=a.models.tooltip();var B={top:30,right:30,bottom:30,left:60},D=null,C={top:0,right:30,bottom:20,left:60},M=null,u=null,s=function(x){return x.x;},t=function(x){return x.y;},i=a.utils.defaultColor(),F=true,m=true,p=false,o=true,n=50,l,g=null,N,O,R,T,V,X,E=null,k=d3.dispatch("brush","stateChange","changeState"),L=0,G=a.utils.state(),j=null,w=" (left axis)",y=" (right axis)",J=false;z.clipEdge(true);A.interactive(false);A.pointActive(function(x){return false;});Q.orient("bottom").tickPadding(5);S.orient("left");U.orient("right");P.orient("bottom").tickPadding(5);W.orient("left");Y.orient("right");K.headerEnabled(true).headerFormatter(function(x,Z){return Q.tickFormat()(x,Z);});var q=function(){return J?{main:U,focus:Y}:{main:S,focus:W};};var r=function(){return J?{main:S,focus:W}:{main:U,focus:Y};};var H=function(x){return function(){return{active:x.map(function(Z){return !Z.disabled;})};};};var I=function(x){return function(Z){if(Z.active!==undefined){x.forEach(function(ab,aa){ab.disabled=!Z.active[aa];});}};};var c=function(x){return x.every(function(Z){return Z.disabled;});};function h(x){x.each(function(ah){var af=d3.select(this),ax=this;a.utils.initSVG(af);var ab=a.utils.availableWidth(M,af,B),Z=a.utils.availableHeight(u,af,B)-(m?n:0),aa=n-C.top-C.bottom;h.update=function(){af.transition().duration(L).call(h);};h.container=this;G.setter(I(ah),h.update).getter(H(ah)).update();G.disabled=ah.map(function(aA){return !!aA.disabled;});if(!j){var ao;j={};for(ao in G){if(G[ao] instanceof Array){j[ao]=G[ao].slice(0);}else{j[ao]=G[ao];}}}if(!ah||!ah.length||!ah.filter(function(aA){return aA.values.length;}).length){a.utils.noData(h,af);return h;}else{af.selectAll(".nv-noData").remove();}var ai=ah.filter(function(aA){return !aA.disabled&&aA.bar;});var aj=ah.filter(function(aA){return !aA.bar;});if(ai.length&&!J){N=d.xScale();}else{N=z.xScale();}O=P.scale();R=J?z.yScale():d.yScale();T=J?d.yScale():z.yScale();V=J?A.yScale():e.yScale();X=J?e.yScale():A.yScale();var av=ah.filter(function(aA){return !aA.disabled&&(J?!aA.bar:aA.bar);}).map(function(aA){return aA.values.map(function(aB,aC){return{x:s(aB,aC),y:t(aB,aC)};});});var aw=ah.filter(function(aA){return !aA.disabled&&(J?aA.bar:!aA.bar);}).map(function(aA){return aA.values.map(function(aB,aC){return{x:s(aB,aC),y:t(aB,aC)};});});N.range([0,ab]);O.domain(d3.extent(d3.merge(av.concat(aw)),function(aA){return aA.x;})).range([0,ab]);var az=af.selectAll("g.nv-wrap.nv-linePlusBar").data([ah]);var an=az.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g");var al=az.select("g");an.append("g").attr("class","nv-legendWrap");var ak=an.append("g").attr("class","nv-focus");ak.append("g").attr("class","nv-x nv-axis");ak.append("g").attr("class","nv-y1 nv-axis");ak.append("g").attr("class","nv-y2 nv-axis");ak.append("g").attr("class","nv-barsWrap");ak.append("g").attr("class","nv-linesWrap");var ag=an.append("g").attr("class","nv-context");ag.append("g").attr("class","nv-x nv-axis");ag.append("g").attr("class","nv-y1 nv-axis");ag.append("g").attr("class","nv-y2 nv-axis");ag.append("g").attr("class","nv-barsWrap");ag.append("g").attr("class","nv-linesWrap");ag.append("g").attr("class","nv-brushBackground");ag.append("g").attr("class","nv-x nv-brush");if(!F){al.select(".nv-legendWrap").selectAll("*").remove();}else{var ap=v.align()?ab/2:ab;var aq=v.align()?ap:0;v.width(ap);al.select(".nv-legendWrap").datum(ah.map(function(aA){aA.originalKey=aA.originalKey===undefined?aA.key:aA.originalKey;if(J){aA.key=aA.originalKey+(aA.bar?y:w);}else{aA.key=aA.originalKey+(aA.bar?w:y);}return aA;})).call(v);if(!D&&v.height()!==B.top){B.top=v.height();Z=a.utils.availableHeight(u,af,B)-n;}al.select(".nv-legendWrap").attr("transform","translate("+aq+","+(-B.top)+")");}az.attr("transform","translate("+B.left+","+B.top+")");al.select(".nv-context").style("display",m?"initial":"none");e.width(ab).height(aa).color(ah.map(function(aA,aB){return aA.color||i(aA,aB);}).filter(function(aA,aB){return !ah[aB].disabled&&ah[aB].bar;}));A.width(ab).height(aa).color(ah.map(function(aA,aB){return aA.color||i(aA,aB);}).filter(function(aA,aB){return !ah[aB].disabled&&!ah[aB].bar;}));var ac=al.select(".nv-context .nv-barsWrap").datum(ai.length?ai:[{values:[]}]);var ar=al.select(".nv-context .nv-linesWrap").datum(c(aj)?[{values:[]}]:aj.filter(function(aA){return !aA.disabled;}));al.select(".nv-context").attr("transform","translate(0,"+(Z+B.bottom+C.top)+")");ac.transition().call(e);ar.transition().call(A);if(o){P._ticks(a.utils.calcTicksX(ab/100,ah)).tickSize(-aa,0);al.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+V.range()[0]+")");al.select(".nv-context .nv-x.nv-axis").transition().call(P);}if(p){W.scale(V)._ticks(aa/36).tickSize(-ab,0);Y.scale(X)._ticks(aa/36).tickSize(ai.length?0:-ab,0);al.select(".nv-context .nv-y3.nv-axis").style("opacity",ai.length?1:0).attr("transform","translate(0,"+O.range()[0]+")");al.select(".nv-context .nv-y2.nv-axis").style("opacity",aj.length?1:0).attr("transform","translate("+O.range()[1]+",0)");al.select(".nv-context .nv-y1.nv-axis").transition().call(W);al.select(".nv-context .nv-y2.nv-axis").transition().call(Y);}f.x(O).on("brush",at);if(g){f.extent(g);}var ad=al.select(".nv-brushBackground").selectAll("g").data([g||f.extent()]);var ae=ad.enter().append("g");ae.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",aa);ae.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",aa);var am=al.select(".nv-x.nv-brush").call(f);am.selectAll("rect").attr("height",aa);am.selectAll(".resize").append("path").attr("d",au);v.dispatch.on("stateChange",function(aB){for(var aA in aB){G[aA]=aB[aA];}k.stateChange(G);h.update();});k.on("changeState",function(aA){if(typeof aA.disabled!=="undefined"){ah.forEach(function(aC,aB){aC.disabled=aA.disabled[aB];});G.disabled=aA.disabled;}h.update();});function au(aA){var aB=+(aA=="e"),aC=aB?1:-1,aD=aa/3;return"M"+(0.5*aC)+","+aD+"A6,6 0 0 "+aB+" "+(6.5*aC)+","+(aD+6)+"V"+(2*aD-6)+"A6,6 0 0 "+aB+" "+(0.5*aC)+","+(2*aD)+"ZM"+(2.5*aC)+","+(aD+8)+"V"+(2*aD-8)+"M"+(4.5*aC)+","+(aD+8)+"V"+(2*aD-8);}function ay(){if(!f.empty()){f.extent(g);}ad.data([f.empty()?O.domain():g]).each(function(aA,aB){var aC=O(aA[0])-O.range()[0],aD=O.range()[1]-O(aA[1]);d3.select(this).select(".left").attr("width",aC<0?0:aC);d3.select(this).select(".right").attr("x",O(aA[1])).attr("width",aD<0?0:aD);});}function at(){g=f.empty()?null:f.extent();l=f.empty()?O.domain():f.extent();k.brush({extent:l,brush:f});ay();d.width(ab).height(Z).color(ah.map(function(aG,aH){return aG.color||i(aG,aH);}).filter(function(aG,aH){return !ah[aH].disabled&&ah[aH].bar;}));z.width(ab).height(Z).color(ah.map(function(aG,aH){return aG.color||i(aG,aH);}).filter(function(aG,aH){return !ah[aH].disabled&&!ah[aH].bar;}));var aB=al.select(".nv-focus .nv-barsWrap").datum(!ai.length?[{values:[]}]:ai.map(function(aG,aH){return{key:aG.key,values:aG.values.filter(function(aI,aJ){return d.x()(aI,aJ)>=l[0]&&d.x()(aI,aJ)<=l[1];})};}));var aC=al.select(".nv-focus .nv-linesWrap").datum(c(aj)?[{values:[]}]:aj.filter(function(aG){return !aG.disabled;}).map(function(aG,aH){return{area:aG.area,fillOpacity:aG.fillOpacity,strokeWidth:aG.strokeWidth,key:aG.key,values:aG.values.filter(function(aI,aJ){return z.x()(aI,aJ)>=l[0]&&z.x()(aI,aJ)<=l[1];})};}));if(ai.length&&!J){N=d.xScale();}else{N=z.xScale();}Q.scale(N)._ticks(a.utils.calcTicksX(ab/100,ah)).tickSize(-Z,0);Q.domain([Math.ceil(l[0]),Math.floor(l[1])]);al.select(".nv-x.nv-axis").transition().duration(L).call(Q);aB.transition().duration(L).call(d);aC.transition().duration(L).call(z);al.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")");S.scale(R)._ticks(a.utils.calcTicksY(Z/36,ah)).tickSize(-ab,0);U.scale(T)._ticks(a.utils.calcTicksY(Z/36,ah));if(!J){U.tickSize(ai.length?0:-ab,0);}else{U.tickSize(aj.length?0:-ab,0);}var aA=ai.length?1:0;var aD=aj.length&&!c(aj)?1:0;var aE=J?aD:aA;var aF=J?aA:aD;al.select(".nv-focus .nv-y1.nv-axis").style("opacity",aE);al.select(".nv-focus .nv-y2.nv-axis").style("opacity",aF).attr("transform","translate("+N.range()[1]+",0)");al.select(".nv-focus .nv-y1.nv-axis").transition().duration(L).call(S);al.select(".nv-focus .nv-y2.nv-axis").transition().duration(L).call(U);}at();});return h;}z.dispatch.on("elementMouseover.tooltip",function(x){K.duration(100).valueFormatter(function(Z,aa){return r().main.tickFormat()(Z,aa);}).data(x).hidden(false);});z.dispatch.on("elementMouseout.tooltip",function(x){K.hidden(true);});d.dispatch.on("elementMouseover.tooltip",function(x){x.value=h.x()(x.data);x.series={value:h.y()(x.data),color:x.color};K.duration(0).valueFormatter(function(Z,aa){return q().main.tickFormat()(Z,aa);}).data(x).hidden(false);});d.dispatch.on("elementMouseout.tooltip",function(x){K.hidden(true);});d.dispatch.on("elementMousemove.tooltip",function(x){K();});h.dispatch=k;h.legend=v;h.lines=z;h.lines2=A;h.bars=d;h.bars2=e;h.xAxis=Q;h.x2Axis=P;h.y1Axis=S;h.y2Axis=U;h.y3Axis=W;h.y4Axis=Y;h.tooltip=K;h.options=a.utils.optionsFunc.bind(h);h._options=Object.create({},{width:{get:function(){return M;},set:function(x){M=x;}},height:{get:function(){return u;},set:function(x){u=x;}},showLegend:{get:function(){return F;},set:function(x){F=x;}},brushExtent:{get:function(){return g;},set:function(x){g=x;}},noData:{get:function(){return E;},set:function(x){E=x;}},focusEnable:{get:function(){return m;},set:function(x){m=x;}},focusHeight:{get:function(){return n;},set:function(x){n=x;}},focusShowAxisX:{get:function(){return o;},set:function(x){o=x;}},focusShowAxisY:{get:function(){return p;},set:function(x){p=x;}},legendLeftAxisHint:{get:function(){return w;},set:function(x){w=x;}},legendRightAxisHint:{get:function(){return y;},set:function(x){y=x;}},margin:{get:function(){return B;},set:function(x){if(x.top!==undefined){B.top=x.top;D=x.top;}B.right=x.right!==undefined?x.right:B.right;B.bottom=x.bottom!==undefined?x.bottom:B.bottom;B.left=x.left!==undefined?x.left:B.left;}},focusMargin:{get:function(){return C;},set:function(x){C.top=x.top!==undefined?x.top:C.top;C.right=x.right!==undefined?x.right:C.right;C.bottom=x.bottom!==undefined?x.bottom:C.bottom;C.left=x.left!==undefined?x.left:C.left;}},duration:{get:function(){return L;},set:function(x){L=x;}},color:{get:function(){return i;},set:function(x){i=a.utils.getColor(x);v.color(i);}},x:{get:function(){return s;},set:function(x){s=x;z.x(x);A.x(x);d.x(x);e.x(x);}},y:{get:function(){return t;},set:function(x){t=x;z.y(x);A.y(x);d.y(x);e.y(x);}},switchYAxisOrder:{get:function(){return J;},set:function(x){if(J!==x){var Z=S;S=U;U=Z;var aa=W;W=Y;Y=aa;}J=x;S.orient("left");U.orient("right");W.orient("left");Y.orient("right");}}});a.utils.inheritOptions(h,z);a.utils.initOptions(h);return h;};a.models.multiBar=function(){var t={top:0,right:0,bottom:0,left:0},z=960,p=500,A=d3.scale.ordinal(),E=d3.scale.linear(),r=Math.floor(Math.random()*10000),g=null,m=function(x){return x.x;},n=function(x){return x.y;},l=[0],e=true,v=false,w="zero",f=a.utils.defaultColor(),q=false,c=null,h,j=500,C,G,D,H,o=0.1,k=0.75,i=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd");var B,F,u=a.utils.renderWatch(i,j);var s=0;function d(x){u.reset();x.each(function(M){var I=z-t.left-t.right,y=p-t.top-t.bottom;g=d3.select(this);a.utils.initSVG(g);var T=0;var O=function(Y,Z){if(Y.series===M.length-1&&Z===M[0].values.length-1){return true;}return false;};if(q&&M.length){q=[{values:M[0].values.map(function(Y){return{x:Y.x,y:0,series:Y.series,size:0.01};})}];}if(v){var U=d3.layout.stack().offset(w).values(function(Y){return Y.values;}).y(n)(!M.length&&q?q:M);U.forEach(function(Z,Y){if(Z.nonStackable){M[Y].nonStackableSeries=T++;U[Y]=M[Y];}else{if(Y>0&&U[Y-1].nonStackable){U[Y].values.map(function(aa,ab){aa.y0-=U[Y-1].values[ab].y;aa.y1=aa.y0+aa.y;});}}});M=U;}M.forEach(function(Z,Y){Z.values.forEach(function(aa){aa.series=Y;aa.key=Z.key;});});if(v&&M.length>0){M[0].values.map(function(Y,Z){var ab=0,aa=0;M.map(function(ac,ae){if(!M[ae].nonStackable){var ad=ac.values[Z];ad.size=Math.abs(ad.y);if(ad.y<0){ad.y1=aa;aa=aa-ad.size;}else{ad.y1=ad.size+ab;ab=ab+ad.size;}}});});}var V=(C&&G)?[]:M.map(function(Y,Z){return Y.values.map(function(aa,ab){return{x:m(aa,ab),y:n(aa,ab),y0:aa.y0,y1:aa.y1,idx:Z};});});A.domain(C||d3.merge(V).map(function(Y){return Y.x;})).rangeBands(D||[0,I],o);E.domain(G||d3.extent(d3.merge(V).map(function(Y){var Z=Y.y;if(v&&!M[Y.idx].nonStackable){if(Y.y>0){Z=Y.y1;}else{Z=Y.y1+Y.y;}}return Z;}).concat(l))).range(H||[y,0]);if(A.domain()[0]===A.domain()[1]){A.domain()[0]?A.domain([A.domain()[0]-A.domain()[0]*0.01,A.domain()[1]+A.domain()[1]*0.01]):A.domain([-1,1]);}if(E.domain()[0]===E.domain()[1]){E.domain()[0]?E.domain([E.domain()[0]+E.domain()[0]*0.01,E.domain()[1]-E.domain()[1]*0.01]):E.domain([-1,1]);}B=B||A;F=F||E;var W=g.selectAll("g.nv-wrap.nv-multibar").data([M]);var X=W.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar");var N=X.append("defs");var R=X.append("g");var Q=W.select("g");R.append("g").attr("class","nv-groups");W.attr("transform","translate("+t.left+","+t.top+")");N.append("clipPath").attr("id","nv-edge-clip-"+r).append("rect");W.select("#nv-edge-clip-"+r+" rect").attr("width",I).attr("height",y);Q.attr("clip-path",e?"url(#nv-edge-clip-"+r+")":"");var S=W.select(".nv-groups").selectAll(".nv-group").data(function(Y){return Y;},function(Y,Z){return Z;});S.enter().append("g").style("stroke-opacity",1e-06).style("fill-opacity",1e-06);var P=u.transition(S.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,j)).attr("y",function(Y,Z,aa){var ab=F(0)||0;if(v){if(M[Y.series]&&!M[Y.series].nonStackable){ab=F(Y.y0);}}return ab;}).attr("height",0).remove();if(P.delay){P.delay(function(Y,aa){var Z=aa*(j/(s+1))-aa;return Z;});}S.attr("class",function(Y,Z){return"nv-group nv-series-"+Z;}).classed("hover",function(Y){return Y.hover;}).style("fill",function(Y,Z){return f(Y,Z);}).style("stroke",function(Y,Z){return f(Y,Z);});S.style("stroke-opacity",1).style("fill-opacity",k);var J=S.selectAll("rect.nv-bar").data(function(Y){return(q&&!M.length)?q.values:Y.values;});J.exit().remove();var L=J.enter().append("rect").attr("class",function(Y,Z){return n(Y,Z)<0?"nv-bar negative":"nv-bar positive";}).attr("x",function(Y,Z,aa){return v&&!M[aa].nonStackable?0:(aa*A.rangeBand()/M.length);}).attr("y",function(Y,Z,aa){return F(v&&!M[aa].nonStackable?Y.y0:0)||0;}).attr("height",0).attr("width",function(Y,Z,aa){return A.rangeBand()/(v&&!M[aa].nonStackable?1:M.length);}).attr("transform",function(Y,Z){return"translate("+A(m(Y,Z))+",0)";});J.style("fill",function(Y,Z,aa){return f(Y,aa,Z);}).style("stroke",function(Y,Z,aa){return f(Y,aa,Z);}).on("mouseover",function(Y,Z,aa){d3.select(this).classed("hover",true);i.elementMouseover({data:Y,index:Z,series:M[aa],color:d3.select(this).style("fill")});}).on("mouseout",function(Y,Z,aa){d3.select(this).classed("hover",false);i.elementMouseout({data:Y,index:Z,series:M[aa],color:d3.select(this).style("fill")});}).on("mousemove",function(Y,Z,aa){i.elementMousemove({data:Y,index:Z,series:M[aa],color:d3.select(this).style("fill")});}).on("click",function(Y,aa,ab){var Z=this;i.elementClick({data:Y,index:aa,series:M[ab],color:d3.select(this).style("fill"),event:d3.event,element:Z});d3.event.stopPropagation();}).on("dblclick",function(Y,Z,aa){i.elementDblClick({data:Y,index:Z,series:M[aa],color:d3.select(this).style("fill")});d3.event.stopPropagation();});J.attr("class",function(Y,Z){return n(Y,Z)<0?"nv-bar negative":"nv-bar positive";}).attr("transform",function(Y,Z){return"translate("+A(m(Y,Z))+",0)";});if(c){if(!h){h=M.map(function(){return true;});}J.style("fill",function(Y,Z,aa){return d3.rgb(c(Y,Z)).darker(h.map(function(ab,ac){return ac;}).filter(function(ab,ac){return !h[ac];})[aa]).toString();}).style("stroke",function(Y,Z,aa){return d3.rgb(c(Y,Z)).darker(h.map(function(ab,ac){return ac;}).filter(function(ab,ac){return !h[ac];})[aa]).toString();});}var K=J.watchTransition(u,"multibar",Math.min(250,j)).delay(function(Y,Z){return Z*j/M[0].values.length;});if(v){K.attr("y",function(Y,Z,aa){var ab=0;if(!M[aa].nonStackable){ab=E(Y.y1);}else{if(n(Y,Z)<0){ab=E(0);}else{if(E(0)-E(n(Y,Z))<-1){ab=E(0)-1;}else{ab=E(n(Y,Z))||0;}}}return ab;}).attr("height",function(Y,Z,aa){if(!M[aa].nonStackable){return Math.max(Math.abs(E(Y.y+Y.y0)-E(Y.y0)),0);}else{return Math.max(Math.abs(E(n(Y,Z))-E(0)),0)||0;}}).attr("x",function(Y,Z,aa){var ab=0;if(M[aa].nonStackable){ab=Y.series*A.rangeBand()/M.length;if(M.length!==T){ab=M[aa].nonStackableSeries*A.rangeBand()/(T*2);}}return ab;}).attr("width",function(Y,Z,aa){if(!M[aa].nonStackable){return A.rangeBand();}else{var ab=(A.rangeBand()/T);if(M.length!==T){ab=A.rangeBand()/(T*2);}return ab;}});}else{K.attr("x",function(Y,Z){return Y.series*A.rangeBand()/M.length;}).attr("width",A.rangeBand()/M.length).attr("y",function(Y,Z){return n(Y,Z)<0?E(0):E(0)-E(n(Y,Z))<1?E(0)-1:E(n(Y,Z))||0;}).attr("height",function(Y,Z){return Math.max(Math.abs(E(n(Y,Z))-E(0)),1)||0;});}B=A.copy();F=E.copy();if(M[0]&&M[0].values){s=M[0].values.length;}});u.renderEnd("multibar immediate");return d;}d.dispatch=i;d.options=a.utils.optionsFunc.bind(d);d._options=Object.create({},{width:{get:function(){return z;},set:function(x){z=x;}},height:{get:function(){return p;},set:function(x){p=x;}},x:{get:function(){return m;},set:function(x){m=x;}},y:{get:function(){return n;},set:function(x){n=x;}},xScale:{get:function(){return A;},set:function(x){A=x;}},yScale:{get:function(){return E;},set:function(x){E=x;}},xDomain:{get:function(){return C;},set:function(x){C=x;}},yDomain:{get:function(){return G;},set:function(x){G=x;}},xRange:{get:function(){return D;},set:function(x){D=x;}},yRange:{get:function(){return H;},set:function(x){H=x;}},forceY:{get:function(){return l;},set:function(x){l=x;}},stacked:{get:function(){return v;},set:function(x){v=x;}},stackOffset:{get:function(){return w;},set:function(x){w=x;}},clipEdge:{get:function(){return e;},set:function(x){e=x;}},disabled:{get:function(){return h;},set:function(x){h=x;}},id:{get:function(){return r;},set:function(x){r=x;}},hideable:{get:function(){return q;},set:function(x){q=x;}},groupSpacing:{get:function(){return o;},set:function(x){o=x;}},fillOpacity:{get:function(){return k;},set:function(x){k=x;}},margin:{get:function(){return t;},set:function(x){t.top=x.top!==undefined?x.top:t.top;t.right=x.right!==undefined?x.right:t.right;t.bottom=x.bottom!==undefined?x.bottom:t.bottom;t.left=x.left!==undefined?x.left:t.left;}},duration:{get:function(){return j;},set:function(x){j=x;u.reset(j);}},color:{get:function(){return f;},set:function(x){f=a.utils.getColor(x);}},barColor:{get:function(){return c;},set:function(x){c=x?a.utils.getColor(x):null;}}});a.utils.initOptions(d);return d;};a.models.multiBarChart=function(){var q=a.models.multiBar(),M=a.models.axis(),O=a.models.axis(),l=a.interactiveGuideline(),m=a.models.legend(),f=a.models.legend(),H=a.models.tooltip();var o={top:30,right:20,bottom:50,left:60},p=null,J=null,k=null,d=a.utils.defaultColor(),w=true,e={},z=true,n=null,A=true,B=true,u=false,s=true,D=false,K=false,v=0,L,N,E=a.utils.state(),h=null,r=null,i=d3.dispatch("stateChange","changeState","renderEnd"),g=function(){return w?180:0;},j=250,I=false;E.stacked=false;q.stacked(false);M.orient("bottom").tickPadding(7).showMaxMin(false).tickFormat(function(x){return x;});O.orient((u)?"right":"left").tickFormat(d3.format(",.1f"));H.duration(0).valueFormatter(function(x,y){return O.tickFormat()(x,y);}).headerFormatter(function(x,y){return M.tickFormat()(x,y);});l.tooltip.valueFormatter(function(x,y){return x==null?"N/A":O.tickFormat()(x,y);}).headerFormatter(function(x,y){return M.tickFormat()(x,y);});l.tooltip.valueFormatter(function(x,y){return x==null?"N/A":O.tickFormat()(x,y);}).headerFormatter(function(x,y){return M.tickFormat()(x,y);});l.tooltip.duration(0).valueFormatter(function(x,y){return O.tickFormat()(x,y);}).headerFormatter(function(x,y){return M.tickFormat()(x,y);});f.updateState(false);var t=a.utils.renderWatch(i);var C=false;var F=function(x){return function(){return{active:x.map(function(y){return !y.disabled;}),stacked:C};};};var G=function(x){return function(y){if(y.stacked!==undefined){C=y.stacked;}if(y.active!==undefined){x.forEach(function(Q,P){Q.disabled=!y.active[P];});}};};function c(x){t.reset();t.models(q);if(A){t.models(M);}if(B){t.models(O);}x.each(function(T){var R=d3.select(this),aa=this;a.utils.initSVG(R);var P=a.utils.availableWidth(J,R,o),y=a.utils.availableHeight(k,R,o);c.update=function(){if(j===0){R.call(c);}else{R.transition().duration(j).call(c);}};c.container=this;E.setter(G(T),c.update).getter(F(T)).update();E.disabled=T.map(function(ae){return !!ae.disabled;});if(!h){var X;h={};for(X in E){if(E[X] instanceof Array){h[X]=E[X].slice(0);}else{h[X]=E[X];}}}if(!T||!T.length||!T.filter(function(ae){return ae.values.length;}).length){a.utils.noData(c,R);return c;}else{R.selectAll(".nv-noData").remove();}L=q.xScale();N=q.yScale();var ac=R.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([T]);var V=ac.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");var U=ac.select("g");V.append("g").attr("class","nv-x nv-axis");V.append("g").attr("class","nv-y nv-axis");V.append("g").attr("class","nv-barsWrap");V.append("g").attr("class","nv-legendWrap");V.append("g").attr("class","nv-controlsWrap");V.append("g").attr("class","nv-interactive");if(!z){U.select(".nv-legendWrap").selectAll("*").remove();}else{if(n==="bottom"){m.width(P-o.right);U.select(".nv-legendWrap").datum(T).call(m);o.bottom=M.height()+m.height();y=a.utils.availableHeight(k,R,o);U.select(".nv-legendWrap").attr("transform","translate(0,"+(y+M.height())+")");}else{m.width(P-g());U.select(".nv-legendWrap").datum(T).call(m);if(!p&&m.height()!==o.top){o.top=m.height();y=a.utils.availableHeight(k,R,o);}U.select(".nv-legendWrap").attr("transform","translate("+g()+","+(-o.top)+")");}}if(!w){U.select(".nv-controlsWrap").selectAll("*").remove();}else{var S=[{key:e.grouped||"Grouped",disabled:q.stacked()},{key:e.stacked||"Stacked",disabled:!q.stacked()}];f.width(g()).color(["#444","#444","#444"]);U.select(".nv-controlsWrap").datum(S).attr("transform","translate(0,"+(-o.top)+")").call(f);}ac.attr("transform","translate("+o.left+","+o.top+")");if(u){U.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)");}q.disabled(T.map(function(ae){return ae.disabled;})).width(P).height(y).color(T.map(function(ae,af){return ae.color||d(ae,af);}).filter(function(ae,af){return !T[af].disabled;}));var Q=U.select(".nv-barsWrap").datum(T.filter(function(ae){return !ae.disabled;}));Q.call(q);if(A){M.scale(L)._ticks(a.utils.calcTicksX(P/100,T)).tickSize(-y,0);U.select(".nv-x.nv-axis").attr("transform","translate(0,"+N.range()[0]+")");U.select(".nv-x.nv-axis").call(M);var ad=U.select(".nv-x.nv-axis > g").selectAll("g");ad.selectAll("line, text").style("opacity",1);if(D){var W=function(ae,af){return"translate("+ae+","+af+")";};var Z=5,Y=17;ad.selectAll("text").attr("transform",function(ae,af,ag){return W(0,(ag%2==0?Z:Y));});var ab=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;U.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(ae,af){return W(0,(af===0||ab%2!==0)?Y:Z);});}if(K){U.selectAll(".tick text").call(a.utils.wrapTicks,c.xAxis.rangeBand());}if(s){ad.filter(function(ae,af){return af%Math.ceil(T[0].values.length/(P/100))!==0;}).selectAll("text, line").style("opacity",0);}if(v){ad.selectAll(".tick text").attr("transform","rotate("+v+" 0,0)").style("text-anchor",v>0?"start":"end");}U.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1);}if(B){O.scale(N)._ticks(a.utils.calcTicksY(y/36,T)).tickSize(-P,0);U.select(".nv-y.nv-axis").call(O);}if(I){l.width(P).height(y).margin({left:o.left,top:o.top}).svgContainer(R).xScale(L);ac.select(".nv-interactive").call(l);}m.dispatch.on("stateChange",function(af){for(var ae in af){E[ae]=af[ae];}i.stateChange(E);c.update();});f.dispatch.on("legendClick",function(ae,af){if(!ae.disabled){return;}S=S.map(function(ag){ag.disabled=true;return ag;});ae.disabled=false;switch(ae.key){case"Grouped":case e.grouped:q.stacked(false);break;case"Stacked":case e.stacked:q.stacked(true);break;}E.stacked=q.stacked();i.stateChange(E);c.update();});i.on("changeState",function(ae){if(typeof ae.disabled!=="undefined"){T.forEach(function(ag,af){ag.disabled=ae.disabled[af];});E.disabled=ae.disabled;}if(typeof ae.stacked!=="undefined"){q.stacked(ae.stacked);E.stacked=ae.stacked;C=ae.stacked;}c.update();});if(I){l.dispatch.on("elementMousemove",function(af){if(af.pointXValue==undefined){return;}var ai,ag,ah,aj,ae=[];T.filter(function(al,ak){al.seriesIndex=ak;return !al.disabled;}).forEach(function(am,ak){ag=L.domain().indexOf(af.pointXValue);var al=am.values[ag];if(al===undefined){return;}aj=al.x;if(ai===undefined){ai=al;}if(ah===undefined){ah=af.mouseX;}ae.push({key:am.key,value:c.y()(al,ag),color:d(am,am.seriesIndex),data:am.values[ag]});});l.tooltip.data({value:aj,index:ag,series:ae})();l.renderGuideLine(ah);});l.dispatch.on("elementMouseout",function(ae){l.tooltip.hidden(true);});}else{q.dispatch.on("elementMouseover.tooltip",function(ae){ae.value=c.x()(ae.data);ae.series={key:ae.data.key,value:c.y()(ae.data),color:ae.color};H.data(ae).hidden(false);});q.dispatch.on("elementMouseout.tooltip",function(ae){H.hidden(true);});q.dispatch.on("elementMousemove.tooltip",function(ae){H();});}});t.renderEnd("multibarchart immediate");return c;}c.dispatch=i;c.multibar=q;c.legend=m;c.controls=f;c.xAxis=M;c.yAxis=O;c.state=E;c.tooltip=H;c.interactiveLayer=l;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return J;},set:function(x){J=x;}},height:{get:function(){return k;},set:function(x){k=x;}},showLegend:{get:function(){return z;},set:function(x){z=x;}},legendPosition:{get:function(){return n;},set:function(x){n=x;}},showControls:{get:function(){return w;},set:function(x){w=x;}},controlLabels:{get:function(){return e;},set:function(x){e=x;}},showXAxis:{get:function(){return A;},set:function(x){A=x;}},showYAxis:{get:function(){return B;},set:function(x){B=x;}},defaultState:{get:function(){return h;},set:function(x){h=x;}},noData:{get:function(){return r;},set:function(x){r=x;}},reduceXTicks:{get:function(){return s;},set:function(x){s=x;}},rotateLabels:{get:function(){return v;},set:function(x){v=x;}},staggerLabels:{get:function(){return D;},set:function(x){D=x;}},wrapLabels:{get:function(){return K;},set:function(x){K=!!x;}},margin:{get:function(){return o;},set:function(x){if(x.top!==undefined){o.top=x.top;p=x.top;}o.right=x.right!==undefined?x.right:o.right;o.bottom=x.bottom!==undefined?x.bottom:o.bottom;o.left=x.left!==undefined?x.left:o.left;}},duration:{get:function(){return j;},set:function(x){j=x;q.duration(j);M.duration(j);O.duration(j);t.reset(j);}},color:{get:function(){return d;},set:function(x){d=a.utils.getColor(x);m.color(d);}},rightAlignYAxis:{get:function(){return u;},set:function(x){u=x;O.orient(u?"right":"left");}},useInteractiveGuideline:{get:function(){return I;},set:function(x){I=x;}},barColor:{get:function(){return q.barColor;},set:function(x){q.barColor(x);m.color(function(y,P){return d3.rgb("#ccc").darker(P*1.5).toString();});}}});a.utils.inheritOptions(c,q);a.utils.initOptions(c);return c;};a.models.multiBarHorizontal=function(){var s={top:0,right:0,bottom:0,left:0},B=960,q=500,r=Math.floor(Math.random()*10000),f=null,C=d3.scale.ordinal(),G=d3.scale.linear(),m=function(x){return x.x;},n=function(x){return x.y;},o=function(x){return x.yErr;},l=[0],e=a.utils.defaultColor(),c=null,h,w=false,v=false,u=false,A=60,p=0.1,k=0.75,z=d3.format(",.2f"),g=1200,E,I,F,J,j=250,i=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd");var D,H;var t=a.utils.renderWatch(i,j);function d(x){t.reset();x.each(function(N){var K=B-s.left-s.right,y=q-s.top-s.bottom;f=d3.select(this);a.utils.initSVG(f);if(w){N=d3.layout.stack().offset("zero").values(function(V){return V.values;}).y(n)(N);}N.forEach(function(W,V){W.values.forEach(function(X){X.series=V;X.key=W.key;});});if(w){N[0].values.map(function(V,W){var Y=0,X=0;N.map(function(Z){var aa=Z.values[W];aa.size=Math.abs(aa.y);if(aa.y<0){aa.y1=X-aa.size;X=X-aa.size;}else{aa.y1=Y;Y=Y+aa.size;}});});}var S=(E&&I)?[]:N.map(function(V){return V.values.map(function(W,X){return{x:m(W,X),y:n(W,X),y0:W.y0,y1:W.y1};});});C.domain(E||d3.merge(S).map(function(V){return V.x;})).rangeBands(F||[0,y],p);G.domain(I||d3.extent(d3.merge(S).map(function(V){return w?(V.y>0?V.y1+V.y:V.y1):V.y;}).concat(l)));if(v&&!w){G.range(J||[(G.domain()[0]<0?A:0),K-(G.domain()[1]>0?A:0)]);}else{G.range(J||[0,K]);}D=D||C;H=H||d3.scale.linear().domain(G.domain()).range([G(0),G(0)]);var T=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([N]);var U=T.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");var O=U.append("defs");var Q=U.append("g");var P=T.select("g");Q.append("g").attr("class","nv-groups");T.attr("transform","translate("+s.left+","+s.top+")");var R=T.select(".nv-groups").selectAll(".nv-group").data(function(V){return V;},function(V,W){return W;});R.enter().append("g").style("stroke-opacity",1e-06).style("fill-opacity",1e-06);R.exit().watchTransition(t,"multibarhorizontal: exit groups").style("stroke-opacity",1e-06).style("fill-opacity",1e-06).remove();R.attr("class",function(V,W){return"nv-group nv-series-"+W;}).classed("hover",function(V){return V.hover;}).style("fill",function(V,W){return e(V,W);}).style("stroke",function(V,W){return e(V,W);});R.watchTransition(t,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",k);var L=R.selectAll("g.nv-bar").data(function(V){return V.values;});L.exit().remove();var M=L.enter().append("g").attr("transform",function(V,W,X){return"translate("+H(w?V.y0:0)+","+(w?0:(X*C.rangeBand()/N.length)+C(m(V,W)))+")";});M.append("rect").attr("width",0).attr("height",C.rangeBand()/(w?1:N.length));L.on("mouseover",function(V,W){d3.select(this).classed("hover",true);i.elementMouseover({data:V,index:W,color:d3.select(this).style("fill")});}).on("mouseout",function(V,W){d3.select(this).classed("hover",false);i.elementMouseout({data:V,index:W,color:d3.select(this).style("fill")});}).on("mouseout",function(V,W){i.elementMouseout({data:V,index:W,color:d3.select(this).style("fill")});}).on("mousemove",function(V,W){i.elementMousemove({data:V,index:W,color:d3.select(this).style("fill")});}).on("click",function(V,X){var W=this;i.elementClick({data:V,index:X,color:d3.select(this).style("fill"),event:d3.event,element:W});d3.event.stopPropagation();}).on("dblclick",function(V,W){i.elementDblClick({data:V,index:W,color:d3.select(this).style("fill")});d3.event.stopPropagation();});if(o(N[0],0)){M.append("polyline");L.select("polyline").attr("fill","none").attr("points",function(W,X){var Z=o(W,X),Y=0.8*C.rangeBand()/((w?1:N.length)*2);Z=Z.length?Z:[-Math.abs(Z),Math.abs(Z)];Z=Z.map(function(aa){return G(aa+((n(W,X)<0)?0:n(W,X)))-G(0);});var V=[[Z[0],-Y],[Z[0],Y],[Z[0],0],[Z[1],0],[Z[1],-Y],[Z[1],Y]];return V.map(function(aa){return aa.join(",");}).join(" ");}).attr("transform",function(V,W){var X=C.rangeBand()/((w?1:N.length)*2);return"translate(0, "+X+")";});}M.append("text");if(v&&!w){L.select("text").attr("text-anchor",function(V,W){return n(V,W)<0?"end":"start";}).attr("y",C.rangeBand()/(N.length*2)).attr("dy",".32em").text(function(V,W){var X=z(n(V,W)),Y=o(V,W);if(Y===undefined){return X;}if(!Y.length){return X+"±"+z(Math.abs(Y));}return X+"+"+z(Math.abs(Y[1]))+"-"+z(Math.abs(Y[0]));});L.watchTransition(t,"multibarhorizontal: bars").select("text").attr("x",function(V,W){return n(V,W)<0?-4:G(n(V,W))-G(0)+4;});}else{L.selectAll("text").text("");}if(u&&!w){M.append("text").classed("nv-bar-label",true);L.select("text.nv-bar-label").attr("text-anchor",function(V,W){return n(V,W)<0?"start":"end";}).attr("y",C.rangeBand()/(N.length*2)).attr("dy",".32em").text(function(V,W){return m(V,W);});L.watchTransition(t,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(V,W){return n(V,W)<0?G(0)-G(n(V,W))+4:-4;});}else{L.selectAll("text.nv-bar-label").text("");}L.attr("class",function(V,W){return n(V,W)<0?"nv-bar negative":"nv-bar positive";});if(c){if(!h){h=N.map(function(){return true;});}L.style("fill",function(V,W,X){return d3.rgb(c(V,W)).darker(h.map(function(Y,Z){return Z;}).filter(function(Y,Z){return !h[Z];})[X]).toString();}).style("stroke",function(V,W,X){return d3.rgb(c(V,W)).darker(h.map(function(Y,Z){return Z;}).filter(function(Y,Z){return !h[Z];})[X]).toString();});}if(w){L.watchTransition(t,"multibarhorizontal: bars").attr("transform",function(V,W){return"translate("+G(V.y1)+","+C(m(V,W))+")";}).select("rect").attr("width",function(V,W){return Math.abs(G(n(V,W)+V.y0)-G(V.y0))||0;}).attr("height",C.rangeBand());}else{L.watchTransition(t,"multibarhorizontal: bars").attr("transform",function(V,W){return"translate("+(n(V,W)<0?G(n(V,W)):G(0))+","+(V.series*C.rangeBand()/N.length+C(m(V,W)))+")";}).select("rect").attr("height",C.rangeBand()/N.length).attr("width",function(V,W){return Math.max(Math.abs(G(n(V,W))-G(0)),1)||0;});}D=C.copy();H=G.copy();});t.renderEnd("multibarHorizontal immediate");return d;}d.dispatch=i;d.options=a.utils.optionsFunc.bind(d);d._options=Object.create({},{width:{get:function(){return B;},set:function(x){B=x;}},height:{get:function(){return q;},set:function(x){q=x;}},x:{get:function(){return m;},set:function(x){m=x;}},y:{get:function(){return n;},set:function(x){n=x;}},yErr:{get:function(){return o;},set:function(x){o=x;}},xScale:{get:function(){return C;},set:function(x){C=x;}},yScale:{get:function(){return G;},set:function(x){G=x;}},xDomain:{get:function(){return E;},set:function(x){E=x;}},yDomain:{get:function(){return I;},set:function(x){I=x;}},xRange:{get:function(){return F;},set:function(x){F=x;}},yRange:{get:function(){return J;},set:function(x){J=x;}},forceY:{get:function(){return l;},set:function(x){l=x;}},stacked:{get:function(){return w;},set:function(x){w=x;}},showValues:{get:function(){return v;},set:function(x){v=x;}},disabled:{get:function(){return h;},set:function(x){h=x;}},id:{get:function(){return r;},set:function(x){r=x;}},valueFormat:{get:function(){return z;},set:function(x){z=x;}},valuePadding:{get:function(){return A;},set:function(x){A=x;}},groupSpacing:{get:function(){return p;},set:function(x){p=x;}},fillOpacity:{get:function(){return k;},set:function(x){k=x;}},margin:{get:function(){return s;},set:function(x){s.top=x.top!==undefined?x.top:s.top;s.right=x.right!==undefined?x.right:s.right;s.bottom=x.bottom!==undefined?x.bottom:s.bottom;s.left=x.left!==undefined?x.left:s.left;}},duration:{get:function(){return j;},set:function(x){j=x;t.reset(j);}},color:{get:function(){return e;},set:function(x){e=a.utils.getColor(x);}},barColor:{get:function(){return c;},set:function(x){c=x?a.utils.getColor(x):null;}}});a.utils.initOptions(d);return d;};a.models.multiBarHorizontalChart=function(){var q=a.models.multiBarHorizontal(),G=a.models.axis(),I=a.models.axis(),m=a.models.legend().height(30),f=a.models.legend().height(30),D=a.models.tooltip();var o={top:30,right:20,bottom:50,left:60},p=null,E=null,l=null,d=a.utils.defaultColor(),t=true,g="top",e={},u=true,n="top",v=true,w=true,z=false,F,H,A=a.utils.state(),i=null,r=null,j=d3.dispatch("stateChange","changeState","renderEnd"),h=function(){return t?180:0;},k=250;A.stacked=false;q.stacked(z);G.orient("left").tickPadding(5).showMaxMin(false).tickFormat(function(x){return x;});I.orient("bottom").tickFormat(d3.format(",.1f"));D.duration(0).valueFormatter(function(x,y){return I.tickFormat()(x,y);}).headerFormatter(function(x,y){return G.tickFormat()(x,y);});f.updateState(false);var B=function(x){return function(){return{active:x.map(function(y){return !y.disabled;}),stacked:z};};};var C=function(x){return function(y){if(y.stacked!==undefined){z=y.stacked;}if(y.active!==undefined){x.forEach(function(K,J){K.disabled=!y.active[J];});}};};var s=a.utils.renderWatch(j,k);function c(x){s.reset();s.models(q);if(v){s.models(G);}if(w){s.models(I);}x.each(function(N){var L=d3.select(this),R=this;a.utils.initSVG(L);var J=a.utils.availableWidth(E,L,o),y=a.utils.availableHeight(l,L,o);c.update=function(){L.transition().duration(k).call(c);};c.container=this;z=q.stacked();A.setter(C(N),c.update).getter(B(N)).update();A.disabled=N.map(function(U){return !!U.disabled;});if(!i){var Q;i={};for(Q in A){if(A[Q] instanceof Array){i[Q]=A[Q].slice(0);}else{i[Q]=A[Q];}}}if(!N||!N.length||!N.filter(function(U){return U.values.length;}).length){a.utils.noData(c,L);return c;}else{L.selectAll(".nv-noData").remove();}F=q.xScale();H=q.yScale().clamp(true);var S=L.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([N]);var P=S.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g");var O=S.select("g");P.append("g").attr("class","nv-x nv-axis");P.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");P.append("g").attr("class","nv-barsWrap");P.append("g").attr("class","nv-legendWrap");P.append("g").attr("class","nv-controlsWrap");if(!u){O.select(".nv-legendWrap").selectAll("*").remove();}else{m.width(J-h());O.select(".nv-legendWrap").datum(N).call(m);if(n==="bottom"){o.bottom=G.height()+m.height();y=a.utils.availableHeight(l,L,o);O.select(".nv-legendWrap").attr("transform","translate("+h()+","+(y+G.height())+")");}else{if(n==="top"){if(!p&&m.height()!==o.top){o.top=m.height();y=a.utils.availableHeight(l,L,o);}O.select(".nv-legendWrap").attr("transform","translate("+h()+","+(-o.top)+")");}}}if(!t){O.select(".nv-controlsWrap").selectAll("*").remove();}else{var M=[{key:e.grouped||"Grouped",disabled:q.stacked()},{key:e.stacked||"Stacked",disabled:!q.stacked()}];f.width(h()).color(["#444","#444","#444"]);if(g==="bottom"){o.bottom=G.height()+m.height();y=a.utils.availableHeight(l,L,o);O.select(".nv-controlsWrap").datum(M).attr("transform","translate(0,"+(y+G.height())+")").call(f);}else{if(g==="top"){O.select(".nv-controlsWrap").datum(M).attr("transform","translate(0,"+(-o.top)+")").call(f);}}}S.attr("transform","translate("+o.left+","+o.top+")");q.disabled(N.map(function(U){return U.disabled;})).width(J).height(y).color(N.map(function(U,V){return U.color||d(U,V);}).filter(function(U,V){return !N[V].disabled;}));var K=O.select(".nv-barsWrap").datum(N.filter(function(U){return !U.disabled;}));K.transition().call(q);if(v){G.scale(F)._ticks(a.utils.calcTicksY(y/24,N)).tickSize(-J,0);O.select(".nv-x.nv-axis").call(G);var T=O.select(".nv-x.nv-axis").selectAll("g");T.selectAll("line, text");}if(w){I.scale(H)._ticks(a.utils.calcTicksX(J/100,N)).tickSize(-y,0);O.select(".nv-y.nv-axis").attr("transform","translate(0,"+y+")");O.select(".nv-y.nv-axis").call(I);}O.select(".nv-zeroLine line").attr("x1",H(0)).attr("x2",H(0)).attr("y1",0).attr("y2",-y);m.dispatch.on("stateChange",function(V){for(var U in V){A[U]=V[U];}j.stateChange(A);c.update();});f.dispatch.on("legendClick",function(U,V){if(!U.disabled){return;}M=M.map(function(W){W.disabled=true;return W;});U.disabled=false;switch(U.key){case"Grouped":case e.grouped:q.stacked(false);break;case"Stacked":case e.stacked:q.stacked(true);break;}A.stacked=q.stacked();j.stateChange(A);z=q.stacked();c.update();});j.on("changeState",function(U){if(typeof U.disabled!=="undefined"){N.forEach(function(W,V){W.disabled=U.disabled[V];});A.disabled=U.disabled;}if(typeof U.stacked!=="undefined"){q.stacked(U.stacked);A.stacked=U.stacked;z=U.stacked;}c.update();});});s.renderEnd("multibar horizontal chart immediate");return c;}q.dispatch.on("elementMouseover.tooltip",function(x){x.value=c.x()(x.data);x.series={key:x.data.key,value:c.y()(x.data),color:x.color};D.data(x).hidden(false);});q.dispatch.on("elementMouseout.tooltip",function(x){D.hidden(true);});q.dispatch.on("elementMousemove.tooltip",function(x){D();});c.dispatch=j;c.multibar=q;c.legend=m;c.controls=f;c.xAxis=G;c.yAxis=I;c.state=A;c.tooltip=D;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return E;},set:function(x){E=x;}},height:{get:function(){return l;},set:function(x){l=x;}},showLegend:{get:function(){return u;},set:function(x){u=x;}},legendPosition:{get:function(){return n;},set:function(x){n=x;}},controlsPosition:{get:function(){return g;},set:function(x){g=x;}},showControls:{get:function(){return t;},set:function(x){t=x;}},controlLabels:{get:function(){return e;},set:function(x){e=x;}},showXAxis:{get:function(){return v;},set:function(x){v=x;}},showYAxis:{get:function(){return w;},set:function(x){w=x;}},defaultState:{get:function(){return i;},set:function(x){i=x;}},noData:{get:function(){return r;},set:function(x){r=x;}},margin:{get:function(){return o;},set:function(x){if(x.top!==undefined){o.top=x.top;p=x.top;}o.right=x.right!==undefined?x.right:o.right;o.bottom=x.bottom!==undefined?x.bottom:o.bottom;o.left=x.left!==undefined?x.left:o.left;}},duration:{get:function(){return k;},set:function(x){k=x;s.reset(k);q.duration(k);G.duration(k);I.duration(k);}},color:{get:function(){return d;},set:function(x){d=a.utils.getColor(x);m.color(d);}},barColor:{get:function(){return q.barColor;},set:function(x){q.barColor(x);m.color(function(y,J){return d3.rgb("#ccc").darker(J*1.5).toString();});}}});a.utils.inheritOptions(c,q);a.utils.initOptions(c);return c;};a.models.multiChart=function(){var s={top:30,right:20,bottom:50,left:60},t=null,g=a.utils.defaultColor(),E=null,l=null,y=true,u=null,J,K,j=function(x){return x.x;},k=function(x){return x.y;},n="linear",D=true,m=a.interactiveGuideline(),C=false,p=" (right axis)",i=250;var F=d3.scale.linear(),L=d3.scale.linear(),M=d3.scale.linear(),q=a.models.line().yScale(L).duration(i),r=a.models.line().yScale(M).duration(i),v=a.models.scatter().yScale(L).duration(i),w=a.models.scatter().yScale(M).duration(i),c=a.models.multiBar().stacked(false).yScale(L).duration(i),d=a.models.multiBar().stacked(false).yScale(M).duration(i),z=a.models.stackedArea().yScale(L).duration(i),A=a.models.stackedArea().yScale(M).duration(i),G=a.models.axis().scale(F).orient("bottom").tickPadding(5).duration(i),H=a.models.axis().scale(L).orient("left").duration(i),I=a.models.axis().scale(M).orient("right").duration(i),o=a.models.legend().height(30),B=a.models.tooltip(),h=d3.dispatch();var f=[q,r,v,w,c,d,z,A];function e(x){x.each(function(U){var T=d3.select(this),ax=this;a.utils.initSVG(T);e.update=function(){T.transition().call(e);};e.container=this;var O=a.utils.availableWidth(E,T,s),N=a.utils.availableHeight(l,T,s);var X=U.filter(function(az){return az.type=="line"&&az.yAxis==1;});var Y=U.filter(function(az){return az.type=="line"&&az.yAxis==2;});var Z=U.filter(function(az){return az.type=="scatter"&&az.yAxis==1;});var aa=U.filter(function(az){return az.type=="scatter"&&az.yAxis==2;});var V=U.filter(function(az){return az.type=="bar"&&az.yAxis==1;});var W=U.filter(function(az){return az.type=="bar"&&az.yAxis==2;});var ab=U.filter(function(az){return az.type=="area"&&az.yAxis==1;});var ac=U.filter(function(az){return az.type=="area"&&az.yAxis==2;});if(!U||!U.length||!U.filter(function(az){return az.values.length;}).length){a.utils.noData(e,T);return e;}else{T.selectAll(".nv-noData").remove();}var at=U.filter(function(az){return !az.disabled&&az.yAxis==1;}).map(function(az){return az.values.map(function(aA,aB){return{x:j(aA),y:k(aA)};});});var au=U.filter(function(az){return !az.disabled&&az.yAxis==2;}).map(function(az){return az.values.map(function(aA,aB){return{x:j(aA),y:k(aA)};});});F.domain(d3.extent(d3.merge(at.concat(au)),function(az){return az.x;})).range([0,O]);var ay=T.selectAll("g.wrap.multiChart").data([U]);var ag=ay.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ag.append("g").attr("class","nv-x nv-axis");ag.append("g").attr("class","nv-y1 nv-axis");ag.append("g").attr("class","nv-y2 nv-axis");ag.append("g").attr("class","stack1Wrap");ag.append("g").attr("class","stack2Wrap");ag.append("g").attr("class","bars1Wrap");ag.append("g").attr("class","bars2Wrap");ag.append("g").attr("class","scatters1Wrap");ag.append("g").attr("class","scatters2Wrap");ag.append("g").attr("class","lines1Wrap");ag.append("g").attr("class","lines2Wrap");ag.append("g").attr("class","legendWrap");ag.append("g").attr("class","nv-interactive");var af=ay.select("g");var S=U.map(function(az,aA){return U[aA].color||g(az,aA);});if(!y){af.select(".legendWrap").selectAll("*").remove();}else{var ai=o.align()?O/2:O;var aj=o.align()?ai:0;o.width(ai);o.color(S);af.select(".legendWrap").datum(U.map(function(az){az.originalKey=az.originalKey===undefined?az.key:az.originalKey;az.key=az.originalKey+(az.yAxis==1?"":p);return az;})).call(o);if(!t&&o.height()!==s.top){s.top=o.height();N=a.utils.availableHeight(l,T,s);}af.select(".legendWrap").attr("transform","translate("+aj+","+(-s.top)+")");}q.width(O).height(N).interpolate(n).color(S.filter(function(az,aA){return !U[aA].disabled&&U[aA].yAxis==1&&U[aA].type=="line";}));r.width(O).height(N).interpolate(n).color(S.filter(function(az,aA){return !U[aA].disabled&&U[aA].yAxis==2&&U[aA].type=="line";}));v.width(O).height(N).color(S.filter(function(az,aA){return !U[aA].disabled&&U[aA].yAxis==1&&U[aA].type=="scatter";}));w.width(O).height(N).color(S.filter(function(az,aA){return !U[aA].disabled&&U[aA].yAxis==2&&U[aA].type=="scatter";}));c.width(O).height(N).color(S.filter(function(az,aA){return !U[aA].disabled&&U[aA].yAxis==1&&U[aA].type=="bar";}));d.width(O).height(N).color(S.filter(function(az,aA){return !U[aA].disabled&&U[aA].yAxis==2&&U[aA].type=="bar";}));z.width(O).height(N).interpolate(n).color(S.filter(function(az,aA){return !U[aA].disabled&&U[aA].yAxis==1&&U[aA].type=="area";}));A.width(O).height(N).interpolate(n).color(S.filter(function(az,aA){return !U[aA].disabled&&U[aA].yAxis==2&&U[aA].type=="area";}));af.attr("transform","translate("+s.left+","+s.top+")");var ak=af.select(".lines1Wrap").datum(X.filter(function(az){return !az.disabled;}));var aq=af.select(".scatters1Wrap").datum(Z.filter(function(az){return !az.disabled;}));var P=af.select(".bars1Wrap").datum(V.filter(function(az){return !az.disabled;}));var av=af.select(".stack1Wrap").datum(ab.filter(function(az){return !az.disabled;}));var al=af.select(".lines2Wrap").datum(Y.filter(function(az){return !az.disabled;}));var ar=af.select(".scatters2Wrap").datum(aa.filter(function(az){return !az.disabled;}));var Q=af.select(".bars2Wrap").datum(W.filter(function(az){return !az.disabled;}));var aw=af.select(".stack2Wrap").datum(ac.filter(function(az){return !az.disabled;}));var ad=[];if(c.stacked()&&V.length){var ad=V.filter(function(az){return !az.disabled;}).map(function(az){return az.values;});if(ad.length>0){ad=ad.reduce(function(az,aA){return az.map(function(aB,aC){return{x:aB.x,y:aB.y+aA[aC].y};});});}}if(V.length){ad.push({x:0,y:0});}var ae=[];if(d.stacked()&&W.length){var ae=W.filter(function(az){return !az.disabled;}).map(function(az){return az.values;});if(ae.length>0){ae=ae.reduce(function(az,aA){return az.map(function(aB,aC){return{x:aB.x,y:aB.y+aA[aC].y};});});}}if(W.length){ae.push({x:0,y:0});}L.domain(J||d3.extent(d3.merge(at).concat(ad),function(az){return az.y;})).range([0,N]);M.domain(K||d3.extent(d3.merge(au).concat(ae),function(az){return az.y;})).range([0,N]);q.yDomain(L.domain());v.yDomain(L.domain());c.yDomain(L.domain());z.yDomain(L.domain());r.yDomain(M.domain());w.yDomain(M.domain());d.yDomain(M.domain());A.yDomain(M.domain());if(ab.length){d3.transition(av).call(z);}if(ac.length){d3.transition(aw).call(A);}if(V.length){d3.transition(P).call(c);}if(W.length){d3.transition(Q).call(d);}if(X.length){d3.transition(ak).call(q);}if(Y.length){d3.transition(al).call(r);}if(Z.length){d3.transition(aq).call(v);}if(aa.length){d3.transition(ar).call(w);}G._ticks(a.utils.calcTicksX(O/100,U)).tickSize(-N,0);af.select(".nv-x.nv-axis").attr("transform","translate(0,"+N+")");d3.transition(af.select(".nv-x.nv-axis")).call(G);H._ticks(a.utils.calcTicksY(N/36,U)).tickSize(-O,0);d3.transition(af.select(".nv-y1.nv-axis")).call(H);I._ticks(a.utils.calcTicksY(N/36,U)).tickSize(-O,0);d3.transition(af.select(".nv-y2.nv-axis")).call(I);af.select(".nv-y1.nv-axis").classed("nv-disabled",at.length?false:true).attr("transform","translate("+F.range()[0]+",0)");af.select(".nv-y2.nv-axis").classed("nv-disabled",au.length?false:true).attr("transform","translate("+F.range()[1]+",0)");o.dispatch.on("stateChange",function(az){e.update();});if(C){m.width(O).height(N).margin({left:s.left,top:s.top}).svgContainer(T).xScale(F);ay.select(".nv-interactive").call(m);}function an(az){var aA=az.series.yAxis===2?I:H;az.value=az.point.x;az.series={value:az.point.y,color:az.point.color,key:az.series.key};B.duration(0).headerFormatter(function(aB,aC){return G.tickFormat()(aB,aC);}).valueFormatter(function(aB,aC){return aA.tickFormat()(aB,aC);}).data(az).hidden(false);}function ao(az){var aA=az.series.yAxis===2?I:H;az.value=az.point.x;az.series={value:az.point.y,color:az.point.color,key:az.series.key};B.duration(100).headerFormatter(function(aB,aC){return G.tickFormat()(aB,aC);}).valueFormatter(function(aB,aC){return aA.tickFormat()(aB,aC);}).data(az).hidden(false);}function ap(az){var aA=az.series.yAxis===2?I:H;az.point.x=z.x()(az.point);az.point.y=z.y()(az.point);B.duration(0).headerFormatter(function(aB,aC){return G.tickFormat()(aB,aC);}).valueFormatter(function(aB,aC){return aA.tickFormat()(aB,aC);}).data(az).hidden(false);}function am(az){var aA=az.series.yAxis===2?I:H;az.value=c.x()(az.data);az.series={value:c.y()(az.data),color:az.color,key:az.data.key};B.duration(0).headerFormatter(function(aB,aC){return G.tickFormat()(aB,aC);}).valueFormatter(function(aB,aC){return aA.tickFormat()(aB,aC);}).data(az).hidden(false);}function R(){for(var aB=0,aC=f.length;aB<aC;aB++){var az=f[aB];try{az.clearHighlights();}catch(aA){}}}function ah(aF,aE,az){for(var aC=0,aD=f.length;aC<aD;aC++){var aA=f[aC];try{aA.highlightPoint(aF,aE,az);}catch(aB){}}}if(C){m.dispatch.on("elementMousemove",function(aB){R();var aE,aC,aD,az=[];U.filter(function(aG,aF){aG.seriesIndex=aF;return !aG.disabled;}).forEach(function(aK,aH){var aG=F.domain();var aF=aK.values.filter(function(aL,aM){return e.x()(aL,aM)>=aG[0]&&e.x()(aL,aM)<=aG[1];});aC=a.interactiveBisect(aF,aB.pointXValue,e.x());var aI=aF[aC];var aJ=e.y()(aI,aC);if(aJ!==null){ah(aH,aC,true);}if(aI===undefined){return;}if(aE===undefined){aE=aI;}if(aD===undefined){aD=F(e.x()(aI,aC));}az.push({key:aK.key,value:aJ,color:g(aK,aK.seriesIndex),data:aI,yAxis:aK.yAxis==2?I:H});});var aA=function(aF,aG){var aH=az[aG].yAxis;return aF==null?"N/A":aH.tickFormat()(aF);};m.tooltip.headerFormatter(function(aF,aG){return G.tickFormat()(aF,aG);}).valueFormatter(m.tooltip.valueFormatter()||aA).data({value:e.x()(aE,aC),index:aC,series:az})();m.renderGuideLine(aD);});m.dispatch.on("elementMouseout",function(az){R();});}else{q.dispatch.on("elementMouseover.tooltip",an);r.dispatch.on("elementMouseover.tooltip",an);q.dispatch.on("elementMouseout.tooltip",function(az){B.hidden(true);});r.dispatch.on("elementMouseout.tooltip",function(az){B.hidden(true);});v.dispatch.on("elementMouseover.tooltip",ao);w.dispatch.on("elementMouseover.tooltip",ao);v.dispatch.on("elementMouseout.tooltip",function(az){B.hidden(true);});w.dispatch.on("elementMouseout.tooltip",function(az){B.hidden(true);});z.dispatch.on("elementMouseover.tooltip",ap);A.dispatch.on("elementMouseover.tooltip",ap);z.dispatch.on("elementMouseout.tooltip",function(az){B.hidden(true);});A.dispatch.on("elementMouseout.tooltip",function(az){B.hidden(true);});c.dispatch.on("elementMouseover.tooltip",am);d.dispatch.on("elementMouseover.tooltip",am);c.dispatch.on("elementMouseout.tooltip",function(az){B.hidden(true);});d.dispatch.on("elementMouseout.tooltip",function(az){B.hidden(true);});c.dispatch.on("elementMousemove.tooltip",function(az){B();});d.dispatch.on("elementMousemove.tooltip",function(az){B();});}});return e;}e.dispatch=h;e.legend=o;e.lines1=q;e.lines2=r;e.scatters1=v;e.scatters2=w;e.bars1=c;e.bars2=d;e.stack1=z;e.stack2=A;e.xAxis=G;e.yAxis1=H;e.yAxis2=I;e.tooltip=B;e.interactiveLayer=m;e.options=a.utils.optionsFunc.bind(e);e._options=Object.create({},{width:{get:function(){return E;},set:function(x){E=x;}},height:{get:function(){return l;},set:function(x){l=x;}},showLegend:{get:function(){return y;},set:function(x){y=x;}},xScale:{get:function(){return F;},set:function(x){F=x;G.scale(F);}},yDomain1:{get:function(){return J;},set:function(x){J=x;}},yDomain2:{get:function(){return K;},set:function(x){K=x;}},noData:{get:function(){return u;},set:function(x){u=x;}},interpolate:{get:function(){return n;},set:function(x){n=x;}},legendRightAxisHint:{get:function(){return p;},set:function(x){p=x;}},margin:{get:function(){return s;},set:function(x){if(x.top!==undefined){s.top=x.top;t=x.top;}s.right=x.right!==undefined?x.right:s.right;s.bottom=x.bottom!==undefined?x.bottom:s.bottom;s.left=x.left!==undefined?x.left:s.left;}},color:{get:function(){return g;},set:function(x){g=a.utils.getColor(x);}},x:{get:function(){return j;},set:function(x){j=x;q.x(x);r.x(x);v.x(x);w.x(x);c.x(x);d.x(x);z.x(x);A.x(x);}},y:{get:function(){return k;},set:function(x){k=x;q.y(x);r.y(x);v.y(x);w.y(x);z.y(x);A.y(x);c.y(x);d.y(x);}},useVoronoi:{get:function(){return D;},set:function(x){D=x;q.useVoronoi(x);r.useVoronoi(x);z.useVoronoi(x);A.useVoronoi(x);}},useInteractiveGuideline:{get:function(){return C;},set:function(x){C=x;if(C){q.interactive(false);q.useVoronoi(false);r.interactive(false);r.useVoronoi(false);z.interactive(false);z.useVoronoi(false);A.interactive(false);A.useVoronoi(false);v.interactive(false);w.interactive(false);}}},duration:{get:function(){return i;},set:function(x){i=x;[q,r,z,A,v,w,G,H,I].forEach(function(N){N.duration(i);});}}});a.utils.initOptions(e);return e;};a.models.ohlcBar=function(){var s={top:0,right:0,bottom:0,left:0},u=null,p=null,q=Math.floor(Math.random()*10000),f=null,v=d3.scale.linear(),A=d3.scale.linear(),n=function(x){return x.x;},o=function(x){return x.y;},m=function(x){return x.open;},j=function(x){return x.close;},k=function(x){return x.high;},l=function(x){return x.low;},h=[],i=[],t=false,d=true,e=a.utils.defaultColor(),r=false,w,B,z,C,g=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function c(x){x.each(function(E){f=d3.select(this);var D=a.utils.availableWidth(u,f,s),y=a.utils.availableHeight(p,f,s);a.utils.initSVG(f);var J=(D/E[0].values.length)*0.9;v.domain(w||d3.extent(E[0].values.map(n).concat(h)));if(t){v.range(z||[D*0.5/E[0].values.length,D*(E[0].values.length-0.5)/E[0].values.length]);}else{v.range(z||[5+J/2,D-J/2-5]);}A.domain(B||[d3.min(E[0].values.map(l).concat(i)),d3.max(E[0].values.map(k).concat(i))]).range(C||[y,0]);if(v.domain()[0]===v.domain()[1]){v.domain()[0]?v.domain([v.domain()[0]-v.domain()[0]*0.01,v.domain()[1]+v.domain()[1]*0.01]):v.domain([-1,1]);}if(A.domain()[0]===A.domain()[1]){A.domain()[0]?A.domain([A.domain()[0]+A.domain()[0]*0.01,A.domain()[1]-A.domain()[1]*0.01]):A.domain([-1,1]);}var K=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([E[0].values]);var L=K.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar");var F=L.append("defs");var H=L.append("g");var G=K.select("g");H.append("g").attr("class","nv-ticks");K.attr("transform","translate("+s.left+","+s.top+")");f.on("click",function(M,N){g.chartClick({data:M,index:N,pos:d3.event,id:q});});F.append("clipPath").attr("id","nv-chart-clip-path-"+q).append("rect");K.select("#nv-chart-clip-path-"+q+" rect").attr("width",D).attr("height",y);G.attr("clip-path",d?"url(#nv-chart-clip-path-"+q+")":"");var I=K.select(".nv-ticks").selectAll(".nv-tick").data(function(M){return M;});I.exit().remove();I.enter().append("path").attr("class",function(M,N,O){return(m(M,N)>j(M,N)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+O+"-"+N;}).attr("d",function(M,N){return"m0,0l0,"+(A(m(M,N))-A(k(M,N)))+"l"+(-J/2)+",0l"+(J/2)+",0l0,"+(A(l(M,N))-A(m(M,N)))+"l0,"+(A(j(M,N))-A(l(M,N)))+"l"+(J/2)+",0l"+(-J/2)+",0z";}).attr("transform",function(M,N){return"translate("+v(n(M,N))+","+A(k(M,N))+")";}).attr("fill",function(M,N){return e[0];}).attr("stroke",function(M,N){return e[0];}).attr("x",0).attr("y",function(M,N){return A(Math.max(0,o(M,N)));}).attr("height",function(M,N){return Math.abs(A(o(M,N))-A(0));});I.attr("class",function(M,N,O){return(m(M,N)>j(M,N)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+O+"-"+N;});d3.transition(I).attr("transform",function(M,N){return"translate("+v(n(M,N))+","+A(k(M,N))+")";}).attr("d",function(M,N){var O=(D/E[0].values.length)*0.9;return"m0,0l0,"+(A(m(M,N))-A(k(M,N)))+"l"+(-O/2)+",0l"+(O/2)+",0l0,"+(A(l(M,N))-A(m(M,N)))+"l0,"+(A(j(M,N))-A(l(M,N)))+"l"+(O/2)+",0l"+(-O/2)+",0z";});});return c;}c.highlightPoint=function(y,x){c.clearHighlights();f.select(".nv-ohlcBar .nv-tick-0-"+y).classed("hover",x);};c.clearHighlights=function(){f.select(".nv-ohlcBar .nv-tick.hover").classed("hover",false);};c.dispatch=g;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return u;},set:function(x){u=x;}},height:{get:function(){return p;},set:function(x){p=x;}},xScale:{get:function(){return v;},set:function(x){v=x;}},yScale:{get:function(){return A;},set:function(x){A=x;}},xDomain:{get:function(){return w;},set:function(x){w=x;}},yDomain:{get:function(){return B;},set:function(x){B=x;}},xRange:{get:function(){return z;},set:function(x){z=x;}},yRange:{get:function(){return C;},set:function(x){C=x;}},forceX:{get:function(){return h;},set:function(x){h=x;}},forceY:{get:function(){return i;},set:function(x){i=x;}},padData:{get:function(){return t;},set:function(x){t=x;}},clipEdge:{get:function(){return d;},set:function(x){d=x;}},id:{get:function(){return q;},set:function(x){q=x;}},interactive:{get:function(){return r;},set:function(x){r=x;}},x:{get:function(){return n;},set:function(x){n=x;}},y:{get:function(){return o;},set:function(x){o=x;}},open:{get:function(){return m();},set:function(x){m=x;}},close:{get:function(){return j();},set:function(x){j=x;}},high:{get:function(){return k;},set:function(x){k=x;}},low:{get:function(){return l;},set:function(x){l=x;}},margin:{get:function(){return s;},set:function(x){s.top=x.top!=undefined?x.top:s.top;s.right=x.right!=undefined?x.right:s.right;s.bottom=x.bottom!=undefined?x.bottom:s.bottom;s.left=x.left!=undefined?x.left:s.left;}},color:{get:function(){return e;},set:function(x){e=a.utils.getColor(x);}}});a.utils.initOptions(c);return c;};a.models.parallelCoordinates=function(){var w={top:30,right:0,bottom:10,left:0},B=null,t=null,e=null,d=null,C=d3.scale.ordinal(),D={},A="undefined values",k=[],q=[],l=[],o=true,j=a.utils.defaultColor(),r=[],c=[],p=[],g=[],v=1,s,h,m,u=d3.svg.line(),f=d3.svg.axis(),n=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged");var z=a.utils.renderWatch(n);function i(x){z.reset();x.each(function(K){var I=d3.select(this);e=a.utils.availableWidth(B,I,w);d=a.utils.availableHeight(t,I,w);a.utils.initSVG(I);if(K[0].values===undefined){var Z=[];K.forEach(function(ah){var aj={};var ai=Object.keys(ah);ai.forEach(function(ak){if(ak!=="name"){aj[ak]=ah[ak];}});Z.push({key:ah.name,values:aj});});K=Z;}var L=K.map(function(ah){return ah.values;});if(c.length===0){c=K;}l=k.sort(function(ah,ai){return ah.currentPosition-ai.currentPosition;}).map(function(ah){return ah.key;});q=k.filter(function(ah){return !ah.disabled;});C.rangePoints([0,e],1).domain(q.map(function(ah){return ah.key;}));var aa={};var O=false;var J=[];l.forEach(function(ah){var ai=d3.extent(L,function(an){return +an[ah];});var al=ai[0];var ak=ai[1];var am=false;if(isNaN(al)||isNaN(ak)){am=true;al=0;ak=0;}if(al===ak){al=al-1;ak=ak+1;}var aj=r.filter(function(an){return an.dimension==ah;});if(aj.length!==0){if(am){al=D[ah].domain()[0];ak=D[ah].domain()[1];}else{if(!aj[0].hasOnlyNaN&&o){al=al>aj[0].extent[0]?aj[0].extent[0]:al;ak=ak<aj[0].extent[1]?aj[0].extent[1]:ak;}else{if(aj[0].hasNaN){ak=ak<aj[0].extent[1]?aj[0].extent[1]:ak;aa[ah]=D[ah].domain()[1];O=true;}}}}D[ah]=d3.scale.linear().domain([al,ak]).range([(d-12)*0.9,0]);g=[];D[ah].brush=d3.svg.brush().y(D[ah]).on("brushstart",H).on("brush",F).on("brushend",G);});var af=I.selectAll("g.nv-wrap.nv-parallelCoordinates").data([K]);var ag=af.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates");var V=ag.append("g");var U=af.select("g");V.append("g").attr("class","nv-parallelCoordinates background");V.append("g").attr("class","nv-parallelCoordinates foreground");V.append("g").attr("class","nv-parallelCoordinates missingValuesline");af.attr("transform","translate("+w.left+","+w.top+")");u.interpolate("cardinal").tension(v);f.orient("left");var E=d3.behavior.drag().on("dragstart",R).on("drag",Q).on("dragend",P);var X,Y;var ad=C.range()[1]-C.range()[0];ad=isNaN(ad)?C.range()[0]:ad;if(!isNaN(ad)){var W=[0+ad/2,d-12,e-ad/2,d-12];X=af.select(".missingValuesline").selectAll("line").data([W]);X.enter().append("line");X.exit().remove();X.attr("x1",function(ah){return ah[0];}).attr("y1",function(ah){return ah[1];}).attr("x2",function(ah){return ah[2];}).attr("y2",function(ah){return ah[3];});Y=af.select(".missingValuesline").selectAll("text").data([A]);Y.append("text").data([A]);Y.enter().append("text");Y.exit().remove();Y.attr("y",d).attr("x",e-92-ad/2).text(function(ah){return ah;});}h=af.select(".background").selectAll("path").data(K);h.enter().append("path");h.exit().remove();h.attr("d",ab);s=af.select(".foreground").selectAll("path").data(K);s.enter().append("path");s.exit().remove();s.attr("d",ab).style("stroke-width",function(ah,ai){if(isNaN(ah.strokeWidth)){ah.strokeWidth=1;}return ah.strokeWidth;}).attr("stroke",function(ah,ai){return ah.color||j(ah,ai);});s.on("mouseover",function(ah,ai){d3.select(this).classed("hover",true).style("stroke-width",ah.strokeWidth+2+"px").style("stroke-opacity",1);n.elementMouseover({label:ah.name,color:ah.color||j(ah,ai),values:ah.values,dimensions:q});});s.on("mouseout",function(ah,ai){d3.select(this).classed("hover",false).style("stroke-width",ah.strokeWidth+"px").style("stroke-opacity",0.7);n.elementMouseout({label:ah.name,index:ai});});s.on("mousemove",function(ah,ai){n.elementMousemove();});s.on("click",function(ah){n.elementClick({id:ah.id});});m=U.selectAll(".dimension").data(q);var N=m.enter().append("g").attr("class","nv-parallelCoordinates dimension");m.attr("transform",function(ah){return"translate("+C(ah.key)+",0)";});N.append("g").attr("class","nv-axis");N.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(ah,ai){n.elementMouseover({label:ah.tooltip||ah.key,color:ah.color});}).on("mouseout",function(ah,ai){n.elementMouseout({label:ah.tooltip});}).on("mousemove",function(ah,ai){n.elementMousemove();}).call(E);N.append("g").attr("class","nv-brushBackground");m.exit().remove();m.select(".nv-label").text(function(ah){return ah.key;});ac(o);var y=l.filter(function(ah){return !D[ah].brush.empty();}),S=y.map(function(ah){return D[ah].brush.extent();});var T=c.slice(0);c=[];s.style("display",function(ah){var ai=y.every(function(ak,aj){if((isNaN(ah.values[ak])||isNaN(parseFloat(ah.values[ak])))&&S[aj][0]==D[ak].brush.y().domain()[0]){return true;}return(S[aj][0]<=ah.values[ak]&&ah.values[ak]<=S[aj][1])&&!isNaN(parseFloat(ah.values[ak]));});if(ai){c.push(ah);}return !ai?"none":null;});if(r.length>0||!a.utils.arrayEquals(c,T)){n.activeChanged(c);}function ab(ah){return u(q.map(function(al){if(isNaN(ah.values[al.key])||isNaN(parseFloat(ah.values[al.key]))||O){var ai=D[al.key].domain();var am=D[al.key].range();var aj=ai[0]-(ai[1]-ai[0])/9;if(g.indexOf(al.key)<0){var ak=d3.scale.linear().domain([aj,ai[1]]).range([d-12,am[1]]);D[al.key].brush.y(ak);g.push(al.key);}if(isNaN(ah.values[al.key])||isNaN(parseFloat(ah.values[al.key]))){return[C(al.key),D[al.key](aj)];}}if(X!==undefined){if(g.length>0||O){X.style("display","inline");Y.style("display","inline");}else{X.style("display","none");Y.style("display","none");}}return[C(al.key),D[al.key](ah.values[al.key])];}));}function ac(ah){r.forEach(function(aj){var ai=D[aj.dimension].brush.y().domain();if(aj.hasOnlyNaN){aj.extent[1]=(D[aj.dimension].domain()[1]-ai[0])*(aj.extent[1]-aj.extent[0])/(aa[aj.dimension]-aj.extent[0])+ai[0];}if(aj.hasNaN){aj.extent[0]=ai[0];}if(ah){D[aj.dimension].brush.extent(aj.extent);}});m.select(".nv-brushBackground").each(function(ai){d3.select(this).call(D[ai.key].brush);}).selectAll("rect").attr("x",-8).attr("width",16);ae();}function H(){if(o===false){o=true;ac(true);}}function F(){y=l.filter(function(ah){return !D[ah].brush.empty();});S=y.map(function(ah){return D[ah].brush.extent();});r=[];y.forEach(function(ah,ai){r[ai]={dimension:ah,extent:S[ai],hasNaN:false,hasOnlyNaN:false};});c=[];s.style("display",function(ah){var ai=y.every(function(ak,aj){if((isNaN(ah.values[ak])||isNaN(parseFloat(ah.values[ak])))&&S[aj][0]==D[ak].brush.y().domain()[0]){return true;}return(S[aj][0]<=ah.values[ak]&&ah.values[ak]<=S[aj][1])&&!isNaN(parseFloat(ah.values[ak]));});if(ai){c.push(ah);}return ai?null:"none";});ae();n.brush({filters:r,active:c});}function G(){var ah=y.length>0?true:false;r.forEach(function(ai){if(ai.extent[0]===D[ai.dimension].brush.y().domain()[0]&&g.indexOf(ai.dimension)>=0){ai.hasNaN=true;}if(ai.extent[1]<D[ai.dimension].domain()[0]){ai.hasOnlyNaN=true;}});n.brushEnd(c,ah);}function ae(){m.select(".nv-axis").each(function(ah,aj){var ai=r.filter(function(ak){return ak.dimension==ah.key;});J[ah.key]=D[ah.key].domain();if(ai.length!=0&&o){J[ah.key]=[];if(ai[0].extent[1]>D[ah.key].domain()[0]){J[ah.key]=[ai[0].extent[1]];}if(ai[0].extent[0]>=D[ah.key].domain()[0]){J[ah.key].push(ai[0].extent[0]);}}d3.select(this).call(f.scale(D[ah.key]).tickFormat(ah.format).tickValues(J[ah.key]));});}function R(ah){p[ah.key]=this.parentNode.__origin__=C(ah.key);h.attr("visibility","hidden");}function Q(ah){p[ah.key]=Math.min(e,Math.max(0,this.parentNode.__origin__+=d3.event.x));s.attr("d",ab);q.sort(function(ai,aj){return M(ai.key)-M(aj.key);});q.forEach(function(ai,aj){return ai.currentPosition=aj;});C.domain(q.map(function(ai){return ai.key;}));m.attr("transform",function(ai){return"translate("+M(ai.key)+")";});}function P(ah,ai){delete this.parentNode.__origin__;delete p[ah.key];d3.select(this.parentNode).attr("transform","translate("+C(ah.key)+")");s.attr("d",ab);h.attr("d",ab).attr("visibility",null);n.dimensionsOrder(q);}function M(ah){var ai=p[ah];return ai==null?C(ah):ai;}});return i;}i.dispatch=n;i.options=a.utils.optionsFunc.bind(i);i._options=Object.create({},{width:{get:function(){return B;},set:function(x){B=x;}},height:{get:function(){return t;},set:function(x){t=x;}},dimensionData:{get:function(){return k;},set:function(x){k=x;}},displayBrush:{get:function(){return o;},set:function(x){o=x;}},filters:{get:function(){return r;},set:function(x){r=x;}},active:{get:function(){return c;},set:function(x){c=x;}},lineTension:{get:function(){return v;},set:function(x){v=x;}},undefinedValuesLabel:{get:function(){return A;},set:function(x){A=x;}},dimensions:{get:function(){return k.map(function(x){return x.key;});},set:function(x){a.deprecated("dimensions","use dimensionData instead");if(k.length===0){x.forEach(function(y){k.push({key:y});});}else{x.forEach(function(E,y){k[y].key=E;});}}},dimensionNames:{get:function(){return k.map(function(x){return x.key;});},set:function(x){a.deprecated("dimensionNames","use dimensionData instead");l=[];if(k.length===0){x.forEach(function(y){k.push({key:y});});}else{x.forEach(function(E,y){k[y].key=E;});}}},dimensionFormats:{get:function(){return k.map(function(x){return x.format;});},set:function(x){a.deprecated("dimensionFormats","use dimensionData instead");if(k.length===0){x.forEach(function(y){k.push({format:y});});}else{x.forEach(function(y,E){k[E].format=y;});}}},margin:{get:function(){return w;},set:function(x){w.top=x.top!==undefined?x.top:w.top;w.right=x.right!==undefined?x.right:w.right;w.bottom=x.bottom!==undefined?x.bottom:w.bottom;w.left=x.left!==undefined?x.left:w.left;}},color:{get:function(){return j;},set:function(x){j=a.utils.getColor(x);}}});a.utils.initOptions(i);return i;};a.models.parallelCoordinatesChart=function(){var q=a.models.parallelCoordinates();var l=a.models.legend();var w=a.models.tooltip();var h=a.models.tooltip();var m={top:0,right:0,bottom:0,left:0},n=null,x=null,k=null,s=true,d=a.utils.defaultColor(),t=a.utils.state(),g=[],j=true,f=null,p=null,o="undefined",i=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),e=function(){return showControls?180:0;};var r=a.utils.renderWatch(i);var u=function(y){return function(){return{active:y.map(function(z){return !z.disabled;})};};};var v=function(y){return function(z){if(z.active!==undefined){y.forEach(function(B,A){B.disabled=!z.active[A];});}};};w.contentGenerator(function(y){var z='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+y.color+'"></div></td><td><strong>'+y.key+"</strong></td></tr></thead>";if(y.series.length!==0){z=z+'<tbody><tr><td height ="10px"></td></tr>';y.series.forEach(function(A){z=z+'<tr><td class="legend-color-guide"><div style="background-color:'+A.color+'"></div></td><td class="key">'+A.key+'</td><td class="value">'+A.value+"</td></tr>";});z=z+"</tbody>";}z=z+"</table>";return z;});function c(y){r.reset();r.models(q);y.each(function(C){var B=d3.select(this);a.utils.initSVG(B);var H=this;var A=a.utils.availableWidth(x,B,m),z=a.utils.availableHeight(k,B,m);c.update=function(){B.call(c);};c.container=this;t.setter(v(g),c.update).getter(u(g)).update();t.disabled=g.map(function(J){return !!J.disabled;});g=g.map(function(J){J.disabled=!!J.disabled;return J;});g.forEach(function(J,K){J.originalPosition=isNaN(J.originalPosition)?K:J.originalPosition;J.currentPosition=isNaN(J.currentPosition)?K:J.currentPosition;});if(!f){var F;f={};for(F in t){if(t[F] instanceof Array){f[F]=t[F].slice(0);}else{f[F]=t[F];}}}if(!C||!C.length){a.utils.noData(c,B);return c;}else{B.selectAll(".nv-noData").remove();}var I=B.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([C]);var E=I.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g");var D=I.select("g");E.append("g").attr("class","nv-parallelCoordinatesWrap");E.append("g").attr("class","nv-legendWrap");D.select("rect").attr("width",A).attr("height",(z>0)?z:0);if(!s){D.select(".nv-legendWrap").selectAll("*").remove();}else{l.width(A).color(function(J){return"rgb(188,190,192)";});D.select(".nv-legendWrap").datum(g.sort(function(J,K){return J.originalPosition-K.originalPosition;})).call(l);if(!n&&l.height()!==m.top){m.top=l.height();z=a.utils.availableHeight(k,B,m);}I.select(".nv-legendWrap").attr("transform","translate( 0 ,"+(-m.top)+")");}I.attr("transform","translate("+m.left+","+m.top+")");q.width(A).height(z).dimensionData(g).displayBrush(j);var G=D.select(".nv-parallelCoordinatesWrap ").datum(C);G.transition().call(q);q.dispatch.on("brushEnd",function(J,K){if(K){j=true;i.brushEnd(J);}else{j=false;}});l.dispatch.on("stateChange",function(K){for(var J in K){t[J]=K[J];}i.stateChange(t);c.update();});q.dispatch.on("dimensionsOrder",function(J){g.sort(function(L,M){return L.currentPosition-M.currentPosition;});var K=false;g.forEach(function(L,M){L.currentPosition=M;if(L.currentPosition!==L.originalPosition){K=true;}});i.dimensionsOrder(g,K);});i.on("changeState",function(J){if(typeof J.disabled!=="undefined"){g.forEach(function(L,K){L.disabled=J.disabled[K];});t.disabled=J.disabled;}c.update();});});r.renderEnd("parraleleCoordinateChart immediate");return c;}q.dispatch.on("elementMouseover.tooltip",function(y){var z={key:y.label,color:y.color,series:[]};if(y.values){Object.keys(y.values).forEach(function(A){var B=y.dimensions.filter(function(D){return D.key===A;})[0];if(B){var C;if(isNaN(y.values[A])||isNaN(parseFloat(y.values[A]))){C=o;}else{C=B.format(y.values[A]);}z.series.push({idx:B.currentPosition,key:A,value:C,color:B.color});}});z.series.sort(function(A,B){return A.idx-B.idx;});}w.data(z).hidden(false);});q.dispatch.on("elementMouseout.tooltip",function(y){w.hidden(true);});q.dispatch.on("elementMousemove.tooltip",function(){w();});c.dispatch=i;c.parallelCoordinates=q;c.legend=l;c.tooltip=w;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return x;},set:function(y){x=y;}},height:{get:function(){return k;},set:function(y){k=y;}},showLegend:{get:function(){return s;},set:function(y){s=y;}},defaultState:{get:function(){return f;},set:function(y){f=y;}},dimensionData:{get:function(){return g;},set:function(y){g=y;}},displayBrush:{get:function(){return j;},set:function(y){j=y;}},noData:{get:function(){return p;},set:function(y){p=y;}},nanValue:{get:function(){return o;},set:function(y){o=y;}},margin:{get:function(){return m;},set:function(y){if(y.top!==undefined){m.top=y.top;n=y.top;}m.right=y.right!==undefined?y.right:m.right;m.bottom=y.bottom!==undefined?y.bottom:m.bottom;m.left=y.left!==undefined?y.left:m.left;}},color:{get:function(){return d;},set:function(y){d=a.utils.getColor(y);l.color(d);q.color(d);}}});a.utils.inheritOptions(c,q);a.utils.initOptions(c);return c;};a.models.pie=function(){var y={top:0,right:0,bottom:0,left:0},G=500,r=500,o=function(H){return H.x;},p=function(H){return H.y;},t=Math.floor(Math.random()*10000),h=null,g=a.utils.defaultColor(),F=d3.format(",.2f"),B=true,u=false,x="key",w=0.02,s=false,k=false,D=false,q=true,E=0,v=false,C=false,z=false,n=false,i=0,l=0.5,m=250,e=[],j=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd");var c=[];var d=[];var A=a.utils.renderWatch(j);function f(H){A.reset();H.each(function(U){var Q=G-y.left-y.right,P=r-y.top-y.bottom,ah=Math.min(Q,P)/2,N=[],M=[];h=d3.select(this);if(e.length===0){var ad=ah-ah/10;var aa=l*ah;for(var Z=0;Z<U[0].length;Z++){N.push(ad);M.push(aa);}}else{if(q){N=e.map(function(al){return(al.outer-al.outer/10)*ah;});M=e.map(function(al){return(al.inner-al.inner/10)*ah;});l=d3.min(e.map(function(al){return(al.inner-al.inner/10);}));}else{N=e.map(function(al){return al.outer*ah;});M=e.map(function(al){return al.inner*ah;});l=d3.min(e.map(function(al){return al.inner;}));}}a.utils.initSVG(h);var aj=h.selectAll(".nv-wrap.nv-pie").data(U);var ak=aj.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+t);var X=ak.append("g");var V=aj.select("g");var W=X.append("g").attr("class","nv-pie");X.append("g").attr("class","nv-pieLabels");aj.attr("transform","translate("+y.left+","+y.top+")");V.select(".nv-pie").attr("transform","translate("+Q/2+","+P/2+")");V.select(".nv-pieLabels").attr("transform","translate("+Q/2+","+P/2+")");h.on("click",function(al,am){j.chartClick({data:al,index:am,pos:d3.event,id:t});});c=[];d=[];for(var Z=0;Z<U[0].length;Z++){var K=d3.svg.arc().outerRadius(N[Z]);var L=d3.svg.arc().outerRadius(N[Z]+5);if(C!==false){K.startAngle(C);L.startAngle(C);}if(n!==false){K.endAngle(n);L.endAngle(n);}if(k){K.innerRadius(M[Z]);L.innerRadius(M[Z]);}if(K.cornerRadius&&i){K.cornerRadius(i);L.cornerRadius(i);}c.push(K);d.push(L);}var af=d3.layout.pie().sort(null).value(function(al){return al.disabled?0:p(al);});if(af.padAngle&&z){af.padAngle(z);}if(k&&D){W.append("text").attr("class","nv-pie-title");aj.select(".nv-pie-title").style("text-anchor","middle").text(function(al){return D;}).style("font-size",(Math.min(Q,P))*l*2/(D.length+2)+"px").attr("dy","0.35em").attr("transform",function(al,am){return"translate(0, "+E+")";});}var ai=aj.select(".nv-pie").selectAll(".nv-slice").data(af);var ag=aj.select(".nv-pieLabels").selectAll(".nv-label").data(af);ai.exit().remove();ag.exit().remove();var I=ai.enter().append("g");I.attr("class","nv-slice");I.on("mouseover",function(al,am){d3.select(this).classed("hover",true);if(q){d3.select(this).select("path").transition().duration(70).attr("d",d[am]);}j.elementMouseover({data:al.data,index:am,color:d3.select(this).style("fill"),percent:(al.endAngle-al.startAngle)/(2*Math.PI)});});I.on("mouseout",function(al,am){d3.select(this).classed("hover",false);if(q){d3.select(this).select("path").transition().duration(50).attr("d",c[am]);}j.elementMouseout({data:al.data,index:am});});I.on("mousemove",function(al,am){j.elementMousemove({data:al.data,index:am});});I.on("click",function(al,an){var am=this;j.elementClick({data:al.data,index:an,color:d3.select(this).style("fill"),event:d3.event,element:am});});I.on("dblclick",function(al,am){j.elementDblClick({data:al.data,index:am,color:d3.select(this).style("fill")});});ai.attr("fill",function(al,am){return g(al.data,am);});ai.attr("stroke",function(al,am){return g(al.data,am);});var ae=I.append("path").each(function(al){this._current=al;});ai.select("path").transition().duration(m).attr("d",function(al,am){return c[am](al);}).attrTween("d",O);if(B){var ac=[];for(var Z=0;Z<U[0].length;Z++){ac.push(c[Z]);if(u){if(k){ac[Z]=d3.svg.arc().outerRadius(c[Z].outerRadius());if(C!==false){ac[Z].startAngle(C);}if(n!==false){ac[Z].endAngle(n);}}}else{if(!k){ac[Z].innerRadius(0);}}}ag.enter().append("g").classed("nv-label",true).each(function(al,an){var am=d3.select(this);am.attr("transform",function(ao,ap){if(v){ao.outerRadius=N[ap]+10;ao.innerRadius=N[ap]+15;var aq=(ao.startAngle+ao.endAngle)/2*(180/Math.PI);if((ao.startAngle+ao.endAngle)/2<Math.PI){aq-=90;}else{aq+=90;}return"translate("+ac[ap].centroid(ao)+") rotate("+aq+")";}else{ao.outerRadius=ah+10;ao.innerRadius=ah+15;return"translate("+ac[ap].centroid(ao)+")";}});am.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);am.append("text").style("text-anchor",v?((al.startAngle+al.endAngle)/2<Math.PI?"start":"end"):"middle").style("fill","#000");});var ab={};var R=14;var S=140;var T=function(al){return Math.floor(al[0]/S)*S+","+Math.floor(al[1]/R)*R;};var Y=function(al){return(al.endAngle-al.startAngle)/(2*Math.PI);};ag.watchTransition(A,"pie labels").attr("transform",function(am,ao){if(v){am.outerRadius=N[ao]+10;am.innerRadius=N[ao]+15;var aq=(am.startAngle+am.endAngle)/2*(180/Math.PI);if((am.startAngle+am.endAngle)/2<Math.PI){aq-=90;}else{aq+=90;}return"translate("+ac[ao].centroid(am)+") rotate("+aq+")";}else{am.outerRadius=ah+10;am.innerRadius=ah+15;var al=ac[ao].centroid(am);var ap=Y(am);if(am.value&&ap>=w){var an=T(al);if(ab[an]){al[1]-=R;}ab[T(al)]=true;}return"translate("+al+")";}});ag.select(".nv-label text").style("text-anchor",function(al,am){return v?((al.startAngle+al.endAngle)/2<Math.PI?"start":"end"):"middle";}).text(function(al,am){var ao=Y(al);var an="";if(!al.value||ao<w){return"";}if(typeof x==="function"){an=x(al,am,{key:o(al.data),value:p(al.data),percent:F(ao)});}else{switch(x){case"key":an=o(al.data);break;case"value":an=F(p(al.data));break;case"percent":an=d3.format("%")(ao);break;}}return an;});if(s){ag.each(function(ap,aq){if(!this.getBBox){return;}var al=this.getBBox(),ao=ac[aq].centroid(ap);var ar={x:ao[0]+al.x,y:ao[1]+al.y};var at={x:ar.x+al.width,y:ar.y};var am={x:ar.x,y:ar.y+al.height};var an={x:ar.x+al.width,y:ar.y+al.height};ap.visible=a.utils.pointIsInArc(ar,ap,K)&&a.utils.pointIsInArc(at,ap,K)&&a.utils.pointIsInArc(am,ap,K)&&a.utils.pointIsInArc(an,ap,K);}).style("display",function(al){return al.visible?null:"none";});}}function J(am){var al=(am.startAngle+am.endAngle)*90/Math.PI-90;return al>90?al-180:al;}function O(al,an){al.endAngle=isNaN(al.endAngle)?0:al.endAngle;al.startAngle=isNaN(al.startAngle)?0:al.startAngle;if(!k){al.innerRadius=0;}var am=d3.interpolate(this._current,al);this._current=am(0);return function(ao){return c[an](am(ao));};}});A.renderEnd("pie immediate");return f;}f.dispatch=j;f.options=a.utils.optionsFunc.bind(f);f._options=Object.create({},{arcsRadius:{get:function(){return e;},set:function(H){e=H;}},width:{get:function(){return G;},set:function(H){G=H;}},height:{get:function(){return r;},set:function(H){r=H;}},showLabels:{get:function(){return B;},set:function(H){B=H;}},title:{get:function(){return D;},set:function(H){D=H;}},titleOffset:{get:function(){return E;},set:function(H){E=H;}},labelThreshold:{get:function(){return w;},set:function(H){w=H;}},hideOverlapLabels:{get:function(){return s;},set:function(H){s=H;}},valueFormat:{get:function(){return F;},set:function(H){F=H;}},x:{get:function(){return o;},set:function(H){o=H;}},id:{get:function(){return t;},set:function(H){t=H;}},endAngle:{get:function(){return n;},set:function(H){n=H;}},startAngle:{get:function(){return C;},set:function(H){C=H;}},padAngle:{get:function(){return z;},set:function(H){z=H;}},cornerRadius:{get:function(){return i;},set:function(H){i=H;}},donutRatio:{get:function(){return l;},set:function(H){l=H;}},labelsOutside:{get:function(){return u;},set:function(H){u=H;}},labelSunbeamLayout:{get:function(){return v;},set:function(H){v=H;}},donut:{get:function(){return k;},set:function(H){k=H;}},growOnHover:{get:function(){return q;},set:function(H){q=H;}},pieLabelsOutside:{get:function(){return u;},set:function(H){u=H;a.deprecated("pieLabelsOutside","use labelsOutside instead");}},donutLabelsOutside:{get:function(){return u;},set:function(H){u=H;a.deprecated("donutLabelsOutside","use labelsOutside instead");}},labelFormat:{get:function(){return F;},set:function(H){F=H;a.deprecated("labelFormat","use valueFormat instead");}},margin:{get:function(){return y;},set:function(H){y.top=typeof H.top!="undefined"?H.top:y.top;y.right=typeof H.right!="undefined"?H.right:y.right;y.bottom=typeof H.bottom!="undefined"?H.bottom:y.bottom;y.left=typeof H.left!="undefined"?H.left:y.left;}},duration:{get:function(){return m;},set:function(H){m=H;A.reset(m);}},y:{get:function(){return p;},set:function(H){p=d3.functor(H);}},color:{get:function(){return g;},set:function(H){g=a.utils.getColor(H);}},labelType:{get:function(){return x;},set:function(H){x=H||"key";}}});a.utils.initOptions(f);return f;};a.models.pieChart=function(){var n=a.models.pie();var i=a.models.legend();var u=a.models.tooltip();var k={top:30,right:20,bottom:20,left:20},l=null,v=null,h=null,q=false,p=true,j="top",d=a.utils.defaultColor(),r=a.utils.state(),e=null,m=null,g=250,f=d3.dispatch("stateChange","changeState","renderEnd");u.duration(0).headerEnabled(false).valueFormatter(function(w,x){return n.valueFormat()(w,x);});var o=a.utils.renderWatch(f);var s=function(w){return function(){return{active:w.map(function(x){return !x.disabled;})};};};var t=function(w){return function(x){if(x.active!==undefined){w.forEach(function(z,y){z.disabled=!x.active[y];});}};};function c(w){o.reset();o.models(n);w.each(function(A){var z=d3.select(this);a.utils.initSVG(z);var G=this;var y=a.utils.availableWidth(v,z,k),x=a.utils.availableHeight(h,z,k);c.update=function(){z.transition().call(c);};c.container=this;r.setter(t(A),c.update).getter(s(A)).update();r.disabled=A.map(function(I){return !!I.disabled;});if(!e){var D;e={};for(D in r){if(r[D] instanceof Array){e[D]=r[D].slice(0);}else{e[D]=r[D];}}}if(!A||!A.length){a.utils.noData(c,z);return c;}else{z.selectAll(".nv-noData").remove();}var H=z.selectAll("g.nv-wrap.nv-pieChart").data([A]);var C=H.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g");var B=H.select("g");C.append("g").attr("class","nv-pieWrap");C.append("g").attr("class","nv-legendWrap");if(!p){B.select(".nv-legendWrap").selectAll("*").remove();}else{if(j==="top"){i.width(y).key(n.x());H.select(".nv-legendWrap").datum(A).call(i);if(!l&&i.height()!==k.top){k.top=i.height();x=a.utils.availableHeight(h,z,k);}H.select(".nv-legendWrap").attr("transform","translate(0,"+(-k.top)+")");}else{if(j==="right"){var E=a.models.legend().width();if(y/2<E){E=(y/2);}i.height(x).key(n.x());i.width(E);y-=i.width();H.select(".nv-legendWrap").datum(A).call(i).attr("transform","translate("+(y)+",0)");}else{if(j==="bottom"){i.width(y).key(n.x());H.select(".nv-legendWrap").datum(A).call(i);k.bottom=i.height();x=a.utils.availableHeight(h,z,k);H.select(".nv-legendWrap").attr("transform","translate(0,"+x+")");}}}}H.attr("transform","translate("+k.left+","+k.top+")");n.width(y).height(x);var F=B.select(".nv-pieWrap").datum([A]);d3.transition(F).call(n);i.dispatch.on("stateChange",function(J){for(var I in J){r[I]=J[I];}f.stateChange(r);c.update();});f.on("changeState",function(I){if(typeof I.disabled!=="undefined"){A.forEach(function(K,J){K.disabled=I.disabled[J];});r.disabled=I.disabled;}c.update();});});o.renderEnd("pieChart immediate");return c;}n.dispatch.on("elementMouseover.tooltip",function(w){w.series={key:c.x()(w.data),value:c.y()(w.data),color:w.color,percent:w.percent};if(!q){delete w.percent;delete w.series.percent;}u.data(w).hidden(false);});n.dispatch.on("elementMouseout.tooltip",function(w){u.hidden(true);});n.dispatch.on("elementMousemove.tooltip",function(w){u();});c.legend=i;c.dispatch=f;c.pie=n;c.tooltip=u;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return v;},set:function(w){v=w;}},height:{get:function(){return h;},set:function(w){h=w;}},noData:{get:function(){return m;},set:function(w){m=w;}},showTooltipPercent:{get:function(){return q;},set:function(w){q=w;}},showLegend:{get:function(){return p;},set:function(w){p=w;}},legendPosition:{get:function(){return j;},set:function(w){j=w;}},defaultState:{get:function(){return e;},set:function(w){e=w;}},color:{get:function(){return d;},set:function(w){d=w;i.color(d);n.color(d);}},duration:{get:function(){return g;},set:function(w){g=w;o.reset(g);n.duration(g);}},margin:{get:function(){return k;},set:function(w){if(w.top!==undefined){k.top=w.top;l=w.top;}k.right=w.right!==undefined?w.right:k.right;k.bottom=w.bottom!==undefined?w.bottom:k.bottom;k.left=w.left!==undefined?w.left:k.left;}}});a.utils.inheritOptions(c,n);a.utils.initOptions(c);return c;};a.models.sankey=function(){var r={},p=24,n=8,u=[1,1],o=[],k=[],t=true;var i=function(w){g();h();e();f(w);};var q=function(){d();};var j=function(){var w=0.5;function x(y){var A=y.source.x+y.source.dx,B=y.target.x,E=d3.interpolateNumber(A,B),C=E(w),D=E(1-w),F=y.source.y+y.sy+y.dy/2,G=y.target.y+y.ty+y.dy/2;var z="M"+A+","+F+"C"+C+","+F+" "+D+","+G+" "+B+","+G;return z;}x.curvature=function(y){if(!arguments.length){return w;}w=+y;return x;};return x;};var c=function(w){return w.y+w.dy/2;};function g(){o.forEach(function(w){w.sourceLinks=[];w.targetLinks=[];});k.forEach(function(w){var x=w.source,y=w.target;if(typeof x==="number"){x=w.source=o[w.source];}if(typeof y==="number"){y=w.target=o[w.target];}x.sourceLinks.push(w);y.targetLinks.push(w);});}function h(){o.forEach(function(w){w.value=Math.max(d3.sum(w.sourceLinks,v),d3.sum(w.targetLinks,v));});}function e(){var y=o,w,z=0;while(y.length&&z<o.length){w=[];y.forEach(function(x){x.x=z;x.dx=p;x.sourceLinks.forEach(function(A){if(w.indexOf(A.target)<0){w.push(A.target);}});});y=w;++z;}if(t){l(z);}s((u[0]-p)/(z-1));}function m(){o.forEach(function(w){if(!w.targetLinks.length){w.x=d3.min(w.sourceLinks,function(x){return x.target.x;})-1;}});}function l(w){o.forEach(function(x){if(!x.sourceLinks.length){x.x=w-1;}});}function s(w){o.forEach(function(x){x.x*=w;});}function f(z){var A=d3.nest().key(function(E){return E.x;}).sortKeys(d3.ascending).entries(o).map(function(E){return E.values;});y();D();d();for(var w=1;z>0;--z){C(w*=0.99);D();d();B(w);D();d();}function y(){var E=d3.min(A,function(F){return(u[1]-(F.length-1)*n)/d3.sum(F,v);});A.forEach(function(F){F.forEach(function(H,G){H.y=G;H.dy=H.value*E;});});k.forEach(function(F){F.dy=F.value*E;});}function B(E){A.forEach(function(H,G){H.forEach(function(I){if(I.targetLinks.length){var J=d3.sum(I.targetLinks,F)/d3.sum(I.targetLinks,v);I.y+=(J-c(I))*E;}});});function F(G){return(G.source.y+G.sy+G.dy/2)*G.value;}}function C(E){A.slice().reverse().forEach(function(G){G.forEach(function(H){if(H.sourceLinks.length){var I=d3.sum(H.sourceLinks,F)/d3.sum(H.sourceLinks,v);H.y+=(I-c(H))*E;}});});function F(G){return(G.target.y+G.ty+G.dy/2)*G.value;}}function D(){A.forEach(function(I){var H,E,J=0,G=I.length,F;I.sort(x);for(F=0;F<G;++F){H=I[F];E=J-H.y;if(E>0){H.y+=E;}J=H.y+H.dy+n;}E=J-n-u[1];if(E>0){J=H.y-=E;for(F=G-2;F>=0;--F){H=I[F];E=H.y+H.dy+n-J;if(E>0){H.y-=E;}J=H.y;}}});}function x(E,F){return E.y-F.y;}}function d(){o.forEach(function(y){y.sourceLinks.sort(x);y.targetLinks.sort(w);});o.forEach(function(y){var z=0,A=0;y.sourceLinks.forEach(function(B){B.sy=z;z+=B.dy;});y.targetLinks.forEach(function(B){B.ty=A;A+=B.dy;});});function w(y,z){return y.source.y-z.source.y;}function x(y,z){return y.target.y-z.target.y;}}function v(w){return w.value;}r.options=a.utils.optionsFunc.bind(r);r._options=Object.create({},{nodeWidth:{get:function(){return p;},set:function(w){p=+w;}},nodePadding:{get:function(){return n;},set:function(w){n=w;}},nodes:{get:function(){return o;},set:function(w){o=w;}},links:{get:function(){return k;},set:function(w){k=w;}},size:{get:function(){return u;},set:function(w){u=w;}},sinksRight:{get:function(){return t;},set:function(w){t=w;}},layout:{get:function(){i(32);},set:function(w){i(w);}},relayout:{get:function(){q();},set:function(w){}},center:{get:function(){return c();},set:function(w){if(typeof w==="function"){c=w;}}},link:{get:function(){return j();},set:function(w){if(typeof w==="function"){j=w;}return j();}}});a.utils.initOptions(r);return r;};a.models.sankeyChart=function(){var j={top:5,right:0,bottom:5,left:0},p=a.models.sankey(),s=600,h=400,o=36,l=40,r="units",c=undefined;var g=d3.format(",.0f");var f=function(t){return g(t)+" "+r;};var e=d3.scale.category20();var i=function(t){return t.source.name+" → "+t.target.name+"\n"+f(t.value);};var k=function(t){return t.color=e(t.name.replace(/ .*/,""));};var m=function(t){return d3.rgb(t.color).darker(2);};var n=function(t){return t.name+"\n"+f(t.value);};var q=function(t,u){t.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(u);};function d(t){t.each(function(u){var C={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},{source:3,target:5,value:186}]};var x=false;var v=false;if((typeof u.nodes==="object"&&u.nodes.length)>=0&&(typeof u.links==="object"&&u.links.length)>=0){x=true;}if(u.nodes&&u.nodes.length>0&&u.links&&u.links.length>0){v=true;}if(!x){console.error("NVD3 Sankey chart error:","invalid data format for",u);console.info("Valid data format is: ",C,JSON.stringify(C));q(t,"Error loading chart, data is invalid");return false;}if(!v){q(t,"No data available");return false;}var B=t.append("svg").attr("width",s).attr("height",h).append("g").attr("class","nvd3 nv-wrap nv-sankeyChart");p.nodeWidth(o).nodePadding(l).size([s,h]);var A=p.link();p.nodes(u.nodes).links(u.links).layout(32).center(c);var y=B.append("g").selectAll(".link").data(u.links).enter().append("path").attr("class","link").attr("d",A).style("stroke-width",function(D){return Math.max(1,D.dy);}).sort(function(D,E){return E.dy-D.dy;});y.append("title").text(i);var z=B.append("g").selectAll(".node").data(u.nodes).enter().append("g").attr("class","node").attr("transform",function(D){return"translate("+D.x+","+D.y+")";}).call(d3.behavior.drag().origin(function(D){return D;}).on("dragstart",function(){this.parentNode.appendChild(this);}).on("drag",w));z.append("rect").attr("height",function(D){return D.dy;}).attr("width",p.nodeWidth()).style("fill",k).style("stroke",m).append("title").text(n);z.append("text").attr("x",-6).attr("y",function(D){return D.dy/2;}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(D){return D.name;}).filter(function(D){return D.x<s/2;}).attr("x",6+p.nodeWidth()).attr("text-anchor","start");function w(D){d3.select(this).attr("transform","translate("+D.x+","+(D.y=Math.max(0,Math.min(h-D.dy,d3.event.y)))+")");p.relayout();y.attr("d",A);}});return d;}d.options=a.utils.optionsFunc.bind(d);d._options=Object.create({},{units:{get:function(){return r;},set:function(t){r=t;}},width:{get:function(){return s;},set:function(t){s=t;}},height:{get:function(){return h;},set:function(t){h=t;}},format:{get:function(){return f;},set:function(t){f=t;}},linkTitle:{get:function(){return i;},set:function(t){i=t;}},nodeWidth:{get:function(){return o;},set:function(t){o=t;}},nodePadding:{get:function(){return l;},set:function(t){l=t;}},center:{get:function(){return c;},set:function(t){c=t;}},margin:{get:function(){return j;},set:function(t){j.top=t.top!==undefined?t.top:j.top;j.right=t.right!==undefined?t.right:j.right;j.bottom=t.bottom!==undefined?t.bottom:j.bottom;j.left=t.left!==undefined?t.left:j.left;}},nodeStyle:{get:function(){return{};},set:function(t){k=t.fillColor!==undefined?t.fillColor:k;m=t.strokeColor!==undefined?t.strokeColor:m;n=t.title!==undefined?t.title:n;}}});a.utils.initOptions(d);return d;};a.models.scatter=function(){var E={top:0,right:0,bottom:0,left:0},S=null,w=null,i=a.utils.defaultColor(),J=null,B=Math.floor(Math.random()*100000),j=null,U=d3.scale.linear(),Z=d3.scale.linear(),ae=d3.scale.linear(),u=function(x){return x.x;},v=function(x){return x.y;},t=function(x){return x.size||1;},s=function(x){return x.shape||"circle";},o=[],p=[],n=[],C=true,I=function(x){return !x.notActive;},G=false,H=0.1,f=false,h=true,M=false,g=function(){return 25;},X=null,ac=null,Y=null,ad=null,O=null,P=null,N=false,l=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),R=true,m=250,D=300,L=false;var V,aa,af,W,ab,T,A,Q,F=false,K=a.utils.renderWatch(l,m),d=[16,256],c={};function q(x){var y,z;y=x[0].series+":"+x[1];z=c[y]=c[y]||{};return z;}function k(x){var y,z;y=x[0].series+":"+x[1];delete c[y];}function r(y){var ag,ah,ai,x=q(y),z=false;for(ag=1;ag<arguments.length;ag+=2){ah=arguments[ag];ai=arguments[ag+1](y[0],y[1]);if(x[ah]!==ai||!x.hasOwnProperty(ah)){x[ah]=ai;z=true;}}return z;}function e(x){K.reset();x.each(function(ag){j=d3.select(this);var z=a.utils.availableWidth(S,j,E),y=a.utils.availableHeight(w,j,E);a.utils.initSVG(j);ag.forEach(function(ay,ax){ay.values.forEach(function(az){az.series=ax;});});var am=(typeof(e.yScale().base)==="function");var aq=(X&&ac&&O)?[]:d3.merge(ag.map(function(ax){return ax.values.map(function(ay,az){return{x:u(ay,az),y:v(ay,az),size:t(ay,az)};});}));U.domain(X||d3.extent(aq.map(function(ax){return ax.x;}).concat(o)));if(G&&ag[0]){U.range(Y||[(z*H+z)/(2*ag[0].values.length),z-z*(1+H)/(2*ag[0].values.length)]);}else{U.range(Y||[0,z]);}if(am){var an=d3.min(aq.map(function(ax){if(ax.y!==0){return ax.y;}}));Z.clamp(true).domain(ac||d3.extent(aq.map(function(ax){if(ax.y!==0){return ax.y;}else{return an*0.1;}}).concat(p))).range(ad||[y,0]);}else{Z.domain(ac||d3.extent(aq.map(function(ax){return ax.y;}).concat(p))).range(ad||[y,0]);}ae.domain(O||d3.extent(aq.map(function(ax){return ax.size;}).concat(n))).range(P||d);N=U.domain()[0]===U.domain()[1]||Z.domain()[0]===Z.domain()[1];if(U.domain()[0]===U.domain()[1]){U.domain()[0]?U.domain([U.domain()[0]-U.domain()[0]*0.01,U.domain()[1]+U.domain()[1]*0.01]):U.domain([-1,1]);}if(Z.domain()[0]===Z.domain()[1]){Z.domain()[0]?Z.domain([Z.domain()[0]-Z.domain()[0]*0.01,Z.domain()[1]+Z.domain()[1]*0.01]):Z.domain([-1,1]);}if(isNaN(U.domain()[0])){U.domain([0,1]);}if(isNaN(Z.domain()[0])){Z.domain([0,1]);}V=V||U;aa=aa||Z;af=af||ae;var ap=U(1)!==V(1)||Z(1)!==aa(1)||ae(1)!==af(1);T=T||S;A=A||w;var ar=T!==S||A!==w;W=W||[];var ai=W[0]!==U.domain()[0]||W[1]!==U.domain()[1];W=U.domain();ab=ab||[];ai=ai||ab[0]!==Z.domain()[0]||ab[1]!==Z.domain()[1];ab=Z.domain();var av=j.selectAll("g.nv-wrap.nv-scatter").data([ag]);var aw=av.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+B);var ah=aw.append("defs");var ak=aw.append("g");var aj=av.select("g");av.classed("nv-single-point",N);ak.append("g").attr("class","nv-groups");ak.append("g").attr("class","nv-point-paths");aw.append("g").attr("class","nv-point-clips");av.attr("transform","translate("+E.left+","+E.top+")");ah.append("clipPath").attr("id","nv-edge-clip-"+B).append("rect").attr("transform","translate( -10, -10)");av.select("#nv-edge-clip-"+B+" rect").attr("width",z+20).attr("height",(y>0)?y+20:0);aj.attr("clip-path",f?"url(#nv-edge-clip-"+B+")":"");function au(){F=false;if(!C){return false;}j.selectAll(".nv-point.hover").classed("hover",false);if(R===true){av.select(".nv-point-paths").selectAll("path").remove();var aD=d3.merge(ag.map(function(aH,aI){return aH.values.map(function(aJ,aK){var aL=u(aJ,aK);var aM=v(aJ,aK);return[a.utils.NaNtoZero(U(aL))+Math.random()*0.0001,a.utils.NaNtoZero(Z(aM))+Math.random()*0.0001,aI,aK,aJ];}).filter(function(aJ,aK){return I(aJ[4],aK);});}));if(aD.length==0){return false;}if(aD.length<3){aD.push([U.range()[0]-20,Z.range()[0]-20,null,null]);aD.push([U.range()[1]+20,Z.range()[1]+20,null,null]);aD.push([U.range()[0]-20,Z.range()[0]+20,null,null]);aD.push([U.range()[1]+20,Z.range()[1]-20,null,null]);}var ax=d3.geom.polygon([[-10,-10],[-10,w+10],[S+10,w+10],[S+10,-10]]);var ay=0.0001;aD=aD.sort(function(aH,aI){return((aH[0]-aI[0])||(aH[1]-aI[1]));});for(var az=0;az<aD.length-1;){if((Math.abs(aD[az][0]-aD[az+1][0])<ay)&&(Math.abs(aD[az][1]-aD[az+1][1])<ay)){aD.splice(az+1,1);}else{az++;}}var aE=d3.geom.voronoi(aD).map(function(aH,aI){return{data:ax.clip(aH),series:aD[aI][2],point:aD[aI][3]};});var aC=av.select(".nv-point-paths").selectAll("path").data(aE);var aG=aC.enter().append("svg:path").attr("d",function(aH){if(!aH||!aH.data||aH.data.length===0){return"M 0 0";}else{return"M"+aH.data.join(",")+"Z";}}).attr("id",function(aH,aI){return"nv-path-"+aI;}).attr("clip-path",function(aH,aI){return"url(#nv-clip-"+B+"-"+aI+")";});if(M){aG.style("fill",d3.rgb(230,230,230)).style("fill-opacity",0.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));}if(h){av.select(".nv-point-clips").selectAll("*").remove();var aB=av.select(".nv-point-clips").selectAll("clipPath").data(aD);var aF=aB.enter().append("svg:clipPath").attr("id",function(aH,aI){return"nv-clip-"+B+"-"+aI;}).append("svg:circle").attr("cx",function(aH){return aH[0];}).attr("cy",function(aH){return aH[1];}).attr("r",g);}var aA=function(aJ,aI,aK){if(F){return 0;}var aP=ag[aI.series];if(aP===undefined){return;}var aL=aP.values[aI.point];aL.color=i(aP,aI.series);aL.x=u(aL);aL.y=v(aL);var aH=j.node().getBoundingClientRect();var aO=window.pageYOffset||document.documentElement.scrollTop;var aN=window.pageXOffset||document.documentElement.scrollLeft;var aM={left:U(u(aL,aI.point))+aH.left+aN+E.left+10,top:Z(v(aL,aI.point))+aH.top+aO+E.top+10};aK({point:aL,series:aP,pos:aM,relativePos:[U(u(aL,aI.point))+E.left,Z(v(aL,aI.point))+E.top],seriesIndex:aI.series,pointIndex:aI.point,event:d3.event,element:aJ});};aC.on("click",function(aH){aA(this,aH,l.elementClick);}).on("dblclick",function(aH){aA(this,aH,l.elementDblClick);}).on("mouseover",function(aH){aA(this,aH,l.elementMouseover);}).on("mouseout",function(aH,aI){aA(this,aH,l.elementMouseout);});}else{av.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(aH,aJ){if(F||!ag[aH.series]){return 0;}var aL=ag[aH.series],aK=aL.values[aJ];var aI=this;l.elementClick({point:aK,series:aL,pos:[U(u(aK,aJ))+E.left,Z(v(aK,aJ))+E.top],relativePos:[U(u(aK,aJ))+E.left,Z(v(aK,aJ))+E.top],seriesIndex:aH.series,pointIndex:aJ,event:d3.event,element:aI});}).on("dblclick",function(aH,aI){if(F||!ag[aH.series]){return 0;}var aK=ag[aH.series],aJ=aK.values[aI];l.elementDblClick({point:aJ,series:aK,pos:[U(u(aJ,aI))+E.left,Z(v(aJ,aI))+E.top],relativePos:[U(u(aJ,aI))+E.left,Z(v(aJ,aI))+E.top],seriesIndex:aH.series,pointIndex:aI});}).on("mouseover",function(aH,aI){if(F||!ag[aH.series]){return 0;}var aK=ag[aH.series],aJ=aK.values[aI];l.elementMouseover({point:aJ,series:aK,pos:[U(u(aJ,aI))+E.left,Z(v(aJ,aI))+E.top],relativePos:[U(u(aJ,aI))+E.left,Z(v(aJ,aI))+E.top],seriesIndex:aH.series,pointIndex:aI,color:i(aH,aI)});}).on("mouseout",function(aH,aI){if(F||!ag[aH.series]){return 0;}var aK=ag[aH.series],aJ=aK.values[aI];l.elementMouseout({point:aJ,series:aK,pos:[U(u(aJ,aI))+E.left,Z(v(aJ,aI))+E.top],relativePos:[U(u(aJ,aI))+E.left,Z(v(aJ,aI))+E.top],seriesIndex:aH.series,pointIndex:aI,color:i(aH,aI)});});}}F=true;var al=av.select(".nv-groups").selectAll(".nv-group").data(function(ax){return ax;},function(ax){return ax.key;});al.enter().append("g").style("stroke-opacity",1e-06).style("fill-opacity",1e-06);al.exit().remove();al.attr("class",function(ax,ay){return(ax.classed||"")+" nv-group nv-series-"+ay;}).classed("nv-noninteractive",!C).classed("hover",function(ax){return ax.hover;});al.watchTransition(K,"scatter: groups").style("fill",function(ax,ay){return i(ax,ay);}).style("stroke",function(ax,ay){return ax.pointBorderColor||J||i(ax,ay);}).style("stroke-opacity",1).style("fill-opacity",0.5);var ao=al.selectAll("path.nv-point").data(function(ax){return ax.values.map(function(ay,az){return[ay,az];}).filter(function(ay,az){return I(ay[0],az);});});ao.enter().append("path").attr("class",function(ax){return"nv-point nv-point-"+ax[1];}).style("fill",function(ax){return ax.color;}).style("stroke",function(ax){return ax.color;}).attr("transform",function(ax){return"translate("+a.utils.NaNtoZero(V(u(ax[0],ax[1])))+","+a.utils.NaNtoZero(aa(v(ax[0],ax[1])))+")";}).attr("d",a.utils.symbol().type(function(ax){return s(ax[0]);}).size(function(ax){return ae(t(ax[0],ax[1]));}));ao.exit().each(k).remove();al.exit().selectAll("path.nv-point").watchTransition(K,"scatter exit").attr("transform",function(ax){return"translate("+a.utils.NaNtoZero(U(u(ax[0],ax[1])))+","+a.utils.NaNtoZero(Z(v(ax[0],ax[1])))+")";}).remove();ao.filter(function(ax){return r(ax,"x",u,"y",v)||ap||ar||ai;}).watchTransition(K,"scatter points").attr("transform",function(ax){return"translate("+a.utils.NaNtoZero(U(u(ax[0],ax[1])))+","+a.utils.NaNtoZero(Z(v(ax[0],ax[1])))+")";});ao.filter(function(ax){return r(ax,"shape",s,"size",t)||ap||ar||ai;}).watchTransition(K,"scatter points").attr("d",a.utils.symbol().type(function(ax){return s(ax[0]);}).size(function(ax){return ae(t(ax[0],ax[1]));}));if(L){var at=al.selectAll(".nv-label").data(function(ax){return ax.values.map(function(ay,az){return[ay,az];}).filter(function(ay,az){return I(ay[0],az);});});at.enter().append("text").style("fill",function(ax,ay){return ax.color;}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(ax){var ay=a.utils.NaNtoZero(V(u(ax[0],ax[1])))+Math.sqrt(ae(t(ax[0],ax[1]))/Math.PI)+2;return"translate("+ay+","+a.utils.NaNtoZero(aa(v(ax[0],ax[1])))+")";}).text(function(ax,ay){return ax[0].label;});at.exit().remove();al.exit().selectAll("path.nv-label").watchTransition(K,"scatter exit").attr("transform",function(ax){var ay=a.utils.NaNtoZero(U(u(ax[0],ax[1])))+Math.sqrt(ae(t(ax[0],ax[1]))/Math.PI)+2;return"translate("+ay+","+a.utils.NaNtoZero(Z(v(ax[0],ax[1])))+")";}).remove();at.each(function(ax){d3.select(this).classed("nv-label",true).classed("nv-label-"+ax[1],false).classed("hover",false);});at.watchTransition(K,"scatter labels").attr("transform",function(ax){var ay=a.utils.NaNtoZero(U(u(ax[0],ax[1])))+Math.sqrt(ae(t(ax[0],ax[1]))/Math.PI)+2;return"translate("+ay+","+a.utils.NaNtoZero(Z(v(ax[0],ax[1])))+")";});}if(D){clearTimeout(Q);Q=setTimeout(au,D);}else{au();}V=U.copy();aa=Z.copy();af=ae.copy();T=S;A=w;});K.renderEnd("scatter immediate");return e;}e.dispatch=l;e.options=a.utils.optionsFunc.bind(e);e._calls=new function(){this.clearHighlights=function(){a.dom.write(function(){j.selectAll(".nv-point.hover").classed("hover",false);});return null;};this.highlightPoint=function(z,y,x){a.dom.write(function(){j.select(".nv-groups").selectAll(".nv-series-"+z).selectAll(".nv-point-"+y).classed("hover",x);});};};l.on("elementMouseover.point",function(x){if(C){e._calls.highlightPoint(x.seriesIndex,x.pointIndex,true);}});l.on("elementMouseout.point",function(x){if(C){e._calls.highlightPoint(x.seriesIndex,x.pointIndex,false);}});e._options=Object.create({},{width:{get:function(){return S;},set:function(x){S=x;}},height:{get:function(){return w;},set:function(x){w=x;}},xScale:{get:function(){return U;},set:function(x){U=x;}},yScale:{get:function(){return Z;},set:function(x){Z=x;}},pointScale:{get:function(){return ae;},set:function(x){ae=x;}},xDomain:{get:function(){return X;},set:function(x){X=x;}},yDomain:{get:function(){return ac;},set:function(x){ac=x;}},pointDomain:{get:function(){return O;},set:function(x){O=x;}},xRange:{get:function(){return Y;},set:function(x){Y=x;}},yRange:{get:function(){return ad;},set:function(x){ad=x;}},pointRange:{get:function(){return P;},set:function(x){P=x;}},forceX:{get:function(){return o;},set:function(x){o=x;}},forceY:{get:function(){return p;},set:function(x){p=x;}},forcePoint:{get:function(){return n;},set:function(x){n=x;}},interactive:{get:function(){return C;},set:function(x){C=x;}},pointActive:{get:function(){return I;},set:function(x){I=x;}},padDataOuter:{get:function(){return H;},set:function(x){H=x;}},padData:{get:function(){return G;},set:function(x){G=x;}},clipEdge:{get:function(){return f;},set:function(x){f=x;}},clipVoronoi:{get:function(){return h;},set:function(x){h=x;}},clipRadius:{get:function(){return g;},set:function(x){g=x;}},showVoronoi:{get:function(){return M;},set:function(x){M=x;}},id:{get:function(){return B;},set:function(x){B=x;}},interactiveUpdateDelay:{get:function(){return D;},set:function(x){D=x;}},showLabels:{get:function(){return L;},set:function(x){L=x;}},pointBorderColor:{get:function(){return J;},set:function(x){J=x;}},x:{get:function(){return u;},set:function(x){u=d3.functor(x);}},y:{get:function(){return v;},set:function(x){v=d3.functor(x);}},pointSize:{get:function(){return t;},set:function(x){t=d3.functor(x);}},pointShape:{get:function(){return s;},set:function(x){s=d3.functor(x);}},margin:{get:function(){return E;},set:function(x){E.top=x.top!==undefined?x.top:E.top;E.right=x.right!==undefined?x.right:E.right;E.bottom=x.bottom!==undefined?x.bottom:E.bottom;E.left=x.left!==undefined?x.left:E.left;}},duration:{get:function(){return m;},set:function(x){m=x;K.reset(m);}},color:{get:function(){return i;},set:function(x){i=a.utils.getColor(x);}},useVoronoi:{get:function(){return R;},set:function(x){R=x;if(R===false){h=false;}}}});a.utils.initOptions(e);return e;};a.models.scatterChart=function(){var r=a.models.scatter(),H=a.models.axis(),K=a.models.axis(),l=a.models.legend(),h=a.models.distribution(),i=a.models.distribution(),D=a.models.tooltip();var m={top:30,right:20,bottom:50,left:75},n=null,E=null,k=null,e=null,d=a.utils.defaultColor(),F=r.xScale(),I=r.yScale(),s=false,t=false,v=true,w=true,z=true,q=false,A=a.utils.state(),f=null,g=d3.dispatch("stateChange","changeState","renderEnd"),o=null,j=250,u=false;r.xScale(F).yScale(I);H.orient("bottom").tickPadding(10);K.orient((q)?"right":"left").tickPadding(10);h.axis("x");i.axis("y");D.headerFormatter(function(x,y){return H.tickFormat()(x,y);}).valueFormatter(function(x,y){return K.tickFormat()(x,y);});var G,J,p=a.utils.renderWatch(g,j);var B=function(x){return function(){return{active:x.map(function(y){return !y.disabled;})};};};var C=function(x){return function(y){if(y.active!==undefined){x.forEach(function(M,L){M.disabled=!y.active[L];});}};};function c(x){p.reset();p.models(r);if(w){p.models(H);}if(z){p.models(K);}if(s){p.models(h);}if(t){p.models(i);}x.each(function(M){var T=this;e=d3.select(this);a.utils.initSVG(e);var L=a.utils.availableWidth(E,e,m),y=a.utils.availableHeight(k,e,m);c.update=function(){if(j===0){e.call(c);}else{e.transition().duration(j).call(c);}};c.container=this;A.setter(C(M),c.update).getter(B(M)).update();A.disabled=M.map(function(W){return !!W.disabled;});if(!f){var P;f={};for(P in A){if(A[P] instanceof Array){f[P]=A[P].slice(0);}else{f[P]=A[P];}}}if(!M||!M.length||!M.filter(function(W){return W.values.length;}).length){a.utils.noData(c,e);p.renderEnd("scatter immediate");return c;}else{e.selectAll(".nv-noData").remove();}F=r.xScale();I=r.yScale();var U=e.selectAll("g.nv-wrap.nv-scatterChart").data([M]);var V=U.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+r.id());var O=V.append("g");var N=U.select("g");O.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");O.append("g").attr("class","nv-x nv-axis");O.append("g").attr("class","nv-y nv-axis");O.append("g").attr("class","nv-scatterWrap");O.append("g").attr("class","nv-regressionLinesWrap");O.append("g").attr("class","nv-distWrap");O.append("g").attr("class","nv-legendWrap");if(q){N.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)");}if(!v){N.select(".nv-legendWrap").selectAll("*").remove();}else{var Q=L;l.width(Q);U.select(".nv-legendWrap").datum(M).call(l);if(!n&&l.height()!==m.top){m.top=l.height();y=a.utils.availableHeight(k,e,m);}U.select(".nv-legendWrap").attr("transform","translate(0,"+(-m.top)+")");}U.attr("transform","translate("+m.left+","+m.top+")");r.width(L).height(y).color(M.map(function(W,X){W.color=W.color||d(W,X);return W.color;}).filter(function(W,X){return !M[X].disabled;})).showLabels(u);U.select(".nv-scatterWrap").datum(M.filter(function(W){return !W.disabled;})).call(r);U.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+r.id()+")");var S=U.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(W){return W;});S.enter().append("g").attr("class","nv-regLines");var R=S.selectAll(".nv-regLine").data(function(W){return[W];});R.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);R.filter(function(W){return W.intercept&&W.slope;}).watchTransition(p,"scatterPlusLineChart: regline").attr("x1",F.range()[0]).attr("x2",F.range()[1]).attr("y1",function(W,X){return I(F.domain()[0]*W.slope+W.intercept);}).attr("y2",function(W,X){return I(F.domain()[1]*W.slope+W.intercept);}).style("stroke",function(W,X,Y){return d(W,Y);}).style("stroke-opacity",function(W,X){return(W.disabled||typeof W.slope==="undefined"||typeof W.intercept==="undefined")?0:1;});if(w){H.scale(F)._ticks(a.utils.calcTicksX(L/100,M)).tickSize(-y,0);N.select(".nv-x.nv-axis").attr("transform","translate(0,"+I.range()[0]+")").call(H);}if(z){K.scale(I)._ticks(a.utils.calcTicksY(y/36,M)).tickSize(-L,0);N.select(".nv-y.nv-axis").call(K);}if(s){h.getData(r.x()).scale(F).width(L).color(M.map(function(W,X){return W.color||d(W,X);}).filter(function(W,X){return !M[X].disabled;}));O.select(".nv-distWrap").append("g").attr("class","nv-distributionX");N.select(".nv-distributionX").attr("transform","translate(0,"+I.range()[0]+")").datum(M.filter(function(W){return !W.disabled;})).call(h);}if(t){i.getData(r.y()).scale(I).width(y).color(M.map(function(W,X){return W.color||d(W,X);}).filter(function(W,X){return !M[X].disabled;}));O.select(".nv-distWrap").append("g").attr("class","nv-distributionY");N.select(".nv-distributionY").attr("transform","translate("+(q?L:-i.size())+",0)").datum(M.filter(function(W){return !W.disabled;})).call(i);}l.dispatch.on("stateChange",function(X){for(var W in X){A[W]=X[W];}g.stateChange(A);c.update();});g.on("changeState",function(W){if(typeof W.disabled!=="undefined"){M.forEach(function(Y,X){Y.disabled=W.disabled[X];});A.disabled=W.disabled;}c.update();});r.dispatch.on("elementMouseout.tooltip",function(W){D.hidden(true);e.select(".nv-chart-"+r.id()+" .nv-series-"+W.seriesIndex+" .nv-distx-"+W.pointIndex).attr("y1",0);e.select(".nv-chart-"+r.id()+" .nv-series-"+W.seriesIndex+" .nv-disty-"+W.pointIndex).attr("x2",i.size());});r.dispatch.on("elementMouseover.tooltip",function(W){e.select(".nv-series-"+W.seriesIndex+" .nv-distx-"+W.pointIndex).attr("y1",W.relativePos[1]-y);e.select(".nv-series-"+W.seriesIndex+" .nv-disty-"+W.pointIndex).attr("x2",W.relativePos[0]+h.size());D.data(W).hidden(false);});G=F.copy();J=I.copy();});p.renderEnd("scatter with line immediate");return c;}c.dispatch=g;c.scatter=r;c.legend=l;c.xAxis=H;c.yAxis=K;c.distX=h;c.distY=i;c.tooltip=D;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return E;},set:function(x){E=x;}},height:{get:function(){return k;},set:function(x){k=x;}},container:{get:function(){return e;},set:function(x){e=x;}},showDistX:{get:function(){return s;},set:function(x){s=x;}},showDistY:{get:function(){return t;},set:function(x){t=x;}},showLegend:{get:function(){return v;},set:function(x){v=x;}},showXAxis:{get:function(){return w;},set:function(x){w=x;}},showYAxis:{get:function(){return z;},set:function(x){z=x;}},defaultState:{get:function(){return f;},set:function(x){f=x;}},noData:{get:function(){return o;},set:function(x){o=x;}},duration:{get:function(){return j;},set:function(x){j=x;}},showLabels:{get:function(){return u;},set:function(x){u=x;}},margin:{get:function(){return m;},set:function(x){if(x.top!==undefined){m.top=x.top;n=x.top;}m.right=x.right!==undefined?x.right:m.right;m.bottom=x.bottom!==undefined?x.bottom:m.bottom;m.left=x.left!==undefined?x.left:m.left;}},rightAlignYAxis:{get:function(){return q;},set:function(x){q=x;K.orient((x)?"right":"left");}},color:{get:function(){return d;},set:function(x){d=a.utils.getColor(x);l.color(d);h.color(d);i.color(d);}}});a.utils.inheritOptions(c,r);a.utils.initOptions(c);return c;};a.models.sparkline=function(){var k={top:2,right:0,bottom:2,left:0},o=400,j=32,f=null,c=true,p=d3.scale.linear(),s=d3.scale.linear(),h=function(v){return v.x;},i=function(v){return v.y;},e=a.utils.getColor(["#000"]),q,t,r,u,n=true,m=true,g=d3.dispatch("renderEnd");var l=a.utils.renderWatch(g);function d(v){l.reset();v.each(function(y){var x=o-k.left-k.right,w=j-k.top-k.bottom;f=d3.select(this);a.utils.initSVG(f);p.domain(q||d3.extent(y,h)).range(r||[0,x]);s.domain(t||d3.extent(y,i)).range(u||[w,0]);var D=f.selectAll("g.nv-wrap.nv-sparkline").data([y]);var E=D.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");var A=E.append("g");var z=D.select("g");D.attr("transform","translate("+k.left+","+k.top+")");var B=D.selectAll("path").data(function(F){return[F];});B.enter().append("path");B.exit().remove();B.style("stroke",function(F,G){return F.color||e(F,G);}).attr("d",d3.svg.line().x(function(F,G){return p(h(F,G));}).y(function(F,G){return s(i(F,G));}));var C=D.selectAll("circle.nv-point").data(function(G){var K=G.map(function(L,M){return i(L,M);});function J(L){if(L!=-1){var M=G[L];M.pointIndex=L;return M;}else{return null;}}var H=J(K.lastIndexOf(s.domain()[1])),I=J(K.indexOf(s.domain()[0])),F=J(K.length-1);return[(n?I:null),(n?H:null),(m?F:null)].filter(function(L){return L!=null;});});C.enter().append("circle");C.exit().remove();C.attr("cx",function(F,G){return p(h(F,F.pointIndex));}).attr("cy",function(F,G){return s(i(F,F.pointIndex));}).attr("r",2).attr("class",function(F,G){return h(F,F.pointIndex)==p.domain()[1]?"nv-point nv-currentValue":i(F,F.pointIndex)==s.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue";});});l.renderEnd("sparkline immediate");return d;}d.options=a.utils.optionsFunc.bind(d);d._options=Object.create({},{width:{get:function(){return o;},set:function(v){o=v;}},height:{get:function(){return j;},set:function(v){j=v;}},xDomain:{get:function(){return q;},set:function(v){q=v;}},yDomain:{get:function(){return t;},set:function(v){t=v;}},xRange:{get:function(){return r;},set:function(v){r=v;}},yRange:{get:function(){return u;},set:function(v){u=v;}},xScale:{get:function(){return p;},set:function(v){p=v;}},yScale:{get:function(){return s;},set:function(v){s=v;}},animate:{get:function(){return c;},set:function(v){c=v;}},showMinMaxPoints:{get:function(){return n;},set:function(v){n=v;}},showCurrentPoint:{get:function(){return m;},set:function(v){m=v;}},x:{get:function(){return h;},set:function(v){h=d3.functor(v);}},y:{get:function(){return i;},set:function(v){i=d3.functor(v);}},margin:{get:function(){return k;},set:function(v){k.top=v.top!==undefined?v.top:k.top;k.right=v.right!==undefined?v.right:k.right;k.bottom=v.bottom!==undefined?v.bottom:k.bottom;k.left=v.left!==undefined?v.left:k.left;}},color:{get:function(){return e;},set:function(v){e=a.utils.getColor(v);}}});d.dispatch=g;a.utils.initOptions(d);return d;};a.models.sparklinePlus=function(){var n=a.models.sparkline();var h={top:15,right:100,bottom:10,left:50},o=null,f=null,p,r,g=[],j=false,q=d3.format(",r"),s=d3.format(",.2f"),m=true,c=true,l=false,i=null,e=d3.dispatch("renderEnd");var k=a.utils.renderWatch(e);function d(t){k.reset();k.models(n);t.each(function(y){var w=d3.select(this);a.utils.initSVG(w);var v=a.utils.availableWidth(o,w,h),u=a.utils.availableHeight(f,w,h);d.update=function(){w.call(d);};d.container=this;if(!y||!y.length){a.utils.noData(d,w);return d;}else{w.selectAll(".nv-noData").remove();}var x=n.y()(y[y.length-1],y.length-1);p=n.xScale();r=n.yScale();var G=w.selectAll("g.nv-wrap.nv-sparklineplus").data([y]);var H=G.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus");var A=H.append("g");var z=G.select("g");A.append("g").attr("class","nv-sparklineWrap");A.append("g").attr("class","nv-valueWrap");A.append("g").attr("class","nv-hoverArea");G.attr("transform","translate("+h.left+","+h.top+")");var C=z.select(".nv-sparklineWrap");n.width(v).height(u);C.call(n);if(m){var F=z.select(".nv-valueWrap");var E=F.selectAll(".nv-currentValue").data([x]);E.enter().append("text").attr("class","nv-currentValue").attr("dx",l?-8:8).attr("dy",".9em").style("text-anchor",l?"end":"start");E.attr("x",v+(l?h.right:0)).attr("y",c?function(I){return r(I);}:0).style("fill",n.color()(y[y.length-1],y.length-1)).text(s(x));}A.select(".nv-hoverArea").append("rect").on("mousemove",B).on("click",function(){j=!j;}).on("mouseout",function(){g=[];D();});z.select(".nv-hoverArea rect").attr("transform",function(I){return"translate("+-h.left+","+-h.top+")";}).attr("width",v+h.left+h.right).attr("height",u+h.top);function D(){if(j){return;}var J=z.selectAll(".nv-hoverValue").data(g);var I=J.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);J.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();J.attr("transform",function(K){return"translate("+p(n.x()(y[K],K))+",0)";}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!g.length){return;}I.append("line").attr("x1",0).attr("y1",-h.top).attr("x2",0).attr("y2",u);I.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-h.top).attr("text-anchor","end").attr("dy",".9em");z.select(".nv-hoverValue .nv-xValue").text(q(n.x()(y[g[0]],g[0])));I.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-h.top).attr("text-anchor","start").attr("dy",".9em");z.select(".nv-hoverValue .nv-yValue").text(s(n.y()(y[g[0]],g[0])));}function B(){if(j){return;}var J=d3.mouse(this)[0]-h.left;function I(L,O){var M=Math.abs(n.x()(L[0],0)-O);var K=0;for(var N=0;N<L.length;N++){if(Math.abs(n.x()(L[N],N)-O)<M){M=Math.abs(n.x()(L[N],N)-O);K=N;}}return K;}g=[I(y,Math.round(p.invert(J)))];D();}});k.renderEnd("sparklinePlus immediate");return d;}d.dispatch=e;d.sparkline=n;d.options=a.utils.optionsFunc.bind(d);d._options=Object.create({},{width:{get:function(){return o;},set:function(t){o=t;}},height:{get:function(){return f;},set:function(t){f=t;}},xTickFormat:{get:function(){return q;},set:function(t){q=t;}},yTickFormat:{get:function(){return s;},set:function(t){s=t;}},showLastValue:{get:function(){return m;},set:function(t){m=t;}},alignValue:{get:function(){return c;},set:function(t){c=t;}},rightAlignValue:{get:function(){return l;},set:function(t){l=t;}},noData:{get:function(){return i;},set:function(t){i=t;}},margin:{get:function(){return h;},set:function(t){h.top=t.top!==undefined?t.top:h.top;h.right=t.right!==undefined?t.right:h.right;h.bottom=t.bottom!==undefined?t.bottom:h.bottom;h.left=t.left!==undefined?t.left:h.left;}}});a.utils.inheritOptions(d,n);a.utils.initOptions(d);return d;};a.models.stackedArea=function(){var o={top:0,right:0,bottom:0,left:0},u=960,l=500,e=a.utils.defaultColor(),m=Math.floor(Math.random()*100000),f=null,j=function(x){return x.x;},k=function(x){return x.y;},g=function(x,y){return !isNaN(k(x,y))&&k(x,y)!==null;},t="stack",p="zero",q="default",n="linear",d=false,v,w,s=a.models.scatter(),i=250,h=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");s.pointSize(2.2).pointDomain([2.2,2.2]);var r=a.utils.renderWatch(h,i);function c(x){r.reset();r.models(s);x.each(function(B){var A=u-o.left-o.right,z=l-o.top-o.bottom;f=d3.select(this);a.utils.initSVG(f);v=s.xScale();w=s.yScale();var D=B;B.forEach(function(M,N){M.seriesIndex=N;M.values=M.values.map(function(O,P){O.index=P;O.seriesIndex=N;return O;});});var C=B.filter(function(M){return !M.disabled;});B=d3.layout.stack().order(q).offset(p).values(function(M){return M.values;}).x(j).y(k).out(function(M,O,N){M.display={y:N,y0:O};})(C);var J=f.selectAll("g.nv-wrap.nv-stackedarea").data([B]);var K=J.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea");var E=K.append("defs");var G=K.append("g");var F=J.select("g");G.append("g").attr("class","nv-areaWrap");G.append("g").attr("class","nv-scatterWrap");J.attr("transform","translate("+o.left+","+o.top+")");if(s.forceY().length==0){s.forceY().push(0);}s.width(A).height(z).x(j).y(function(M){if(M.display!==undefined){return M.display.y+M.display.y0;}}).color(B.map(function(M,N){M.color=M.color||e(M,M.seriesIndex);return M.color;}));var I=F.select(".nv-scatterWrap").datum(B);I.call(s);E.append("clipPath").attr("id","nv-edge-clip-"+m).append("rect");J.select("#nv-edge-clip-"+m+" rect").attr("width",A).attr("height",z);F.attr("clip-path",d?"url(#nv-edge-clip-"+m+")":"");var y=d3.svg.area().defined(g).x(function(M,N){return v(j(M,N));}).y0(function(M){return w(M.display.y0);}).y1(function(M){return w(M.display.y+M.display.y0);}).interpolate(n);var L=d3.svg.area().defined(g).x(function(M,N){return v(j(M,N));}).y0(function(M){return w(M.display.y0);}).y1(function(M){return w(M.display.y0);});var H=F.select(".nv-areaWrap").selectAll("path.nv-area").data(function(M){return M;});H.enter().append("path").attr("class",function(M,N){return"nv-area nv-area-"+N;}).attr("d",function(M,N){return L(M.values,M.seriesIndex);}).on("mouseover",function(M,N){d3.select(this).classed("hover",true);h.areaMouseover({point:M,series:M.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:M.seriesIndex});}).on("mouseout",function(M,N){d3.select(this).classed("hover",false);h.areaMouseout({point:M,series:M.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:M.seriesIndex});}).on("click",function(M,N){d3.select(this).classed("hover",false);h.areaClick({point:M,series:M.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:M.seriesIndex});});H.exit().remove();H.style("fill",function(M,N){return M.color||e(M,M.seriesIndex);}).style("stroke",function(M,N){return M.color||e(M,M.seriesIndex);});H.watchTransition(r,"stackedArea path").attr("d",function(M,N){return y(M.values,N);});s.dispatch.on("elementMouseover.area",function(M){F.select(".nv-chart-"+m+" .nv-area-"+M.seriesIndex).classed("hover",true);});s.dispatch.on("elementMouseout.area",function(M){F.select(".nv-chart-"+m+" .nv-area-"+M.seriesIndex).classed("hover",false);});c.d3_stackedOffset_stackPercent=function(R){var P=R.length,O=R[0].length,M,N,Q,S=[];for(N=0;N<O;++N){for(M=0,Q=0;M<D.length;M++){Q+=k(D[M].values[N]);}if(Q){for(M=0;M<P;M++){R[M][N][1]/=Q;}}else{for(M=0;M<P;M++){R[M][N][1]=0;}}}for(N=0;N<O;++N){S[N]=0;}return S;};});r.renderEnd("stackedArea immediate");return c;}c.dispatch=h;c.scatter=s;s.dispatch.on("elementClick",function(){h.elementClick.apply(this,arguments);});s.dispatch.on("elementMouseover",function(){h.elementMouseover.apply(this,arguments);});s.dispatch.on("elementMouseout",function(){h.elementMouseout.apply(this,arguments);});c.interpolate=function(x){if(!arguments.length){return n;}n=x;return c;};c.duration=function(x){if(!arguments.length){return i;}i=x;r.reset(i);s.duration(i);return c;};c.dispatch=h;c.scatter=s;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return u;},set:function(x){u=x;}},height:{get:function(){return l;},set:function(x){l=x;}},defined:{get:function(){return g;},set:function(x){g=x;}},clipEdge:{get:function(){return d;},set:function(x){d=x;}},offset:{get:function(){return p;},set:function(x){p=x;}},order:{get:function(){return q;},set:function(x){q=x;}},interpolate:{get:function(){return n;},set:function(x){n=x;}},x:{get:function(){return j;},set:function(x){j=d3.functor(x);}},y:{get:function(){return k;},set:function(x){k=d3.functor(x);}},margin:{get:function(){return o;},set:function(x){o.top=x.top!==undefined?x.top:o.top;o.right=x.right!==undefined?x.right:o.right;o.bottom=x.bottom!==undefined?x.bottom:o.bottom;o.left=x.left!==undefined?x.left:o.left;}},color:{get:function(){return e;},set:function(x){e=a.utils.getColor(x);}},style:{get:function(){return t;},set:function(x){t=x;switch(t){case"stack":c.offset("zero");c.order("default");break;case"stream":c.offset("wiggle");c.order("inside-out");break;case"stream-center":c.offset("silhouette");c.order("inside-out");break;case"expand":c.offset("expand");c.order("default");break;case"stack_percent":c.offset(c.d3_stackedOffset_stackPercent);c.order("default");break;}}},duration:{get:function(){return i;},set:function(x){i=x;r.reset(i);s.duration(i);}}});a.utils.inheritOptions(c,s);a.utils.initOptions(c);return c;};a.models.stackedAreaChart=function(){var G=a.models.stackedArea(),Q=a.models.axis(),S=a.models.axis(),p=a.models.legend(),g=a.models.legend(),o=a.interactiveGuideline(),L=a.models.tooltip(),l=a.models.focus(a.models.stackedArea());var r={top:10,right:25,bottom:50,left:60},s=null,O=null,n=null,d=a.utils.defaultColor(),B=true,C=true,q="top",E=true,F=true,A=false,m=false,N=false,D=true,M="TOTAL",P,R,H=a.utils.state(),i=null,t=null,j=d3.dispatch("stateChange","changeState","renderEnd"),h=250,f=["Stacked","Stream","Expanded"],e={},k=250;H.style=G.style();Q.orient("bottom").tickPadding(7);S.orient((A)?"right":"left");L.headerFormatter(function(x,y){return Q.tickFormat()(x,y);}).valueFormatter(function(x,y){return S.tickFormat()(x,y);});o.tooltip.headerFormatter(function(x,y){return Q.tickFormat()(x,y);}).valueFormatter(function(x,y){return x==null?"N/A":S.tickFormat()(x,y);});var v=null,u=null;g.updateState(false);var z=a.utils.renderWatch(j);var K=G.style();var I=function(x){return function(){return{active:x.map(function(y){return !y.disabled;}),style:G.style()};};};var J=function(x){return function(y){if(y.style!==undefined){K=y.style;}if(y.active!==undefined){x.forEach(function(U,T){U.disabled=!y.active[T];});}};};var w=d3.format("%");function c(x){z.reset();z.models(G);if(E){z.models(Q);}if(F){z.models(S);}x.each(function(X){var U=d3.select(this),ai=this;a.utils.initSVG(U);var T=a.utils.availableWidth(O,U,r),y=a.utils.availableHeight(n,U,r)-(m?l.height():0);c.update=function(){U.transition().duration(k).call(c);};c.container=this;H.setter(J(X),c.update).getter(I(X)).update();H.disabled=X.map(function(ao){return !!ao.disabled;});if(!i){var ac;i={};for(ac in H){if(H[ac] instanceof Array){i[ac]=H[ac].slice(0);}else{i[ac]=H[ac];}}}if(!X||!X.length||!X.filter(function(ao){return ao.values.length;}).length){a.utils.noData(c,U);return c;}else{U.selectAll(".nv-noData").remove();}P=G.xScale();R=G.yScale();var am=U.selectAll("g.nv-wrap.nv-stackedAreaChart").data([X]);var ab=am.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g");var aa=am.select("g");ab.append("g").attr("class","nv-legendWrap");ab.append("g").attr("class","nv-controlsWrap");var Z=ab.append("g").attr("class","nv-focus");Z.append("g").attr("class","nv-background").append("rect");Z.append("g").attr("class","nv-x nv-axis");Z.append("g").attr("class","nv-y nv-axis");Z.append("g").attr("class","nv-stackedWrap");Z.append("g").attr("class","nv-interactive");var V=ab.append("g").attr("class","nv-focusWrap");if(!C){aa.select(".nv-legendWrap").selectAll("*").remove();}else{var ae=(B&&q==="top")?T-h:T;p.width(ae);aa.select(".nv-legendWrap").datum(X).call(p);if(q==="bottom"){var an=(E?12:0)+10;r.bottom=Math.max(p.height()+an,r.bottom);y=a.utils.availableHeight(n,U,r)-(m?l.height():0);var ad=y+an;aa.select(".nv-legendWrap").attr("transform","translate(0,"+ad+")");}else{if(q==="top"){if(!s&&r.top!=p.height()){r.top=p.height();y=a.utils.availableHeight(n,U,r)-(m?l.height():0);}aa.select(".nv-legendWrap").attr("transform","translate("+(T-ae)+","+(-r.top)+")");}}}if(!B){aa.select(".nv-controlsWrap").selectAll("*").remove();}else{var W=[{key:e.stacked||"Stacked",metaKey:"Stacked",disabled:G.style()!="stack",style:"stack"},{key:e.stream||"Stream",metaKey:"Stream",disabled:G.style()!="stream",style:"stream"},{key:e.expanded||"Expanded",metaKey:"Expanded",disabled:G.style()!="expand",style:"expand"},{key:e.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:G.style()!="stack_percent",style:"stack_percent"}];h=(f.length/3)*260;W=W.filter(function(ao){return f.indexOf(ao.metaKey)!==-1;});g.width(h).color(["#444","#444","#444"]);aa.select(".nv-controlsWrap").datum(W).call(g);var ag=Math.max(g.height(),C&&(q==="top")?p.height():0);if(r.top!=ag){r.top=ag;y=a.utils.availableHeight(n,U,r)-(m?l.height():0);}aa.select(".nv-controlsWrap").attr("transform","translate(0,"+(-r.top)+")");}am.attr("transform","translate("+r.left+","+r.top+")");if(A){aa.select(".nv-y.nv-axis").attr("transform","translate("+T+",0)");}if(N){o.width(T).height(y).margin({left:r.left,top:r.top}).svgContainer(U).xScale(P);am.select(".nv-interactive").call(o);}aa.select(".nv-focus .nv-background rect").attr("width",T).attr("height",y);G.width(T).height(y).color(X.map(function(ao,ap){return ao.color||d(ao,ap);}).filter(function(ao,ap){return !X[ap].disabled;}));var ah=aa.select(".nv-focus .nv-stackedWrap").datum(X.filter(function(ao){return !ao.disabled;}));if(E){Q.scale(P)._ticks(a.utils.calcTicksX(T/100,X)).tickSize(-y,0);}if(F){var aj;if(G.offset()==="wiggle"){aj=0;}else{aj=a.utils.calcTicksY(y/36,X);}S.scale(R)._ticks(aj).tickSize(-T,0);}function ak(){if(E){aa.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+y+")").transition().duration(k).call(Q);}}function al(){if(F){if(G.style()==="expand"||G.style()==="stack_percent"){var ao=S.tickFormat();if(!v||ao!==w){v=ao;}S.tickFormat(w);}else{if(v){S.tickFormat(v);v=null;}}aa.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(S);}}if(!m){ah.transition().call(G);ak();al();}else{l.width(T);aa.select(".nv-focusWrap").attr("transform","translate(0,"+(y+r.bottom+l.margin().top)+")").datum(X.filter(function(ao){return !ao.disabled;})).call(l);var Y=l.brush.empty()?l.xDomain():l.brush.extent();if(Y!==null){af(Y);}}G.dispatch.on("areaClick.toggle",function(ao){if(X.filter(function(ap){return !ap.disabled;}).length===1){X.forEach(function(ap){ap.disabled=false;});}else{X.forEach(function(ap,aq){ap.disabled=(aq!=ao.seriesIndex);});}H.disabled=X.map(function(ap){return !!ap.disabled;});j.stateChange(H);c.update();});p.dispatch.on("stateChange",function(ap){for(var ao in ap){H[ao]=ap[ao];}j.stateChange(H);c.update();});g.dispatch.on("legendClick",function(ao,ap){if(!ao.disabled){return;}W=W.map(function(aq){aq.disabled=true;return aq;});ao.disabled=false;G.style(ao.style);H.style=G.style();j.stateChange(H);c.update();});o.dispatch.on("elementMousemove",function(ar){G.clearHighlights();var aw,au,av,ao=[],ay=0,ap=true,aq=false;X.filter(function(aD,aC){aD.seriesIndex=aC;return !aD.disabled;}).forEach(function(aF,aC){au=a.interactiveBisect(aF.values,ar.pointXValue,c.x());var aD=aF.values[au];var aE=c.y()(aD,au);if(aE!=null&&aE>0){G.highlightPoint(aC,au,true);aq=true;}if(aC===(X.length-1)&&!aq){G.highlightPoint(aC,au,true);}if(typeof aD==="undefined"){return;}if(typeof aw==="undefined"){aw=aD;}if(typeof av==="undefined"){av=c.xScale()(c.x()(aD,au));}var aG=(G.style()=="expand")?aD.display.y:c.y()(aD,au);ao.push({key:aF.key,value:aG,color:d(aF,aF.seriesIndex),point:aD});if(D&&G.style()!="expand"&&aG!=null){ay+=aG;ap=false;}});ao.reverse();if(ao.length>2){var aB=c.yScale().invert(ar.mouseY);var aA=Infinity,at=null;ao.forEach(function(aD,aC){aB=Math.abs(aB);var aF=Math.abs(aD.point.display.y0);var aE=Math.abs(aD.point.display.y);if(aB>=aF&&aB<=(aE+aF)){at=aC;return;}});if(at!=null){ao[at].highlight=true;}}if(D&&G.style()!="expand"&&ao.length>=2&&!ap){ao.push({key:M,value:ay,total:true});}var az=c.x()(aw,au);var ax=o.tooltip.valueFormatter();if(G.style()==="expand"||G.style()==="stack_percent"){if(!u){u=ax;}ax=d3.format(".1%");}else{if(u){ax=u;u=null;}}o.tooltip.valueFormatter(ax).data({value:az,series:ao})();o.renderGuideLine(av);});o.dispatch.on("elementMouseout",function(ao){G.clearHighlights();});l.dispatch.on("onBrush",function(ao){af(ao);});j.on("changeState",function(ao){if(typeof ao.disabled!=="undefined"&&X.length===ao.disabled.length){X.forEach(function(aq,ap){aq.disabled=ao.disabled[ap];});H.disabled=ao.disabled;}if(typeof ao.style!=="undefined"){G.style(ao.style);K=ao.style;}c.update();});function af(ao){var ap=aa.select(".nv-focus .nv-stackedWrap").datum(X.filter(function(aq){return !aq.disabled;}).map(function(aq,ar){return{key:aq.key,area:aq.area,classed:aq.classed,values:aq.values.filter(function(at,au){return G.x()(at,au)>=ao[0]&&G.x()(at,au)<=ao[1];}),disableTooltip:aq.disableTooltip};}));ap.transition().duration(k).call(G);ak();al();}});z.renderEnd("stacked Area chart immediate");return c;}G.dispatch.on("elementMouseover.tooltip",function(x){x.point.x=G.x()(x.point);x.point.y=G.y()(x.point);L.data(x).hidden(false);});G.dispatch.on("elementMouseout.tooltip",function(x){L.hidden(true);});c.dispatch=j;c.stacked=G;c.legend=p;c.controls=g;c.xAxis=Q;c.x2Axis=l.xAxis;c.yAxis=S;c.y2Axis=l.yAxis;c.interactiveLayer=o;c.tooltip=L;c.focus=l;c.dispatch=j;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return O;},set:function(x){O=x;}},height:{get:function(){return n;},set:function(x){n=x;}},showLegend:{get:function(){return C;},set:function(x){C=x;}},legendPosition:{get:function(){return q;},set:function(x){q=x;}},showXAxis:{get:function(){return E;},set:function(x){E=x;}},showYAxis:{get:function(){return F;},set:function(x){F=x;}},defaultState:{get:function(){return i;},set:function(x){i=x;}},noData:{get:function(){return t;},set:function(x){t=x;}},showControls:{get:function(){return B;},set:function(x){B=x;}},controlLabels:{get:function(){return e;},set:function(x){e=x;}},controlOptions:{get:function(){return f;},set:function(x){f=x;}},showTotalInTooltip:{get:function(){return D;},set:function(x){D=x;}},totalLabel:{get:function(){return M;},set:function(x){M=x;}},focusEnable:{get:function(){return m;},set:function(x){m=x;}},focusHeight:{get:function(){return l.height();},set:function(x){l.height(x);}},brushExtent:{get:function(){return l.brushExtent();},set:function(x){l.brushExtent(x);}},margin:{get:function(){return r;},set:function(x){if(x.top!==undefined){r.top=x.top;s=x.top;}r.right=x.right!==undefined?x.right:r.right;r.bottom=x.bottom!==undefined?x.bottom:r.bottom;r.left=x.left!==undefined?x.left:r.left;}},focusMargin:{get:function(){return l.margin;},set:function(x){l.margin.top=x.top!==undefined?x.top:l.margin.top;l.margin.right=x.right!==undefined?x.right:l.margin.right;l.margin.bottom=x.bottom!==undefined?x.bottom:l.margin.bottom;l.margin.left=x.left!==undefined?x.left:l.margin.left;}},duration:{get:function(){return k;},set:function(x){k=x;z.reset(k);G.duration(k);Q.duration(k);S.duration(k);}},color:{get:function(){return d;},set:function(x){d=a.utils.getColor(x);p.color(d);G.color(d);l.color(d);}},x:{get:function(){return G.x();},set:function(x){G.x(x);l.x(x);}},y:{get:function(){return G.y();},set:function(x){G.y(x);l.y(x);}},rightAlignYAxis:{get:function(){return A;},set:function(x){A=x;S.orient(A?"right":"left");}},useInteractiveGuideline:{get:function(){return N;},set:function(x){N=!!x;c.interactive(!x);c.useVoronoi(!x);G.scatter.interactive(!x);}}});a.utils.inheritOptions(c,G);a.utils.initOptions(c);return c;};a.models.stackedAreaWithFocusChart=function(){return a.models.stackedAreaChart().margin({bottom:30}).focusEnable(true);};a.models.sunburst=function(){var v={top:0,right:0,bottom:0,left:0},K=600,p=600,w="count",z={count:function(x){return 1;},value:function(x){return x.value||x.size;},size:function(x){return x.value||x.size;}},q=Math.floor(Math.random()*10000),l=null,i=a.utils.defaultColor(),G=false,s=function(x){if(w==="count"){return x.name+" #"+x.value;}else{return x.name+" "+(x.value||x.size);}},t=0.02,H=function(x,y){return x.name>y.name;},r=function(x,y){if(x.parent!==undefined){return x.name+"-"+x.parent.name+"-"+y;}else{return x.name;}},o=true,n=500,m=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd");var L=d3.scale.linear().range([0,2*Math.PI]);var M=d3.scale.sqrt();var B=d3.layout.partition().sort(H);var A,g,f,D;var C={};var c=d3.svg.arc().startAngle(function(x){return Math.max(0,Math.min(2*Math.PI,L(x.x)));}).endAngle(function(x){return Math.max(0,Math.min(2*Math.PI,L(x.x+x.dx)));}).innerRadius(function(x){return Math.max(0,M(x.y));}).outerRadius(function(x){return Math.max(0,M(x.y+x.dy));});function F(y){var x=j(y);if(x>90){return 180;}else{return 0;}}function j(y){var P=Math.max(0,Math.min(2*Math.PI,L(y.x)));var O=Math.max(0,Math.min(2*Math.PI,L(y.x+y.dx)));var x=(((P+O)/2)*(180/Math.PI))-90;return x;}function k(x){var O=Math.max(0,Math.min(2*Math.PI,L(x.x)));var y=Math.max(0,Math.min(2*Math.PI,L(x.x+x.dx)));return(y-O)/(2*Math.PI);}function u(x){var P=Math.max(0,Math.min(2*Math.PI,L(x.x)));var y=Math.max(0,Math.min(2*Math.PI,L(x.x+x.dx)));var O=y-P;return O>t;}function e(x,y){var O=d3.interpolate(L.domain(),[A.x,A.x+A.dx]),P=d3.interpolate(M.domain(),[A.y,1]),Q=d3.interpolate(M.range(),[A.y?20:0,D]);if(y===0){return function(){return c(x);};}else{return function(R){L.domain(O(R));M.domain(P(R)).range(Q(R));return c(x);};}}function d(x){var y=d3.interpolate({x:x.x0,dx:x.dx0,y:x.y0,dy:x.dy0},x);return function(P){var O=y(P);x.x0=O.x;x.dx0=O.dx;x.y0=O.y;x.dy0=O.dy;return c(O);};}function J(y){var x=r(y);if(!C[x]){C[x]={};}var O=C[x];O.dx=y.dx;O.x=y.x;O.dy=y.dy;O.y=y.y;}function I(x){x.forEach(function(O){var y=r(O);var P=C[y];if(P){O.dx0=P.dx;O.x0=P.x;O.dy0=P.dy;O.y0=P.y;}else{O.dx0=O.dx;O.x0=O.x;O.dy0=O.dy;O.y0=O.y;}J(O);});}function N(x){var y=l.selectAll("text");var O=l.selectAll("path");y.transition().attr("opacity",0);A=x;O.transition().duration(n).attrTween("d",e).each("end",function(Q){if(Q.x>=x.x&&Q.x<(x.x+x.dx)){if(Q.depth>=x.depth){var R=d3.select(this.parentNode);var P=R.select("text");P.transition().duration(n).text(function(S){return s(S);}).attr("opacity",function(S){if(u(S)){return 1;}else{return 0;}}).attr("transform",function(){var U=this.getBBox().width;if(Q.depth===0){return"translate("+(U/2*-1)+",0)";}else{if(Q.depth===x.depth){return"translate("+(M(Q.y)+5)+",0)";}else{var S=j(Q);var T=F(Q);if(T===0){return"rotate("+S+")translate("+(M(Q.y)+5)+",0)";}else{return"rotate("+S+")translate("+(M(Q.y)+U+5)+",0)rotate("+T+")";}}}});}}});}var E=a.utils.renderWatch(m);function h(x){E.reset();x.each(function(P){l=d3.select(this);g=a.utils.availableWidth(K,l,v);f=a.utils.availableHeight(p,l,v);D=Math.min(g,f)/2;M.range([0,D]);var R=l.select("g.nvd3.nv-wrap.nv-sunburst");if(!R[0][0]){R=l.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+q).attr("transform","translate("+((g/2)+v.left+v.right)+","+((f/2)+v.top+v.bottom)+")");}else{R.attr("transform","translate("+((g/2)+v.left+v.right)+","+((f/2)+v.top+v.bottom)+")");}l.on("click",function(S,T){m.chartClick({data:S,index:T,pos:d3.event,id:q});});B.value(z[w]||z.count);var Q=B.nodes(P[0]).reverse();I(Q);var y=R.selectAll(".arc-container").data(Q,r);var O=y.enter().append("g").attr("class","arc-container");O.append("path").attr("d",c).style("fill",function(S){if(S.color){return S.color;}else{if(o){return i((S.children?S:S.parent).name);}else{return i(S.name);}}}).style("stroke","#FFF").on("click",function(S,T){N(S);m.elementClick({data:S,index:T});}).on("mouseover",function(S,T){d3.select(this).classed("hover",true).style("opacity",0.8);m.elementMouseover({data:S,color:d3.select(this).style("fill"),percent:k(S)});}).on("mouseout",function(S,T){d3.select(this).classed("hover",false).style("opacity",1);m.elementMouseout({data:S});}).on("mousemove",function(S,T){m.elementMousemove({data:S});});y.each(function(S){d3.select(this).select("path").transition().duration(n).attrTween("d",d);});if(G){y.selectAll("text").remove();y.append("text").text(function(S){return s(S);}).transition().duration(n).attr("opacity",function(S){if(u(S)){return 1;}else{return 0;}}).attr("transform",function(T){var V=this.getBBox().width;if(T.depth===0){return"rotate(0)translate("+(V/2*-1)+",0)";}else{var S=j(T);var U=F(T);if(U===0){return"rotate("+S+")translate("+(M(T.y)+5)+",0)";}else{return"rotate("+S+")translate("+(M(T.y)+V+5)+",0)rotate("+U+")";}}});}N(Q[Q.length-1]);y.exit().transition().duration(n).attr("opacity",0).each("end",function(S){var T=r(S);C[T]=undefined;}).remove();});E.renderEnd("sunburst immediate");return h;}h.dispatch=m;h.options=a.utils.optionsFunc.bind(h);h._options=Object.create({},{width:{get:function(){return K;},set:function(x){K=x;}},height:{get:function(){return p;},set:function(x){p=x;}},mode:{get:function(){return w;},set:function(x){w=x;}},id:{get:function(){return q;},set:function(x){q=x;}},duration:{get:function(){return n;},set:function(x){n=x;}},groupColorByParent:{get:function(){return o;},set:function(x){o=!!x;}},showLabels:{get:function(){return G;},set:function(x){G=!!x;}},labelFormat:{get:function(){return s;},set:function(x){s=x;}},labelThreshold:{get:function(){return t;},set:function(x){t=x;}},sort:{get:function(){return H;},set:function(x){H=x;}},key:{get:function(){return r;},set:function(x){r=x;}},margin:{get:function(){return v;},set:function(x){v.top=x.top!=undefined?x.top:v.top;v.right=x.right!=undefined?x.right:v.right;v.bottom=x.bottom!=undefined?x.bottom:v.bottom;v.left=x.left!=undefined?x.left:v.left;}},color:{get:function(){return i;},set:function(x){i=a.utils.getColor(x);}}});a.utils.initOptions(h);return h;};a.models.sunburstChart=function(){var n=a.models.sunburst();var o=a.models.tooltip();var j={top:30,right:20,bottom:20,left:20},p=null,h=null,d=a.utils.defaultColor(),m=false,i=Math.round(Math.random()*100000),e=null,k=null,g=250,f=d3.dispatch("stateChange","changeState","renderEnd");var l=a.utils.renderWatch(f);o.duration(0).headerEnabled(false).valueFormatter(function(q){return q;});function c(q){l.reset();l.models(n);q.each(function(u){var t=d3.select(this);a.utils.initSVG(t);var s=a.utils.availableWidth(p,t,j);var r=a.utils.availableHeight(h,t,j);c.update=function(){if(g===0){t.call(c);}else{t.transition().duration(g).call(c);}};c.container=t;if(!u||!u.length){a.utils.noData(c,t);return c;}else{t.selectAll(".nv-noData").remove();}n.width(s).height(r).margin(j);t.call(n);});l.renderEnd("sunburstChart immediate");return c;}n.dispatch.on("elementMouseover.tooltip",function(q){q.series={key:q.data.name,value:(q.data.value||q.data.size),color:q.color,percent:q.percent};if(!m){delete q.percent;delete q.series.percent;}o.data(q).hidden(false);});n.dispatch.on("elementMouseout.tooltip",function(q){o.hidden(true);});n.dispatch.on("elementMousemove.tooltip",function(q){o();});c.dispatch=f;c.sunburst=n;c.tooltip=o;c.options=a.utils.optionsFunc.bind(c);c._options=Object.create({},{noData:{get:function(){return k;},set:function(q){k=q;}},defaultState:{get:function(){return e;},set:function(q){e=q;}},showTooltipPercent:{get:function(){return m;},set:function(q){m=q;}},color:{get:function(){return d;},set:function(q){d=q;n.color(d);}},duration:{get:function(){return g;},set:function(q){g=q;l.reset(g);n.duration(g);}},margin:{get:function(){return j;},set:function(q){j.top=q.top!==undefined?q.top:j.top;j.right=q.right!==undefined?q.right:j.right;j.bottom=q.bottom!==undefined?q.bottom:j.bottom;j.left=q.left!==undefined?q.left:j.left;n.margin(j);}}});a.utils.inheritOptions(c,n);a.utils.initOptions(c);return c;};a.version="1.8.6-dev";})();