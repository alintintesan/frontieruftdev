function DetailOverviewSection(q,r){this._cssNames={sectionWrapper:"detail-section-wrapper",firstSection:"first-section",section:"detail-section",overviewSection:"overview-section",noSnapshot:"no-snapshot",layout:"section-layout",captionLabel:"caption-label",additionalCaption:"additional-caption",dataLabel:"data-label",dataContent:"data-content",snapshot:"snapshot",snapshotWrapper:"snapshot-wrapper"};this._sectionData=q;this._sectionUIMetadata=r;this._sectionWrapper=__uiElements.create_div().addClassNames(this._cssNames.sectionWrapper,this._cssNames.firstSection).appendTo(this._sectionUIMetadata.sections);this._section=__uiElements.create_div().addClassNames(this._cssNames.section,this._cssNames.overviewSection).appendTo(this._sectionWrapper);this._sectionLayout=__uiElements.create_div().addClassNames(this._cssNames.layout).appendTo(this._section);this._contentTable=__uiElements.create_table().appendTo(this._sectionLayout);var o=__uiElements.add_table_row(this._contentTable);var a=__uiElements.add_table_cell(o);this._createCaptionUI(a);var p=__uiElements.add_table_row(this._contentTable);var b=__uiElements.add_table_cell(p);this._createSubCaptionUI(b);var f=__commonUtils.array.makeArray(__commonUtils.general.getValue(this._sectionData.data_items,this._sectionData));if(f){for(var h=0;h<f.length;h++){var e=f[h];var m=__uiElements.add_table_row(this._contentTable);var k=__uiElements.add_table_cell(m);var g=__commonUtils.str.normalizeAll(__commonUtils.general.getValue(e.label,e));this._createSearchableElement(this._getUIId("data"+(h+1)+"_label"),g).addClassNames(this._cssNames.dataLabel).appendTo(k);var n=__uiElements.add_table_row(this._contentTable);var l=__uiElements.add_table_cell(n);var c=__commonUtils.general.getValue(e.content,e);var d=__commonUtils.general.getValue(e.format,e);var j=(d&&d=="plaintext");if(j){c="<pre>"+__commonUtils.str.escape(c)+"</pre>";}this._createSearchableElement(this._getUIId("data"+(h+1)+"_value"),c).addClassNames(this._cssNames.dataContent).appendTo(l);}}this._section.addClassNames(this._cssNames.noSnapshot);}DetailOverviewSection.prototype.updateUILayout=function(){if(!this._snapshot){var b=__commonUtils.general.getValue(this._sectionData.thumbnail,this._sectionData);if(b){var c=__commonUtils.general.getValue(b.url,b);if(c){this._section.removeClassNames(this._cssNames.noSnapshot);this._snapshot=__uiElements.create_div().addClassNames(this._cssNames.snapshot).appendTo(this._sectionUIMetadata.pane);this._snapshotWrapper=__uiElements.create_div().addClassNames(this._cssNames.snapshotWrapper).appendTo(this._snapshot);this._thumbnail=new ScaleImage(c,this._snapshotWrapper).setImageAlign("right","top");var a=__commonUtils.general.getValue(b.highlight,b);if(a){this._thumbnail.highlight(a.top,a.left,a.width,a.height);}}}}this._updateThumbnailLayout();return this;};DetailOverviewSection.prototype._updateThumbnailLayout=function(){if(this._snapshot&&this._sectionUIMetadata.pane){var b;var a=__commonUtils.general.calcAbsTopLeft(this._sectionWrapper.e,this._sectionUIMetadata.pane.e);if(a){var d=30;b=a.y+this._sectionWrapper.getHeight()-d;}var c;var e=this._sectionWrapper.getWidth();if(e>0){c=Math.round(e/3);}if(c&&b){this._snapshot.setWidth(c);this._snapshot.setHeight(b);this._sectionLayout.setPadding(null,c+30);if(this._thumbnail){this._thumbnail.update();}}}return this;};DetailOverviewSection.prototype._getUIId=function(a){if(a){return"item_detail_overview_section_"+a+"_"+this._sectionUIMetadata.itemDataKey;}else{return Math.uuid();}};DetailOverviewSection.prototype._createSearchableElement=function(e,a,d){if(!e){e=Math.uuid();}if(!a){a="";}if(!d){d=this._sectionUIMetadata.searchRankBase;}var c={id:e,content:a,rank:d,unmatchHideUIId:this._sectionUIMetadata.searchUnmatchHideUIIds};var b=__fullTextSearchHelper.createSearchableNode(c);__fullTextSearchHelper.addSearchableNodes([b]);return __uiElements.get_wrapper(b);};DetailOverviewSection.prototype._createCaptionUI=function(b){var a=__uiElements.create_div();var c={sectionData:this._sectionData,fullDataModel:this._sectionUIMetadata.fullDataModel,detailData:this._sectionUIMetadata.itemDetailData,parent:a,defaultSearchSupport:true,search:{uiIdPrefix:this._getUIId("caption"),unmatchHideUIId:this._sectionUIMetadata.searchUnmatchHideUIIds,rank:this._sectionUIMetadata.searchRankBase}};var d=__defaultRenders.keys["DetailsPane.OverviewSection.Caption"];if(!__reportExtension.executeExternalRenders(d,c)){__defaultRenders.execute(d,c);}if(c.defaultSearchSupport){this._createSearchableElement(c.search.uiIdPrefix,a.e,c.search.rank).appendTo(b);}else{a.appendTo(b);}return this;};DetailOverviewSection.prototype._createSubCaptionUI=function(b){var a=__uiElements.create_div();var c={sectionData:this._sectionData,fullDataModel:this._sectionUIMetadata.fullDataModel,detailData:this._sectionUIMetadata.itemDetailData,parent:a,defaultSearchSupport:true,search:{uiIdPrefix:this._getUIId("subcaption"),unmatchHideUIId:this._sectionUIMetadata.searchUnmatchHideUIIds,rank:this._sectionUIMetadata.searchRankBase}};var d=__defaultRenders.keys["DetailsPane.OverviewSection.SubCaption"];if(!__reportExtension.executeExternalRenders(d,c)){__defaultRenders.execute(d,c);}if(c.defaultSearchSupport){this._createSearchableElement(c.search.uiIdPrefix,a.e,c.search.rank).appendTo(b);}else{a.appendTo(b);}return this;};function DetailsOverviewSectionCaptionRenderer(a){this._cssNames={captionLabel:"caption-label"};this._captionContentHTML=a;}DetailsOverviewSectionCaptionRenderer.prototype.render=function(a){if(a){__uiElements.create_div().addClassNames(this._cssNames.captionLabel).setInnerHTML(this._captionContentHTML).appendTo(a);}};function DetailsOverviewSectionSubCaptionRenderer(a){this._cssNames={additionalCaption:"additional-caption"};this._subCaptionContentHTML=a;}DetailsOverviewSectionSubCaptionRenderer.prototype.render=function(a){if(a){__uiElements.create_div().addClassNames(this._cssNames.additionalCaption).setInnerHTML(this._subCaptionContentHTML).appendTo(a);}};(function(){__defaultRenders.add(__defaultRenders.keys["DetailsPane.OverviewSection.Caption"],function(c){if(!c){return;}var d=c.sectionData;var b=c.parent;if(!d||!b){return;}var a=__commonUtils.str.normalizeAll(__commonUtils.general.getValue(d.caption,d));new DetailsOverviewSectionCaptionRenderer(a).render(b);});})();(function(){__defaultRenders.add(__defaultRenders.keys["DetailsPane.OverviewSection.SubCaption"],function(b){if(!b){return;}var c=b.sectionData;var a=b.parent;if(!c||!a){return;}var d="<pre>"+__commonUtils.general.getValue(c.subcaption,c)+"</pre>";new DetailsOverviewSectionSubCaptionRenderer(d).render(a);});})();